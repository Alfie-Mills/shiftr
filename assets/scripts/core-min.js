"use strict";function on_load(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];document.addEventListener("DOMContentLoaded",function(e){})}function vw(){return window.innerWidth}function vh(){return window.innerHeight}"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),i=1;i<arguments.length;i++){var s=arguments[i];if(null!=s)for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(n[o]=s[o])}return n},writable:!0,configurable:!0}),Element.prototype.animateScroll=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t+=document.querySelector(".header").offsetHeight;var n=window.pageYOffset||document.documentElement.scrollTop,i=this.getBoundingClientRect().top+n,s=(s=i-n)-t,o=0;Math.easeInOutQuad=function(e,t,n,i){return(e/=i/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},function t(){o+=16.66;var i=Math.easeInOutQuad(o,n,s,e);document.documentElement.scrollTop=document.body.scrollTop=i,o<e&&setTimeout(t,16.66)}()},Element.prototype.shiftrCarousel=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={autoplay:!0,speed:4e3,transition:800,show_markers:!0,pause_on_marker_hover:!0},n=0;0==Object.keys(e).length&&(e=t);var i=Object.assign(t,e),s=this.children[0],o=this.children[0].children;s.style.height=o[0].offsetHeight+"px";var r=void 0;y()&&((r=document.createElement("div")).classList.add("stage-map"),this.appendChild(r));var a=!1,c=!1;for(n=0;n<o.length;n++)if(o[n].dataset.shiftrCarouselProp=n,o[n].dataset.shiftrCarouselActive="false",y()){var l=document.createElement("div"),d=document.createElement("span");l.dataset.shiftrCarouselMarker=n,l.appendChild(d),r.appendChild(l)}var u=void 0;y()&&(u=Object.keys(r.children).map(function(e){return r.children[e]})),o[0].classList.add("active"),o[0].dataset.shiftrCarouselActive="true",y()&&u[0].classList.add("active");var f=[];for(n=0;n<o.length;n++){f.push([]),o[n].querySelectorAll("*").forEach(function(e){"IMG"==e.nodeName&&f[n].push(e)})}f.length>0&&p(f[0]),f.length>1&&setTimeout(function(e){p(f[1])},i.speed/2);var v=function(){if(a)return!1;if(c)return!1;c=!0;var e=g(),t=L(e);if(y()&&u[t].classList.remove("active"),t==o.length-1)o[0].style.zIndex=150,o[0].classList.add("active"),o[0].dataset.shiftrCarouselActive="true",y()&&u[0].classList.add("active"),setTimeout(function(){o[0].style.zIndex=""},i.transition);else{var n=e.nextElementSibling,s=parseInt(n.dataset.shiftrCarouselProp,10);n.classList.add("active"),n.dataset.shiftrCarouselActive="true",y()&&u[s].classList.add("active"),t==o.length-2||f[s+1]&&p(f[s+1])}e.dataset.shiftrCarouselActive="false",setTimeout(function(){e.classList.remove("active"),c=!1},i.transition)},m=void 0,h=void 0;function p(e){for(n=0;n<e.length;n++)!1===e[n].hasAttribute("src")&&(e[n].src=e[n].dataset.src,e[n].dataset.src="")}function g(){var e=void 0;for(n=0;n<o.length;n++)"true"==o[n].dataset.shiftrCarouselActive&&(e=o[n]);return e}function L(e){return parseInt(e.dataset.shiftrCarouselProp,10)}function y(){return!!i.show_markers}i.autoplay&&(m=setInterval(v,i.speed)),y()&&u.forEach(function(e){e.addEventListener("click",function(){if(c)return a=!1,!1;var t=g(),n=L(t),s=(o[e.dataset.shiftrCarouselMarker],e.dataset.shiftrCarouselMarker);a=!1,i.autoplay&&(clearInterval(m),clearTimeout(h)),n!=s&&(c=!0,u[n].classList.remove("active"),o[s].style.zIndex=150,o[s].classList.add("active"),o[s].dataset.shiftrCarouselActive="true",u[s].classList.add("active"),t.dataset.shiftrCarouselActive="false",setTimeout(function(){t.classList.remove("active"),o[s].style.zIndex="",c=!1},i.transition)),i.autoplay&&(h=setTimeout(function(){m=setInterval(v,i.speed)},i.speed))}),e.addEventListener("mouseover",function(){o[e.dataset.shiftrCarouselMarker];var t=e.dataset.shiftrCarouselMarker;i.pause_on_marker_hover&&(a=!0),f[t]&&p(f[t])}),e.addEventListener("mouseleave",function(){a=!1})})},Element.prototype.floater=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={bounding:this.parentElement,float_buffer:0,header:document.querySelector(".header"),starting:null,ending:null,events:{resize:window,orientationchange:window}};0==Object.keys(e).length&&(e=t);var n,i,s,o,r,a=Object.assign(t,e),c=this,l=a.bounding,d=a.float_buffer;a.header&&(d+=a.header.offsetHeight);var u=function(e){var t=window.pageYOffset||document.documentElement.scrollTop;"scroll"!=e.type&&(n=c.getBoundingClientRect(),i=l.getBoundingClientRect(),n.left,o=null!==a.starting?a.starting.getBoundingClientRect().top+t:i.top+t,r=null!==a.ending?a.ending.getBoundingClientRect().bottom+t:i.bottom+t),s=t+d,t+d+c.offsetHeight>=r?(c.classList.add("pause"),c.classList.remove("sticky"),c.setAttribute("style","")):s>=o?(c.style.width=l.offsetWidth+"px",c.style.top=d+"px",c.style.left=i.left+"px",c.classList.add("sticky"),c.classList.remove("pause")):s<=o&&(c.classList.remove("sticky"),c.setAttribute("style",""))};Object.keys(a.events).forEach(function(e){a.events[e].addEventListener(e,u)}),document.addEventListener("DOMContentLoaded",u),window.addEventListener("scroll",u)},Element.prototype.follower=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={sections:document.querySelectorAll("section")};0==Object.keys(e).length&&(e=t);var n,i=Object.assign(t,e),s=this.querySelectorAll("span"),o=i.sections;s.forEach(function(e){e.addEventListener("click",function(t){document.querySelector(e.getAttribute("data-on-page-link")).animateScroll()})});var r=function(e){var t=window.pageYOffset||document.documentElement.scrollTop,i=t+vh()/2;o.forEach(function(o){"scroll"!=e.type&&(a=(n=o.getBoundingClientRect()).top+t,c=n.bottom+t);var r=o.getAttribute("id").substring(8),a=o.getBoundingClientRect().top+t,c=o.getBoundingClientRect().bottom+t;i>a&&i<c?s[r-1].classList.add("active"):s[r-1].classList.remove("active")})};document.addEventListener("DOMContentLoaded",r),window.addEventListener("scroll",r)};var s="s",m="m",l="l",xl="xl",max="max";function x(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];switch(e){case s:n=450;break;case m:n=768;break;case l:n=1024;break;case xl:n=1600;break;case max:n=1920;break;default:n=e}var r=function(){var e=!1;if(vw()>n){if(!0===o&&!1===e)return;t(),e=!1}else{if(!0===o&&!0===e)return;i(),e=!0}};document.addEventListener("DOMContentLoaded",r),window.addEventListener("resize",r),window.addEventListener("orientationchange",r)}!function(){if(null===document.querySelector("[data-shiftr-accordion]"))return!1;document.querySelector(".accordion").querySelectorAll(".single").forEach(function(e){e.addEventListener("click",function(t){t.preventDefault(),e.classList.toggle("open")})})}(),function(){if(null!==document.querySelector(".shiftr-cookie-notice")){var e=document.getElementById("shiftr-cookie-accept"),t=document.querySelector(".shiftr-cookie-notice");e.addEventListener("click",function(e){e.preventDefault(),t.classList.add("accepted");var n="shiftr_"+shiftr.name+"_consent";n=(n=n.replace(" ","_")).toLowerCase();document.cookie=n+"="+!0+"; expires=Thu, 18 Dec 2019 12:00:00 UTC; path=/",setTimeout(function(){t.classList.remove("posted")},750),setTimeout(function(){document.body.removeChild(t)},2e3)})}}(),function(){var e=shiftr.form,t="focus",n="success",i="error",s=document.querySelectorAll("input, textarea"),o=["name","text","email"];function r(e,t){var n=document.createElement("span");n.classList.add("validation"),n.innerHTML=t,e.parentElement.appendChild(n),setTimeout(function(){n.classList.add("pop")},400),setTimeout(function(){a(e)},6e3)}function a(e){var t=e.nextElementSibling;t&&"SPAN"==t.nodeName&&(t.classList.remove("pop"),setTimeout(function(){e.parentElement.removeChild(t)},400))}if(s.forEach(function(e){if(o.indexOf(e.type)>=0||"TEXTAREA"==e.nodeName){var s=e.previousElementSibling;e.addEventListener("focus",function(){this.classList.add(t),s.classList.add(t)}),e.addEventListener("blur",function(){this.className="",s.className="",""!=this.value&&(this.checkValidity()?(s.classList.add(n),a(this)):s.classList.add(i))}),e.addEventListener("invalid",function(e){e.preventDefault(),s.classList.add(i),r(this,this.validationMessage)})}else"checkbox"==e.type&&(e.addEventListener("change",function(){e.checked&&a(e)}),e.addEventListener("invalid",function(e){e.preventDefault(),r(this,this.validationMessage)}))}),document.querySelector(".form")){var c=document.querySelector(".form");c.addEventListener("submit",function(t){t.preventDefault(),c.querySelector('input[type="submit"]').classList.add("submitting");var n=new FormData(c),i=new XMLHttpRequest;i.onload=function(){if(this.status>=200&&this.status<400){console.log(this.responseText);var t=JSON.parse(this.responseText);c.querySelector('input[type="submit"]').classList.remove("submitting"),t.sent&&function(t){var n=document.querySelector("form"),i=document.createElement("div"),s=document.createElement("div"),o=document.createElement("span"),r=document.createElement("p"),a=document.createElement("span"),c=document.createElement("button");switch(i.classList.add("submission"),t){case"POST":var d={h:e.error_heading,c:e.error_body};a.innerHTML="ERROR REF: "+t;break;default:var d={h:e.success_heading,c:e.success_body}}o.innerHTML=d.h,r.innerHTML=d.c,c.innerHTML="Close",c.setAttribute("id","close-submission"),c.classList.add("button"),s.appendChild(o),s.appendChild(r),s.appendChild(a),i.appendChild(s),i.appendChild(c),n.appendChild(i),setTimeout(function(){i.classList.add("show")},100),c.addEventListener("click",function(e){e.preventDefault(),clearTimeout(f),l(i,t)});var u=void 0;u=-1==["POST","MAIL"].indexOf(t)?8100:3e4;var f=setTimeout(function(){l(i,t)},u)}(!0)}else console.log("error",i)},i.onerror=function(){alert(e.xhr_error)},i.open("POST",e.ajax),i.send(n)})}function l(e,t){var n;if(!0===t)for(n=0;n<s.length;n++)o.indexOf(s[n].type)>0||"TEXTAREA"==s[n].nodeName?(s[n].value="",s[n].className="",s[n].previousElementSibling.className=""):"checkbox"==s[n].type&&(s[n].checked=!1);setTimeout(function(){e.classList.remove("show")},100)}}(),function(){if(null===document.querySelector("[data-shiftr-gallery]"))return!1;var e=document.createElement("div"),t=document.createElement("img");e.classList.add("gallery-viewer"),e.appendChild(t),document.body.appendChild(e);document.querySelector(".gallery-list");var n=document.querySelectorAll("[data-shiftr-gallery-image]"),i=[];n.forEach(function(n){i.push(n.src),n.addEventListener("click",function(){t.src=n.src,e.classList.contains("display")||(e.classList.add("pre"),setTimeout(function(){e.classList.add("display")},100))})});var s=i.length;e.addEventListener("click",function(){e.classList.remove("display"),setTimeout(function(){e.classList.remove("pre")},600)}),t.addEventListener("click",function(e){e.stopPropagation()}),document.addEventListener("keydown",function(e){var n=e.keyCode||e.which,o=i.indexOf(t.src);if(37==n){if(0==o)return void(t.src=i[s-1]);t.src=i[o-1]}if(39==n){if(o+1==s)return void(t.src=i[0]);t.src=i[o+1]}})}(),function(){var e=document.querySelector(".toggle"),t=document.querySelector(".main-nav"),n=document.querySelectorAll("li.parent"),i=document.querySelector(".header"),s=document.body,o=function(e){e.stopPropagation()},r=function(n){n.stopPropagation(),e.classList.toggle("transition"),s.classList.toggle("no-scroll"),i.offsetHeight>t.offsetHeight?i.setAttribute("style",""):i.style.height="100vh",t.classList.toggle("show")},a=function(){e.classList.remove("transition"),i.setAttribute("style",""),s.classList.remove("no-scroll"),t.classList.remove("show")};x(m,function(){e.removeEventListener("click",r),t.removeEventListener("click",o),window.removeEventListener("click",a)},function(){e.addEventListener("click",r),t.addEventListener("click",o),window.addEventListener("click",a)},!0),x(m,function(){n.forEach(function(e){var t=e.children[0],n=e.children[1],i=void 0;t.addEventListener("mouseover",function(t){t.preventDefault(),clearTimeout(i),!0!==e.classList.contains("show")&&e.classList.add("show")}),t.addEventListener("mouseleave",function(t){i=setTimeout(function(){e.classList.remove("show")},200)}),n.addEventListener("mouseover",function(){clearTimeout(i)}),n.addEventListener("mouseleave",function(){i=setTimeout(function(){e.classList.remove("show")},200)})})});var c=document.getElementById("the_logo"),d=c.getAttribute("viewBox").split(" "),u=d[2]/d[3],f=c.parentElement.offsetHeight/10*u;c.style.width=f+"rem",x(l,function(){var e=document.querySelector(".blog-sidebar"),t=document.querySelector(".blog-layout > div");if(null!==e){e.offsetWidth;var n=e.getBoundingClientRect(),s=t.getBoundingClientRect();window.addEventListener("scroll",function(){var t=window.scrollY;t+e.offsetHeight+i.offsetHeight+20>=s.bottom?(e.classList.add("pause"),e.classList.remove("sticky")):t+i.offsetHeight+20>=s.top?(e.style.width=e.offsetWidth+"px",e.style.top=i.offsetHeight+20+"px",e.style.left=n.left+"px",e.classList.add("sticky"),e.classList.remove("pause")):(e.classList.remove("sticky"),e.setAttribute("style",""))})}}),document.querySelector("[data-shiftr-carousel]")&&document.querySelector(".hero-carousel")&&(document.addEventListener("DOMContentLoaded",function(){setTimeout(function(){document.querySelector(".hero-carousel .content").classList.add("load")},800)}),document.querySelector(".hero-carousel").shiftrCarousel({pause_on_marker_hover:!1,speed:6e3}))}(),function(){function e(e){var t=e.lastIndexOf(" ");return e.slice(0,t)+e.slice(t).replace(" ","&nbsp;")}document.querySelectorAll("[data-orphan]").forEach(function(t){var n=t.innerHTML,i=[];n.indexOf("<br>")>=0&&n.indexOf(" ")>=0?(n.split("<br>").forEach(function(t){i.push(e(t))}),t.innerHTML=i.join("<br>")):n.indexOf(" ")>=0&&(t.innerHTML=e(n))})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9wb2x5ZmlsbC5qcyIsImFuaW1hdGUuanMiLCJjYXJvdXNlbC5qcyIsImZsb2F0ZXIuanMiLCJmb2xsb3dlci5qcyIsImluaXQuanMiLCJhY2NvcmRpb24uanMiLCJjb29raWUuanMiLCJmb3JtX2hhbmRsZXIuanMiLCJnYWxsZXJ5LmpzIiwiZ2VuZXJpYy5qcyIsImxhenlfbG9hZGVyLmpzIiwibWFwc19hcGlfbGF6eV9sb2FkZXIuanMiLCJvcnBoYW4uanMiLCJwb3B1cHMuanMiXSwibmFtZXMiOlsib25fbG9hZCIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJ2dyIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJ2aCIsImlubmVySGVpZ2h0IiwiT2JqZWN0IiwiYXNzaWduIiwiZGVmaW5lUHJvcGVydHkiLCJ2YWx1ZSIsInRhcmdldCIsInZhckFyZ3MiLCJUeXBlRXJyb3IiLCJ0byIsImluZGV4IiwibmV4dFNvdXJjZSIsIm5leHRLZXkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJ3cml0YWJsZSIsImNvbmZpZ3VyYWJsZSIsIkVsZW1lbnQiLCJhbmltYXRlU2Nyb2xsIiwiZHVyYXRpb24iLCJidWZmZXIiLCJxdWVyeVNlbGVjdG9yIiwib2Zmc2V0SGVpZ2h0Iiwic3RhcnRfcG9zIiwicGFnZVlPZmZzZXQiLCJkb2N1bWVudEVsZW1lbnQiLCJzY3JvbGxUb3AiLCJ0YXJnZXRfcG9zIiwidGhpcyIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInRvcCIsImRpc3RhbmNlIiwiY3VycmVudFRpbWUiLCJNYXRoIiwiZWFzZUluT3V0UXVhZCIsInQiLCJiIiwiYyIsImQiLCJhbmltYXRlX3Njcm9sbCIsInZhbCIsImJvZHkiLCJzZXRUaW1lb3V0Iiwic2hpZnRyQ2Fyb3VzZWwiLCJzZXR0aW5ncyIsImRlZmF1bHRzIiwiYXV0b3BsYXkiLCJzcGVlZCIsInRyYW5zaXRpb24iLCJzaG93X21hcmtlcnMiLCJwYXVzZV9vbl9tYXJrZXJfaG92ZXIiLCJpIiwia2V5cyIsIl8iLCJzdGFnZSIsImNoaWxkcmVuIiwicHJvcHMiLCJzdHlsZSIsImhlaWdodCIsInN0YWdlX21hcCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJhcHBlbmRDaGlsZCIsInBhdXNlX2xvb3AiLCJ0cmFuc2l0aW9uX2luX3Byb2dyZXNzIiwiZGF0YXNldCIsInNoaWZ0ckNhcm91c2VsUHJvcCIsInNoaWZ0ckNhcm91c2VsQWN0aXZlIiwibWFya2VyIiwiaW5uZXIiLCJzaGlmdHJDYXJvdXNlbE1hcmtlciIsIm1hcmtlcnMiLCJtYXAiLCJrZXkiLCJpbWFnZXMiLCJwdXNoIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJlbCIsIm5vZGVOYW1lIiwiZ2V0X2ltYWdlcyIsInRoZV9sb29wIiwiYWN0aXZlX3Byb3AiLCJnZXRfYWN0aXZlX3Byb3AiLCJhY3RpdmVfcHJvcF9pZCIsImdldF9hY3RpdmVfcHJvcF9pZCIsInJlbW92ZSIsInpJbmRleCIsIm5leHRfcHJvcCIsIm5leHRFbGVtZW50U2libGluZyIsIm5leHRfcHJvcF9pZCIsInBhcnNlSW50IiwibG9vcGluZyIsInJlc3RhcnQiLCJzdWJfaW1hZ2VzIiwiaGFzQXR0cmlidXRlIiwic3JjIiwidGhlX3Byb3AiLCJzZXRJbnRlcnZhbCIsInNlbGVjdGVkX3Byb3BfaWQiLCJjbGVhckludGVydmFsIiwiY2xlYXJUaW1lb3V0IiwiZmxvYXRlciIsImJvdW5kaW5nIiwicGFyZW50RWxlbWVudCIsImZsb2F0X2J1ZmZlciIsImhlYWRlciIsInN0YXJ0aW5nIiwiZW5kaW5nIiwiZXZlbnRzIiwicmVzaXplIiwib3JpZW50YXRpb25jaGFuZ2UiLCJmbG9hdGVyX3Bvc2l0aW9uIiwiYm91bmRpbmdfcG9zaXRpb24iLCJwb3NpdGlvbl90b3AiLCJzdGFydGluZ19wb2ludCIsImVuZGluZ19wb2ludCIsImZsb2F0X3Bvc2l0aW9uIiwiYWN0aW9uIiwic2Nyb2xsX3Bvc2l0aW9uIiwidHlwZSIsImxlZnQiLCJib3R0b20iLCJzZXRBdHRyaWJ1dGUiLCJ3aWR0aCIsIm9mZnNldFdpZHRoIiwiZm9sbG93ZXIiLCJzZWN0aW9ucyIsInNlY3Rpb25fcG9zaXRpb24iLCJsaW5rcyIsImxpbmsiLCJnZXRBdHRyaWJ1dGUiLCJ0YXJnZXRfcG9pbnQiLCJzZWN0aW9uIiwic2VjdGlvbl90b3AiLCJzZWN0aW9uX2JvdHRvbSIsImlkIiwic3Vic3RyaW5nIiwicyIsIm0iLCJsIiwieGwiLCJtYXgiLCJ4IiwiZm4iLCJjYWxsYmFjayIsInJ1bl9vbmNlIiwicnVuIiwiYWxsb3ciLCJzaW5nbGUiLCJwcmV2ZW50RGVmYXVsdCIsInRvZ2dsZSIsImNvb2tpZV9hY2NlcHRlciIsImdldEVsZW1lbnRCeUlkIiwic2hpZnRyX2Nvb2tpZV9ub3RpY2UiLCJjb29raWVfbmFtZSIsInNoaWZ0ciIsIm5hbWUiLCJyZXBsYWNlIiwidG9Mb3dlckNhc2UiLCJjb29raWUiLCJyZW1vdmVDaGlsZCIsImZvcm0iLCJ2YyIsImlucHV0cyIsImxpc3RlZCIsImRvX3ZhbGlkYXRpb24iLCJpbnB1dCIsIm1lc3NhZ2UiLCJpbm5lckhUTUwiLCJjbGVhcl92YWxpZGF0aW9uIiwibmV4dEVsIiwiaW5kZXhPZiIsInByZXZpb3VzRWxlbWVudFNpYmxpbmciLCJjbGFzc05hbWUiLCJjaGVja1ZhbGlkaXR5IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJjaGVja2VkIiwiZGF0YSIsIkZvcm1EYXRhIiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJvbmxvYWQiLCJzdGF0dXMiLCJjb25zb2xlIiwibG9nIiwicmVzcG9uc2VUZXh0IiwiX2RhdGEiLCJKU09OIiwicGFyc2UiLCJzZW50Iiwid3JhcCIsImhlYWRpbmciLCJjb250ZW50IiwiZXJyb3JfcmVmIiwiY2xvc2VyIiwiaCIsImVycm9yX2hlYWRpbmciLCJlcnJvcl9ib2R5Iiwic3VjY2Vzc19oZWFkaW5nIiwic3VjY2Vzc19ib2R5IiwiYXV0b19jbGVhciIsImNsZWFyX3N1Ym1pc3Npb24iLCJhdXRvX2NsZWFyX2RlbGF5IiwiZG9fc3VibWlzc2lvbiIsIm9uZXJyb3IiLCJhbGVydCIsInhocl9lcnJvciIsIm9wZW4iLCJhamF4Iiwic2VuZCIsInZpZXdlciIsInZpZXdlcl9pbWciLCJnYWxsZXJ5X2ltYWdlcyIsInNvdXJjZXMiLCJpbWFnZSIsImNvbnRhaW5zIiwiY291bnRlciIsInN0b3BQcm9wYWdhdGlvbiIsImtleUNvZGUiLCJ3aGljaCIsImN1cnJlbnRfcG9zaXRpb24iLCJuYXYiLCJzdWJfbmF2cyIsInN0b3AiLCJ0b2dnbGVfbWVudSIsInRvZ2dsZV93aW5kb3ciLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic3ViIiwibWVudSIsInJlbW92ZV9vcGVuIiwidGhlX2xvZ28iLCJ2YWx1ZXMiLCJzcGxpdCIsInJhdGlvIiwic2lkZWJhciIsImJsb2dfbGF5b3V0Iiwic2lkZWJhcl9wb3MiLCJibG9nX2xheW91dF9wb3MiLCJjdXJyX3BvcyIsInNjcm9sbFkiLCJub19vcnBoYW4iLCJzcGFjZSIsImxhc3RJbmRleE9mIiwic2xpY2UiLCJuZXdOb2RlIiwibm9kZSIsImpvaW4iXSwibWFwcGluZ3MiOiJBQUFBLGFBa21CQSxTQUFTQSxVQUNJQyxVQUFVQyxPQUFTLFFBQXNCQyxJQUFqQkYsVUFBVSxJQUFtQkEsVUFBVSxHQUd4RUcsU0FBU0MsaUJBQWlCLG1CQUFvQixTQUFVQyxNQVU1RCxTQUFTQyxLQUNMLE9BQU9DLE9BQU9DLFdBR2xCLFNBQVNDLEtBQ0wsT0FBT0YsT0FBT0csWUExbUJVLG1CQUFqQkMsT0FBT0MsUUFHaEJELE9BQU9FLGVBQWVGLE9BQVEsU0FBVSxDQUN0Q0csTUFBTyxTQUFnQkMsRUFBUUMsR0FJN0IsR0FBYyxNQUFWRCxFQUVGLE1BQU0sSUFBSUUsVUFBVSw4Q0FLdEIsSUFGQSxJQUFJQyxFQUFLUCxPQUFPSSxHQUVQSSxFQUFRLEVBQUdBLEVBQVFuQixVQUFVQyxPQUFRa0IsSUFBUyxDQUNyRCxJQUFJ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VSxHQUdWcEQsRUFBUXJCLFFBQVEsU0FBVyxHQUFLcUIsRUFBUXJCLFFBQVEsTUFBUSxHQUN4Q3FCLEVBQVF3QyxNQUFNLFFBRXBCNUosUUFBUSxTQUFVeUssR0FHeEJELEVBQVExSyxLQUFLc0ssRUFBVUssTUFJM0J4SyxFQUFHMkYsVUFBWTRFLEVBQVFFLEtBQUssU0FDckJ0RCxFQUFRckIsUUFBUSxNQUFRLElBRy9COUYsRUFBRzJGLFVBQVl3RSxFQUFVaEQsTUFqQ3JDIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG4vKiAgLy8vLyAgLS18ICAgIFBvbHlmaWxsc1xuXG4gICAgKiBcbiovXG5cbi8vIE9iamVjdC5hc3NpZ25cblxuLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2Fzc2lnblxuXG5pZiAodHlwZW9mIE9iamVjdC5hc3NpZ24gIT0gJ2Z1bmN0aW9uJykge1xuXG4gIC8vIE11c3QgYmUgd3JpdGFibGU6IHRydWUsIGVudW1lcmFibGU6IGZhbHNlLCBjb25maWd1cmFibGU6IHRydWVcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE9iamVjdCwgXCJhc3NpZ25cIiwge1xuICAgIHZhbHVlOiBmdW5jdGlvbiBhc3NpZ24odGFyZ2V0LCB2YXJBcmdzKSB7XG4gICAgICAvLyAubGVuZ3RoIG9mIGZ1bmN0aW9uIGlzIDJcbiAgICAgICd1c2Ugc3RyaWN0JztcblxuICAgICAgaWYgKHRhcmdldCA9PSBudWxsKSB7XG4gICAgICAgIC8vIFR5cGVFcnJvciBpZiB1bmRlZmluZWQgb3IgbnVsbFxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY29udmVydCB1bmRlZmluZWQgb3IgbnVsbCB0byBvYmplY3QnKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHRvID0gT2JqZWN0KHRhcmdldCk7XG5cbiAgICAgIGZvciAodmFyIGluZGV4ID0gMTsgaW5kZXggPCBhcmd1bWVudHMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgIHZhciBuZXh0U291cmNlID0gYXJndW1lbnRzW2luZGV4XTtcblxuICAgICAgICBpZiAobmV4dFNvdXJjZSAhPSBudWxsKSB7XG4gICAgICAgICAgLy8gU2tpcCBvdmVyIGlmIHVuZGVmaW5lZCBvciBudWxsXG4gICAgICAgICAgZm9yICh2YXIgbmV4dEtleSBpbiBuZXh0U291cmNlKSB7XG4gICAgICAgICAgICAvLyBBdm9pZCBidWdzIHdoZW4gaGFzT3duUHJvcGVydHkgaXMgc2hhZG93ZWRcbiAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobmV4dFNvdXJjZSwgbmV4dEtleSkpIHtcbiAgICAgICAgICAgICAgdG9bbmV4dEtleV0gPSBuZXh0U291cmNlW25leHRLZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRvO1xuICAgIH0sXG4gICAgd3JpdGFibGU6IHRydWUsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlXG4gIH0pO1xufSIsIid1c2Ugc3RyaWN0JztcblxuLyogIC8vLy8gIC0tfCAgICBFbGVtZW50LnByb3RvdHlwZS5hbmltYXRlU2Nyb2xsKCBkdXJhdGlvbiwgYnVmZmVyIClcblxuICAgICogU2Nyb2xsIGRvY3VtZW50IHRvIGVsZW1lbnRcbiovXG5cbkVsZW1lbnQucHJvdG90eXBlLmFuaW1hdGVTY3JvbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGR1cmF0aW9uID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAxMDAwO1xuICAgIHZhciBidWZmZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDA7XG5cblxuICAgIC8vIFVwZGF0ZSBidWZmZXIgdG8gaW5jbHVkZSBoZWlnaHQgb2YgaGVhZGVyXG4gICAgYnVmZmVyICs9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXInKS5vZmZzZXRIZWlnaHQ7XG5cbiAgICB2YXIgcnVuID0gdHJ1ZTtcblxuICAgIC8vIFNldHRpbmdzXG4gICAgdmFyIHN0YXJ0X3BvcyA9IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wLFxuICAgICAgICB0YXJnZXRfcG9zID0gdGhpcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgKyBzdGFydF9wb3MsXG4gICAgICAgIGRpc3RhbmNlID0gdGFyZ2V0X3BvcyAtIHN0YXJ0X3BvcyxcbiAgICAgICAgZGlzdGFuY2UgPSBkaXN0YW5jZSAtIGJ1ZmZlcixcbiAgICAgICAgY3VycmVudFRpbWUgPSAwLFxuICAgICAgICBpbmNyZW1lbnQgPSAxNi42NjtcblxuICAgIC8vIERvIHRoZSBhbmltYXRpb25cbiAgICB2YXIgYW5pbWF0ZV9zY3JvbGwgPSBmdW5jdGlvbiBhbmltYXRlX3Njcm9sbCgpIHtcblxuICAgICAgICBpZiAocnVuID09PSBmYWxzZSkgcmV0dXJuO1xuXG4gICAgICAgIGN1cnJlbnRUaW1lICs9IGluY3JlbWVudDtcblxuICAgICAgICB2YXIgdmFsID0gTWF0aC5lYXNlSW5PdXRRdWFkKGN1cnJlbnRUaW1lLCBzdGFydF9wb3MsIGRpc3RhbmNlLCBkdXJhdGlvbik7XG5cbiAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCA9IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wID0gdmFsO1xuXG4gICAgICAgIGlmIChjdXJyZW50VGltZSA8IGR1cmF0aW9uKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGFuaW1hdGVfc2Nyb2xsLCBpbmNyZW1lbnQpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIEVhc2luZy4uLlxuICAgIE1hdGguZWFzZUluT3V0UXVhZCA9IGZ1bmN0aW9uICh0LCBiLCBjLCBkKSB7XG5cbiAgICAgICAgdCAvPSBkIC8gMjtcblxuICAgICAgICBpZiAodCA8IDEpIHJldHVybiBjIC8gMiAqIHQgKiB0ICsgYjtcblxuICAgICAgICB0LS07XG5cbiAgICAgICAgcmV0dXJuIC1jIC8gMiAqICh0ICogKHQgLSAyKSAtIDEpICsgYjtcbiAgICB9O1xuXG4gICAgLy8gRG8gaW5pdGlhbCBpdGVyYXRpb25cbiAgICBhbmltYXRlX3Njcm9sbCgpO1xufTsiLCIndXNlIHN0cmljdCc7XG5cbi8qICAvLy8vICAtLXwgICAgRWxlbWVudC5wcm90b3R5cGUuY2Fyb3VzZWwoIHNldHRpbmdzID0gT2JqZWN0IClcblxuICAgIEBzaW5jZSAxLjBcblxuICAgIEBwb2x5ZmlsbHM6IE9iamVjdC5hc3NpZ25cbiovXG5cbkVsZW1lbnQucHJvdG90eXBlLnNoaWZ0ckNhcm91c2VsID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZXR0aW5ncyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG5cblxuICAgIC8vIFRoZSBkZWZhdWx0IHNldHRpbmdzXG4gICAgdmFyIGRlZmF1bHRzID0ge1xuICAgICAgICBhdXRvcGxheTogdHJ1ZSxcbiAgICAgICAgc3BlZWQ6IDQwMDAsXG4gICAgICAgIHRyYW5zaXRpb246IDgwMCxcbiAgICAgICAgc2hvd19tYXJrZXJzOiB0cnVlLFxuICAgICAgICBwYXVzZV9vbl9tYXJrZXJfaG92ZXI6IHRydWVcbiAgICB9O1xuXG4gICAgdmFyIGkgPSAwO1xuXG4gICAgLy8gQXNzaWduIHNldHRpbmdzIGFzIGRlZmF1bHRzIGlmIHNldHRpbmdzIGFyZSBub3Qgc2V0XG4gICAgaWYgKE9iamVjdC5rZXlzKHNldHRpbmdzKS5sZW5ndGggPT0gMCkgc2V0dGluZ3MgPSBkZWZhdWx0cztcblxuICAgIC8vIE92ZXJyaWRlIHRoZSBkZWZhdWx0cyB3aXRoIGFueSBkZWZpbmVkIHNldHRpbmdzXG4gICAgdmFyIF8gPSBPYmplY3QuYXNzaWduKGRlZmF1bHRzLCBzZXR0aW5ncyk7XG5cbiAgICAvLyBUaGUgbWFpbiBjYXJvdXNlbCBlbGVtZW50c1xuICAgIHZhciBjYXJvdXNlbCA9IHRoaXMsXG4gICAgICAgIHN0YWdlID0gdGhpcy5jaGlsZHJlblswXSxcbiAgICAgICAgcHJvcHMgPSB0aGlzLmNoaWxkcmVuWzBdLmNoaWxkcmVuO1xuXG4gICAgLy8gU2V0IHRoZSBzdGFnZSBoaWVnaHQgYmFzZWQgb2ZmIG9mZnNldEhlaWdodCBvZiBmaXJzdCBwcm9wXG4gICAgc3RhZ2Uuc3R5bGUuaGVpZ2h0ID0gcHJvcHNbMF0ub2Zmc2V0SGVpZ2h0ICsgJ3B4JztcblxuICAgIC8vIENyZWF0ZSB0aGUgbmF2aWdhdGlvblxuICAgIHZhciBzdGFnZV9tYXAgPSB2b2lkIDA7XG4gICAgaWYgKHNob3dfbWFya2VycygpKSB7XG4gICAgICAgIHN0YWdlX21hcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBzdGFnZV9tYXAuY2xhc3NMaXN0LmFkZCgnc3RhZ2UtbWFwJyk7XG5cbiAgICAgICAgY2Fyb3VzZWwuYXBwZW5kQ2hpbGQoc3RhZ2VfbWFwKTtcbiAgICB9XG5cbiAgICAvLyBUaGUgcGF1c2UgdmFyaWFibGVcbiAgICB2YXIgcGF1c2VfbG9vcCA9IGZhbHNlLFxuICAgICAgICB0cmFuc2l0aW9uX2luX3Byb2dyZXNzID0gZmFsc2U7XG5cbiAgICAvLyBJbml0IHRoZSBDYXJvdXNlbFxuICAgIGZvciAoaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgIC8vIE1haW4gQ2Fyb3VzZWwgZGF0YVxuICAgICAgICBwcm9wc1tpXS5kYXRhc2V0LnNoaWZ0ckNhcm91c2VsUHJvcCA9IGk7XG4gICAgICAgIHByb3BzW2ldLmRhdGFzZXQuc2hpZnRyQ2Fyb3VzZWxBY3RpdmUgPSAnZmFsc2UnO1xuXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgbWFya2Vyc1xuICAgICAgICBpZiAoc2hvd19tYXJrZXJzKCkpIHtcbiAgICAgICAgICAgIHZhciBtYXJrZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSxcbiAgICAgICAgICAgICAgICBpbm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcblxuICAgICAgICAgICAgbWFya2VyLmRhdGFzZXQuc2hpZnRyQ2Fyb3VzZWxNYXJrZXIgPSBpO1xuXG4gICAgICAgICAgICAvLyBBZGQgbWFya2VyIHRvIG5hdmlnYXRpb24gZWxlbWVudFxuICAgICAgICAgICAgbWFya2VyLmFwcGVuZENoaWxkKGlubmVyKTtcbiAgICAgICAgICAgIHN0YWdlX21hcC5hcHBlbmRDaGlsZChtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gQXNzaWduIG1hcmtlcnMgYWZ0ZXIgY3JlYXRpb25cbiAgICB2YXIgbWFya2VycyA9IHZvaWQgMDtcbiAgICBpZiAoc2hvd19tYXJrZXJzKCkpIHtcbiAgICAgICAgbWFya2VycyA9IE9iamVjdC5rZXlzKHN0YWdlX21hcC5jaGlsZHJlbikubWFwKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIHJldHVybiBzdGFnZV9tYXAuY2hpbGRyZW5ba2V5XTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gU2V0LXVwIGZpcnN0IHByb3AgYW5kIG1hcmtlclxuICAgIHByb3BzWzBdLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgIHByb3BzWzBdLmRhdGFzZXQuc2hpZnRyQ2Fyb3VzZWxBY3RpdmUgPSAndHJ1ZSc7XG5cbiAgICBpZiAoc2hvd19tYXJrZXJzKCkpIHtcbiAgICAgICAgbWFya2Vyc1swXS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICB9XG5cbiAgICAvLyBHZXQgYWxsIGVsZW1lbnRzIGluIHRoZSBwcm9wXG4gICAgdmFyIGltYWdlcyA9IFtdO1xuICAgIGZvciAoaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgIGltYWdlcy5wdXNoKFtdKTtcblxuICAgICAgICB2YXIgcHJvcF9lbGVtZW50cyA9IHByb3BzW2ldLnF1ZXJ5U2VsZWN0b3JBbGwoJyonKTtcblxuICAgICAgICBwcm9wX2VsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7XG5cbiAgICAgICAgICAgIGlmIChlbC5ub2RlTmFtZSA9PSAnSU1HJykge1xuICAgICAgICAgICAgICAgIGltYWdlc1tpXS5wdXNoKGVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gR2V0IHRoZSBmaXJzdCBhbmQgc2Vjb25kIHByb3AgaW1hZ2VzXG4gICAgaWYgKGltYWdlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGdldF9pbWFnZXMoaW1hZ2VzWzBdKTtcbiAgICB9XG5cbiAgICBpZiAoaW1hZ2VzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZ2V0X2ltYWdlcyhpbWFnZXNbMV0pO1xuICAgICAgICB9LCBfLnNwZWVkIC8gMik7XG4gICAgfVxuXG4gICAgLy8gVGhlIG1haW4gbG9vcFxuICAgIHZhciB0aGVfbG9vcCA9IGZ1bmN0aW9uIHRoZV9sb29wKCkge1xuXG4gICAgICAgIC8vIFBhdXNlIG9uIGhvdmVyXG4gICAgICAgIGlmIChwYXVzZV9sb29wKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgLy8gRWFybHkgZXhpdCBpZiB0cmFuc2l0aW9uIGlzIGluIHByb2dyZXNzXG4gICAgICAgIGlmICh0cmFuc2l0aW9uX2luX3Byb2dyZXNzKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgLy8gRGVmaW5lIHRyYW5zaXRpb24gc3RhcnRcbiAgICAgICAgdHJhbnNpdGlvbl9pbl9wcm9ncmVzcyA9IHRydWU7XG5cbiAgICAgICAgLy8gR2V0IGluZm8gb2YgYWN0aXZlIHByb3BcbiAgICAgICAgdmFyIGFjdGl2ZV9wcm9wID0gZ2V0X2FjdGl2ZV9wcm9wKCksXG4gICAgICAgICAgICBhY3RpdmVfcHJvcF9pZCA9IGdldF9hY3RpdmVfcHJvcF9pZChhY3RpdmVfcHJvcCk7XG5cbiAgICAgICAgLy8gUmVtb3ZlIGFjdGl2ZSBtYXJrZXJcbiAgICAgICAgaWYgKHNob3dfbWFya2VycygpKSB7XG4gICAgICAgICAgICBtYXJrZXJzW2FjdGl2ZV9wcm9wX2lkXS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIG9uIHRoZSBsYXN0IHByb3BcbiAgICAgICAgaWYgKGFjdGl2ZV9wcm9wX2lkID09IHByb3BzLmxlbmd0aCAtIDEpIHtcblxuICAgICAgICAgICAgLy8gU2V0IG5ldyBwcm9wXG4gICAgICAgICAgICBwcm9wc1swXS5zdHlsZS56SW5kZXggPSAxNTA7XG4gICAgICAgICAgICBwcm9wc1swXS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIHByb3BzWzBdLmRhdGFzZXQuc2hpZnRyQ2Fyb3VzZWxBY3RpdmUgPSAndHJ1ZSc7XG5cbiAgICAgICAgICAgIGlmIChzaG93X21hcmtlcnMoKSkge1xuICAgICAgICAgICAgICAgIG1hcmtlcnNbMF0uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHByb3BzWzBdLnN0eWxlLnpJbmRleCA9ICcnO1xuICAgICAgICAgICAgfSwgXy50cmFuc2l0aW9uKTtcblxuICAgICAgICAgICAgLy8gU3RhbmRhcmQgc3dpdGNoXG4gICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgIHZhciBuZXh0X3Byb3AgPSBhY3RpdmVfcHJvcC5uZXh0RWxlbWVudFNpYmxpbmcsXG4gICAgICAgICAgICAgICAgbmV4dF9wcm9wX2lkID0gcGFyc2VJbnQobmV4dF9wcm9wLmRhdGFzZXQuc2hpZnRyQ2Fyb3VzZWxQcm9wLCAxMCk7XG5cbiAgICAgICAgICAgIG5leHRfcHJvcC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIG5leHRfcHJvcC5kYXRhc2V0LnNoaWZ0ckNhcm91c2VsQWN0aXZlID0gJ3RydWUnO1xuXG4gICAgICAgICAgICBpZiAoc2hvd19tYXJrZXJzKCkpIHtcbiAgICAgICAgICAgICAgICBtYXJrZXJzW25leHRfcHJvcF9pZF0uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChhY3RpdmVfcHJvcF9pZCA9PSBwcm9wcy5sZW5ndGggLSAyKSB7XG4gICAgICAgICAgICAgICAgLy8gQWxsIHByb3AgaW1hZ2VzIHNob3VsZCBoYXZlIGxvYWRlZC4uLlxuICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgIGlmIChpbWFnZXNbbmV4dF9wcm9wX2lkICsgMV0pIHtcbiAgICAgICAgICAgICAgICAgICAgZ2V0X2ltYWdlcyhpbWFnZXNbbmV4dF9wcm9wX2lkICsgMV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJlbW92ZSBhY3RpdmUgcHJvcFxuICAgICAgICBhY3RpdmVfcHJvcC5kYXRhc2V0LnNoaWZ0ckNhcm91c2VsQWN0aXZlID0gJ2ZhbHNlJztcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBhY3RpdmVfcHJvcC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcblxuICAgICAgICAgICAgLy8gRGVmaW5lIHRyYW5zaXRpb24gZW5kXG4gICAgICAgICAgICB0cmFuc2l0aW9uX2luX3Byb2dyZXNzID0gZmFsc2U7XG4gICAgICAgIH0sIF8udHJhbnNpdGlvbik7XG4gICAgfTtcblxuICAgIHZhciBsb29waW5nID0gdm9pZCAwLFxuICAgICAgICByZXN0YXJ0ID0gdm9pZCAwO1xuXG4gICAgaWYgKF8uYXV0b3BsYXkpIHtcbiAgICAgICAgbG9vcGluZyA9IHNldEludGVydmFsKHRoZV9sb29wLCBfLnNwZWVkKTtcbiAgICB9XG5cbiAgICBpZiAoc2hvd19tYXJrZXJzKCkpIHtcblxuICAgICAgICBtYXJrZXJzLmZvckVhY2goZnVuY3Rpb24gKG1hcmtlcikge1xuXG4gICAgICAgICAgICBtYXJrZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBFYXJseSBleGl0IGlmIHRyYW5zaXRpb24gaXMgaW4gcHJvZ3Jlc3NcbiAgICAgICAgICAgICAgICBpZiAodHJhbnNpdGlvbl9pbl9wcm9ncmVzcykge1xuICAgICAgICAgICAgICAgICAgICBwYXVzZV9sb29wID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBhY3RpdmVfcHJvcCBhbmQgYWN0aXZlX3Byb3BfaWQgYXJlIGNvcmVjdFxuICAgICAgICAgICAgICAgIHZhciBhY3RpdmVfcHJvcCA9IGdldF9hY3RpdmVfcHJvcCgpLFxuICAgICAgICAgICAgICAgICAgICBhY3RpdmVfcHJvcF9pZCA9IGdldF9hY3RpdmVfcHJvcF9pZChhY3RpdmVfcHJvcCk7XG5cbiAgICAgICAgICAgICAgICAvLyBJc3N1ZXMgd2l0aCBzZWxlY3RlZF9wcm9wXG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkX3Byb3AgPSBwcm9wc1ttYXJrZXIuZGF0YXNldC5zaGlmdHJDYXJvdXNlbE1hcmtlcl0sXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkX3Byb3BfaWQgPSBtYXJrZXIuZGF0YXNldC5zaGlmdHJDYXJvdXNlbE1hcmtlcjtcblxuICAgICAgICAgICAgICAgIC8vIFR1cm4gb2ZmIHBhdXNlIHRvIGFsbG93IGNoYW5nZVxuICAgICAgICAgICAgICAgIHBhdXNlX2xvb3AgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgIC8vIFN0b3AgY3VycmVudCBhY3Rpb25zXG4gICAgICAgICAgICAgICAgaWYgKF8uYXV0b3BsYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChsb29waW5nKTtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHJlc3RhcnQpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChhY3RpdmVfcHJvcF9pZCAhPSBzZWxlY3RlZF9wcm9wX2lkKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gRGVmaW5lIHRyYW5zaXRpb24gc3RhcnRcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbl9pbl9wcm9ncmVzcyA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIGFjdGl2ZSBwcm9wc1xuICAgICAgICAgICAgICAgICAgICBtYXJrZXJzW2FjdGl2ZV9wcm9wX2lkXS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBTZXQgcHJvcFxuICAgICAgICAgICAgICAgICAgICBwcm9wc1tzZWxlY3RlZF9wcm9wX2lkXS5zdHlsZS56SW5kZXggPSAxNTA7XG4gICAgICAgICAgICAgICAgICAgIHByb3BzW3NlbGVjdGVkX3Byb3BfaWRdLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICBwcm9wc1tzZWxlY3RlZF9wcm9wX2lkXS5kYXRhc2V0LnNoaWZ0ckNhcm91c2VsQWN0aXZlID0gJ3RydWUnO1xuXG4gICAgICAgICAgICAgICAgICAgIG1hcmtlcnNbc2VsZWN0ZWRfcHJvcF9pZF0uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gQ29udGludWUgcmVtb3ZlXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZV9wcm9wLmRhdGFzZXQuc2hpZnRyQ2Fyb3VzZWxBY3RpdmUgPSAnZmFsc2UnO1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZV9wcm9wLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvcHNbc2VsZWN0ZWRfcHJvcF9pZF0uc3R5bGUuekluZGV4ID0gJyc7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERlZmluZSB0cmFuc2l0aW9uIGVuZFxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbl9pbl9wcm9ncmVzcyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9LCBfLnRyYW5zaXRpb24pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFJlc3RhcnQgbG9vcCwgaWYgcGF1c2VkXG4gICAgICAgICAgICAgICAgaWYgKF8uYXV0b3BsYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdGFydCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9vcGluZyA9IHNldEludGVydmFsKHRoZV9sb29wLCBfLnNwZWVkKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgXy5zcGVlZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIG1hcmtlci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAvLyB3YXMgdXNpbmcgYWN0aXZlX3Byb3AgaW5zdGVhZCBvZiBzZWxlY3RlZF9wcm9wXG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkX3Byb3AgPSBwcm9wc1ttYXJrZXIuZGF0YXNldC5zaGlmdHJDYXJvdXNlbE1hcmtlcl0sXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkX3Byb3BfaWQgPSBtYXJrZXIuZGF0YXNldC5zaGlmdHJDYXJvdXNlbE1hcmtlcjtcblxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coIHNlbGVjdGVkX3Byb3AgKTtcblxuICAgICAgICAgICAgICAgIGlmIChfLnBhdXNlX29uX21hcmtlcl9ob3Zlcikge1xuICAgICAgICAgICAgICAgICAgICBwYXVzZV9sb29wID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBNYWtlIHN1cmUgYWxsIHByb3AgaW1hZ2VzIGhhdmUgbG9hZGVkXG4gICAgICAgICAgICAgICAgaWYgKGltYWdlc1tzZWxlY3RlZF9wcm9wX2lkXSkge1xuICAgICAgICAgICAgICAgICAgICBnZXRfaW1hZ2VzKGltYWdlc1tzZWxlY3RlZF9wcm9wX2lkXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIG1hcmtlci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgcGF1c2VfbG9vcCA9IGZhbHNlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIEdldCBpbWFnZXNcbiAgICBmdW5jdGlvbiBnZXRfaW1hZ2VzKHN1Yl9pbWFnZXMpIHtcblxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgc3ViX2ltYWdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHN1Yl9pbWFnZXNbaV0uaGFzQXR0cmlidXRlKCdzcmMnKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBzdWJfaW1hZ2VzW2ldLnNyYyA9IHN1Yl9pbWFnZXNbaV0uZGF0YXNldC5zcmM7XG4gICAgICAgICAgICAgICAgc3ViX2ltYWdlc1tpXS5kYXRhc2V0LnNyYyA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gR2V0IGRhdGEgb24gdGhlIGFjdGl2ZSBwcm9wXG4gICAgZnVuY3Rpb24gZ2V0X2FjdGl2ZV9wcm9wKCkge1xuXG4gICAgICAgIHZhciB0aGVfcHJvcCA9IHZvaWQgMDtcblxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChwcm9wc1tpXS5kYXRhc2V0LnNoaWZ0ckNhcm91c2VsQWN0aXZlID09ICd0cnVlJykge1xuICAgICAgICAgICAgICAgIHRoZV9wcm9wID0gcHJvcHNbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhlX3Byb3A7XG4gICAgfVxuXG4gICAgLy8gR2V0IGFjdGl2ZSBwcm9wIGlkXG4gICAgZnVuY3Rpb24gZ2V0X2FjdGl2ZV9wcm9wX2lkKHRoZV9wcm9wKSB7XG4gICAgICAgIHJldHVybiBwYXJzZUludCh0aGVfcHJvcC5kYXRhc2V0LnNoaWZ0ckNhcm91c2VsUHJvcCwgMTApO1xuICAgIH1cblxuICAgIC8vIFRvZ2dsZSBmb3IgbWFya2Vyc1xuICAgIGZ1bmN0aW9uIHNob3dfbWFya2VycygpIHtcbiAgICAgICAgaWYgKF8uc2hvd19tYXJrZXJzKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbn07IiwiJ3VzZSBzdHJpY3QnO1xuXG4vKiAgRWxlbWVudC5wcm90b3R5cGUuZmxvYXRlclxuICpcbiAqICBAc2luY2UgMS4wXG4gKlxuICogIEBwYXJhbSBzZXR0aW5ncyBPYmplY3QgVGhlIHNldHRpbmdzIGZvciB0aGUgZmxvYXRlciB0YXJnZXQgZWxlbWVudFxuICogIEBwb2x5ZmlsbCBPYmplY3QuYXNzaWduXG4gKlxuICovXG5cbkVsZW1lbnQucHJvdG90eXBlLmZsb2F0ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNldHRpbmdzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcblxuXG4gICAgLy8gVGhlIGRlZmF1bHQgc2V0dGluZ3NcbiAgICB2YXIgZGVmYXVsdHMgPSB7XG4gICAgICAgIGJvdW5kaW5nOiB0aGlzLnBhcmVudEVsZW1lbnQsIC8vIEVsZW1lbnRcbiAgICAgICAgZmxvYXRfYnVmZmVyOiAwLCAvLyBJbnRlZ2FyXG4gICAgICAgIGhlYWRlcjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcicpLCAvLyBFbGVtZW50fG51bGxcbiAgICAgICAgc3RhcnRpbmc6IG51bGwsIC8vIG51bGx8RWxlbWVudFxuICAgICAgICBlbmRpbmc6IG51bGwsXG4gICAgICAgIGV2ZW50czoge1xuICAgICAgICAgICAgcmVzaXplOiB3aW5kb3csXG4gICAgICAgICAgICBvcmllbnRhdGlvbmNoYW5nZTogd2luZG93XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gQXNzaWduIHNldHRpbmdzIGFzIGRlZmF1bHRzIGlmIHNldHRpbmdzIGFyZSBub3Qgc2V0XG4gICAgaWYgKE9iamVjdC5rZXlzKHNldHRpbmdzKS5sZW5ndGggPT0gMCkgc2V0dGluZ3MgPSBkZWZhdWx0cztcblxuICAgIC8vIE92ZXJyaWRlIHRoZSBkZWZhdWx0cyB3aXRoIGFueSBkZWZpbmVkIHNldHRpbmdzXG4gICAgdmFyIF8gPSBPYmplY3QuYXNzaWduKGRlZmF1bHRzLCBzZXR0aW5ncyk7XG5cbiAgICAvLyBHbG9iYWwgdmFyaWFibGVzXG4gICAgdmFyIGZsb2F0ZXIgPSB0aGlzLFxuICAgICAgICBib3VuZGluZyA9IF8uYm91bmRpbmcsXG4gICAgICAgIGZsb2F0ZXJfcG9zaXRpb24sXG4gICAgICAgIGZsb2F0ZXJfbGVmdCxcbiAgICAgICAgYm91bmRpbmdfcG9zaXRpb24sXG4gICAgICAgIGJvdW5kaW5nX3RvcCxcbiAgICAgICAgYm91bmRpbmdfYm90dG9tLFxuICAgICAgICBmbG9hdF9wb3NpdGlvbiA9IF8uZmxvYXRfYnVmZmVyLFxuICAgICAgICBwb3NpdGlvbl90b3AsXG4gICAgICAgIHBvc2l0aW9uX2JvdHRvbSxcbiAgICAgICAgc3RhcnRpbmdfcG9pbnQsXG4gICAgICAgIGVuZGluZ19wb2ludDtcblxuICAgIC8vIENoZWNrIGlmIGhlYWRlciBoZWlnaHQgc2hvdWxkIGJlIGluY2x1ZGVkIGluIGZsb2F0X3Bvc2l0aW9uXG4gICAgaWYgKF8uaGVhZGVyKSBmbG9hdF9wb3NpdGlvbiArPSBfLmhlYWRlci5vZmZzZXRIZWlnaHQ7XG5cbiAgICAvLyBUaGUgY29yZSBmdW5jdGlvbiB0aGF0IGV2ZW50IGxpc3RlbmVycyBhcmUgYXBwZW5kZWQgdG9cbiAgICB2YXIgYWN0aW9uID0gZnVuY3Rpb24gYWN0aW9uKGUpIHtcblxuICAgICAgICAvLyBHZXQgdGhlIGN1cnJlbnQgc2Nyb2xsIHBvc2l0aW9uXG4gICAgICAgIHZhciBzY3JvbGxfcG9zaXRpb24gPSB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDtcblxuICAgICAgICAvLyBXZSBkbyBub3Qgd2FudCB0byByZWRlZmluZSB0aGUgZm9sbG93aW5nIG9uIGEgc2Nyb2xsXG4gICAgICAgIGlmIChlLnR5cGUgIT0gJ3Njcm9sbCcpIHtcblxuICAgICAgICAgICAgZmxvYXRlcl9wb3NpdGlvbiA9IGZsb2F0ZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICBib3VuZGluZ19wb3NpdGlvbiA9IGJvdW5kaW5nLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgICAgICAgICBmbG9hdGVyX2xlZnQgPSBmbG9hdGVyX3Bvc2l0aW9uLmxlZnQ7XG5cbiAgICAgICAgICAgIGlmIChfLnN0YXJ0aW5nICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgc3RhcnRpbmdfcG9pbnQgPSBfLnN0YXJ0aW5nLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCArIHNjcm9sbF9wb3NpdGlvbjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc3RhcnRpbmdfcG9pbnQgPSBib3VuZGluZ19wb3NpdGlvbi50b3AgKyBzY3JvbGxfcG9zaXRpb247XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChfLmVuZGluZyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGVuZGluZ19wb2ludCA9IF8uZW5kaW5nLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbSArIHNjcm9sbF9wb3NpdGlvbjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZW5kaW5nX3BvaW50ID0gYm91bmRpbmdfcG9zaXRpb24uYm90dG9tICsgc2Nyb2xsX3Bvc2l0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2V0dXAgdGhlIHN0YXJ0aW5nIGFuZCBlbmRpbmcgcG9pbnRzIGluY2x1ZGluZyBidWZmZXIgYXJlYXNcbiAgICAgICAgcG9zaXRpb25fdG9wID0gc2Nyb2xsX3Bvc2l0aW9uICsgZmxvYXRfcG9zaXRpb247XG4gICAgICAgIHBvc2l0aW9uX2JvdHRvbSA9IHNjcm9sbF9wb3NpdGlvbiArIGZsb2F0X3Bvc2l0aW9uICsgZmxvYXRlci5vZmZzZXRIZWlnaHQ7XG5cbiAgICAgICAgLy8gRGVjaWRlIHdoYXQgc3RhdGUgdGhlIGZsb2F0ZXIgc2hvdWxkIGJlIGluIGJhc2VkIG9uIHNjcm9sbCBwb3NpdGlvbi4uLlxuICAgICAgICBpZiAocG9zaXRpb25fYm90dG9tID49IGVuZGluZ19wb2ludCkge1xuICAgICAgICAgICAgZmxvYXRlci5jbGFzc0xpc3QuYWRkKCdwYXVzZScpO1xuICAgICAgICAgICAgZmxvYXRlci5jbGFzc0xpc3QucmVtb3ZlKCdzdGlja3knKTtcbiAgICAgICAgICAgIGZsb2F0ZXIuc2V0QXR0cmlidXRlKCdzdHlsZScsICcnKTtcbiAgICAgICAgfSBlbHNlIGlmIChwb3NpdGlvbl90b3AgPj0gc3RhcnRpbmdfcG9pbnQpIHtcbiAgICAgICAgICAgIGZsb2F0ZXIuc3R5bGUud2lkdGggPSBib3VuZGluZy5vZmZzZXRXaWR0aCArICdweCc7XG4gICAgICAgICAgICBmbG9hdGVyLnN0eWxlLnRvcCA9IGZsb2F0X3Bvc2l0aW9uICsgJ3B4JztcbiAgICAgICAgICAgIGZsb2F0ZXIuc3R5bGUubGVmdCA9IGJvdW5kaW5nX3Bvc2l0aW9uLmxlZnQgKyAncHgnO1xuICAgICAgICAgICAgZmxvYXRlci5jbGFzc0xpc3QuYWRkKCdzdGlja3knKTtcbiAgICAgICAgICAgIGZsb2F0ZXIuY2xhc3NMaXN0LnJlbW92ZSgncGF1c2UnKTtcbiAgICAgICAgfSBlbHNlIGlmIChwb3NpdGlvbl90b3AgPD0gc3RhcnRpbmdfcG9pbnQpIHtcbiAgICAgICAgICAgIGZsb2F0ZXIuY2xhc3NMaXN0LnJlbW92ZSgnc3RpY2t5Jyk7XG4gICAgICAgICAgICBmbG9hdGVyLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnJyk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gVGhlIGV2ZW50IGxpc3RlbmVycy4uLlxuICAgIE9iamVjdC5rZXlzKF8uZXZlbnRzKS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIF8uZXZlbnRzW2VdLmFkZEV2ZW50TGlzdGVuZXIoZSwgYWN0aW9uKTtcbiAgICB9KTtcblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBhY3Rpb24pO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBhY3Rpb24pO1xufTsiLCIndXNlIHN0cmljdCc7XG5cbi8qICBFbGVtZW50LnByb3RvdHlwZS5mb2xsb3dlclxuICpcbiAqICBAc2luY2UgMS4wXG4gKlxuICogIEBwYXJhbSBzZXR0aW5ncyBPYmplY3QgVGhlIHNldHRpbmdzIGZvciB0aGUgZmxvYXRlciB0YXJnZXQgZWxlbWVudFxuICogIEBwb2x5ZmlsbCBPYmplY3QuYXNzaWduXG4gKlxuICovXG5cbkVsZW1lbnQucHJvdG90eXBlLmZvbGxvd2VyID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZXR0aW5ncyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG5cblxuICAgIC8vIFRoZSBkZWZhdWx0IHNldHRpbmdzXG4gICAgdmFyIGRlZmF1bHRzID0ge1xuICAgICAgICBzZWN0aW9uczogZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnc2VjdGlvbicpXG4gICAgfTtcblxuICAgIC8vIEFzc2lnbiBzZXR0aW5ncyBhcyBkZWZhdWx0cyBpZiBzZXR0aW5ncyBhcmUgbm90IHNldFxuICAgIGlmIChPYmplY3Qua2V5cyhzZXR0aW5ncykubGVuZ3RoID09IDApIHNldHRpbmdzID0gZGVmYXVsdHM7XG5cbiAgICAvLyBPdmVycmlkZSB0aGUgZGVmYXVsdHMgd2l0aCBhbnkgZGVmaW5lZCBzZXR0aW5nc1xuICAgIHZhciBfID0gT2JqZWN0LmFzc2lnbihkZWZhdWx0cywgc2V0dGluZ3MpO1xuXG4gICAgLy8gR2xvYmFsIHZhcmlhYmxlc1xuICAgIHZhciBuYXYgPSB0aGlzLFxuICAgICAgICBsaW5rcyA9IHRoaXMucXVlcnlTZWxlY3RvckFsbCgnc3BhbicpLFxuICAgICAgICBzZWN0aW9ucyA9IF8uc2VjdGlvbnMsXG4gICAgICAgIHNlY3Rpb25fcG9zaXRpb24sXG4gICAgICAgIHNlY3Rpb25faWQsXG4gICAgICAgIHNlY3Rpb25fdG9wLFxuICAgICAgICBzZWN0aW9uX2JvdHRvbTtcblxuICAgIGxpbmtzLmZvckVhY2goZnVuY3Rpb24gKGxpbmspIHtcblxuICAgICAgICBsaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcblxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihsaW5rLmdldEF0dHJpYnV0ZSgnZGF0YS1vbi1wYWdlLWxpbmsnKSkuYW5pbWF0ZVNjcm9sbCgpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIHZhciBhY3Rpb24gPSBmdW5jdGlvbiBhY3Rpb24oZSkge1xuXG4gICAgICAgIC8vIEdldCB0aGUgY3VycmVudCBzY3JvbGwgcG9zaXRpb25cbiAgICAgICAgdmFyIHNjcm9sbF9wb3NpdGlvbiA9IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wLFxuICAgICAgICAgICAgdGFyZ2V0X3BvaW50ID0gc2Nyb2xsX3Bvc2l0aW9uICsgdmgoKSAvIDI7XG5cbiAgICAgICAgc2VjdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoc2VjdGlvbikge1xuXG4gICAgICAgICAgICBpZiAoZS50eXBlICE9ICdzY3JvbGwnKSB7XG5cbiAgICAgICAgICAgICAgICBzZWN0aW9uX3Bvc2l0aW9uID0gc2VjdGlvbi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgICAgICAgICAgICAgIHNlY3Rpb25fdG9wID0gc2VjdGlvbl9wb3NpdGlvbi50b3AgKyBzY3JvbGxfcG9zaXRpb247XG4gICAgICAgICAgICAgICAgc2VjdGlvbl9ib3R0b20gPSBzZWN0aW9uX3Bvc2l0aW9uLmJvdHRvbSArIHNjcm9sbF9wb3NpdGlvbjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGlkID0gc2VjdGlvbi5nZXRBdHRyaWJ1dGUoJ2lkJykuc3Vic3RyaW5nKDgpLFxuICAgICAgICAgICAgICAgIHNlY3Rpb25fdG9wID0gc2VjdGlvbi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgKyBzY3JvbGxfcG9zaXRpb24sXG4gICAgICAgICAgICAgICAgc2VjdGlvbl9ib3R0b20gPSBzZWN0aW9uLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbSArIHNjcm9sbF9wb3NpdGlvbjtcblxuICAgICAgICAgICAgaWYgKHRhcmdldF9wb2ludCA+IHNlY3Rpb25fdG9wICYmIHRhcmdldF9wb2ludCA8IHNlY3Rpb25fYm90dG9tKSB7XG5cbiAgICAgICAgICAgICAgICBsaW5rc1tpZCAtIDFdLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgIGxpbmtzW2lkIC0gMV0uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgYWN0aW9uKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgYWN0aW9uKTtcbn07IiwiJ3VzZSBzdHJpY3QnO1xuXG4vKiAgXG4gICAgLy8vLyAgLS18ICAgIElOSVQgSlNcblxuICAgICogU2V0LXVwIEphdmFTY3JpcHRcbiovXG5cbmZ1bmN0aW9uIG9uX2xvYWQoKSB7XG5cdFx0XHRcdHZhciBmbiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogZnVuY3Rpb24gKGUpIHt9O1xuXG5cblx0XHRcdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRcdFx0XHRcdFx0Zm47XG5cdFx0XHRcdH0pO1xufVxuXG4vKiAgLy8vLyAgLS18ICAgIFJldHVybiB3aW5kb3cgc2l6ZVxuXG4gICAgKiBUd2luIGZ1bmN0aW9ucywgb25lIGZvciB3aWR0aCBhbmQgYW5vdGhlciBmb3IgaGVpZ2h0XG4qL1xuXG5mdW5jdGlvbiB2dygpIHtcblx0XHRcdFx0cmV0dXJuIHdpbmRvdy5pbm5lcldpZHRoO1xufVxuXG5mdW5jdGlvbiB2aCgpIHtcblx0XHRcdFx0cmV0dXJuIHdpbmRvdy5pbm5lckhlaWdodDtcbn1cblxuLyogIC8vLy8gIC0tfCAgICBXaWR0aCBCcmVha3BvaW50IC0gdGhlIEpTIGVxdWl2aWxhbnQgdG8gQ1NTIG1lZGlhIHF1ZXJpZXNcblxuICAgICogRW5zdXJlIGJyZWFrcG9pbnQgc2V0dGluZ3MgbWF0Y2ggdGhvc2Ugc2V0IGluIHRoZSBzdHlsZXNcbiovXG5cbnZhciBzID0gJ3MnO1xudmFyIG0gPSAnbSc7XG52YXIgbCA9ICdsJztcbnZhciB4bCA9ICd4bCc7XG52YXIgbWF4ID0gJ21heCc7XG5cbmZ1bmN0aW9uIHgod2lkdGgsIGZuKSB7XG5cdFx0XHRcdHZhciBjYWxsYmFjayA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogZnVuY3Rpb24gKCkge307XG5cdFx0XHRcdHZhciBydW5fb25jZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogZmFsc2U7XG5cblxuXHRcdFx0XHR2YXIgdmFsdWU7XG5cblx0XHRcdFx0c3dpdGNoICh3aWR0aCkge1xuXHRcdFx0XHRcdFx0XHRcdGNhc2Ugczpcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhbHVlID0gNDUwO2JyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdGNhc2UgbTpcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhbHVlID0gNzY4O2JyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdGNhc2UgbDpcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhbHVlID0gMTAyNDticmVhaztcblx0XHRcdFx0XHRcdFx0XHRjYXNlIHhsOlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFsdWUgPSAxNjAwO2JyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdGNhc2UgbWF4OlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFsdWUgPSAxOTIwO2JyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2YWx1ZSA9IHdpZHRoO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dmFyIHJ1biA9IGZ1bmN0aW9uIHJ1bigpIHtcblxuXHRcdFx0XHRcdFx0XHRcdHZhciBhbGxvdyA9IGZhbHNlO1xuXG5cdFx0XHRcdFx0XHRcdFx0aWYgKHZ3KCkgPiB2YWx1ZSkge1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAocnVuX29uY2UgPT09IHRydWUgJiYgYWxsb3cgPT09IGZhbHNlKSByZXR1cm47XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGZuKCk7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGFsbG93ID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHJ1bl9vbmNlID09PSB0cnVlICYmIGFsbG93ID09PSB0cnVlKSByZXR1cm47XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNhbGxiYWNrKCk7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGFsbG93ID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIHJ1bik7XG5cdFx0XHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBydW4pO1xuXHRcdFx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignb3JpZW50YXRpb25jaGFuZ2UnLCBydW4pO1xufSIsIid1c2Ugc3RyaWN0JztcblxuKGZ1bmN0aW9uICgpIHtcblxuICAgIC8qICAvLy8vICAtLXwgICAgQWNjb3JkaW9uXG4gICAgICAgICBAc2luY2UgMS4wXG4gICAgKi9cblxuICAgIC8vIENoZWNrIEdhbGxlcnkgY29tcG9uZW50IGV4aXN0cyBvbiBwYWdlXG4gICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXNoaWZ0ci1hY2NvcmRpb25dJykgPT09IG51bGwpIHJldHVybiBmYWxzZTtcblxuICAgIHZhciBhY2NvcmRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWNjb3JkaW9uJyksXG4gICAgICAgIGFjY29yZGlvbl9zaW5nbGVzID0gYWNjb3JkaW9uLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zaW5nbGUnKTtcblxuICAgIGFjY29yZGlvbl9zaW5nbGVzLmZvckVhY2goZnVuY3Rpb24gKHNpbmdsZSkge1xuXG4gICAgICAgIHNpbmdsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIHNpbmdsZS5jbGFzc0xpc3QudG9nZ2xlKCdvcGVuJyk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSkoKTsiLCIndXNlIHN0cmljdCc7XG5cbihmdW5jdGlvbiAoKSB7XG5cbiAgICAvKiAgLy8vLyAgLS18ICAgIENvb2tpZVxuICAgICAgICAgKiBIYW5kbGUgdGhlIFNoaWZ0ciBDb29raWUgQ29uc2VudFxuICAgICovXG5cbiAgICAvLyAgLy8vLyAgLS18ICAgIFRoaXMgaXMgd2hlcmUgd2Ugc2V0IHRoZSBjb29raWVcblxuICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2hpZnRyLWNvb2tpZS1ub3RpY2UnKSA9PT0gbnVsbCkgcmV0dXJuO1xuXG4gICAgdmFyIGNvb2tpZV9hY2NlcHRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaGlmdHItY29va2llLWFjY2VwdCcpO1xuICAgIHZhciBzaGlmdHJfY29va2llX25vdGljZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaGlmdHItY29va2llLW5vdGljZScpO1xuXG4gICAgY29va2llX2FjY2VwdGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIHNoaWZ0cl9jb29raWVfbm90aWNlLmNsYXNzTGlzdC5hZGQoJ2FjY2VwdGVkJyk7XG5cbiAgICAgICAgLy8gUHJlcGFyZSB0aGUgY29va2llXG4gICAgICAgIHZhciBjb29raWVfbmFtZSA9ICdzaGlmdHJfJyArIHNoaWZ0ci5uYW1lICsgJ19jb25zZW50JztcblxuICAgICAgICBjb29raWVfbmFtZSA9IGNvb2tpZV9uYW1lLnJlcGxhY2UoJyAnLCAnXycpO1xuICAgICAgICBjb29raWVfbmFtZSA9IGNvb2tpZV9uYW1lLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgdmFyIGNvb2tpZV9leHBpcnkgPSAnVGh1LCAxOCBEZWMgMjAxOSAxMjowMDowMCBVVEMnO1xuXG4gICAgICAgIC8vIFNldCB0aGUgY29va2llXG4gICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGNvb2tpZV9uYW1lICsgJz0nICsgdHJ1ZSArICc7IGV4cGlyZXM9JyArIGNvb2tpZV9leHBpcnkgKyAnOyBwYXRoPS8nO1xuXG4gICAgICAgIC8vIE5vdywgcmVtb3ZlIHRoZSBub3RpY2VcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzaGlmdHJfY29va2llX25vdGljZS5jbGFzc0xpc3QucmVtb3ZlKCdwb3N0ZWQnKTtcbiAgICAgICAgfSwgNzUwKTtcblxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoc2hpZnRyX2Nvb2tpZV9ub3RpY2UpO1xuICAgICAgICB9LCAyMDAwKTtcbiAgICB9KTtcbn0pKCk7IiwiJ3VzZSBzdHJpY3QnO1xuXG4oZnVuY3Rpb24gKCkge1xuXG4gICAgLyogIC8vLy8gIC0tfCAgICBGT1JNIEhBTkRMRVIgMC41IFtCRVRBXVxuICAgICAgICAgKiBTaGlwcyAxMDAlIGR5bmFtaWMsIG5vdCB0aWVkIHRvIGEgc3BlY2lmaWMgZm9ybSxcbiAgICAgICAgICBhbGxvd2luZyBtdWx0aXBsZSBmb3JtcyB0byB1c2UgdGhlIHdob2xlIG1vZHVsZVxuICAgICovXG5cbiAgICAvLyAgLS18ICAgIFNFVFRJTkdTXG4gICAgdmFyIHNldHRpbmdzID0gc2hpZnRyLmZvcm07XG5cbiAgICAvLyBWYWxpZGF0aW9uIGNsYXNzZXNcbiAgICB2YXIgdmMgPSB7XG4gICAgICAgIGZvY3VzOiAnZm9jdXMnLFxuICAgICAgICBzdWNjZXNzOiAnc3VjY2VzcycsXG4gICAgICAgIGVycm9yOiAnZXJyb3InXG4gICAgfTtcblxuICAgIC8vICAtLXwgICAgRklFTERTXG5cbiAgICB2YXIgaW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQsIHRleHRhcmVhJyksXG4gICAgICAgIGxpc3RlZCA9IFsnbmFtZScsICd0ZXh0JywgJ2VtYWlsJ107XG5cbiAgICBpbnB1dHMuZm9yRWFjaChmdW5jdGlvbiAoaW5wdXQpIHtcblxuICAgICAgICBpZiAobGlzdGVkLmluZGV4T2YoaW5wdXQudHlwZSkgPj0gMCB8fCBpbnB1dC5ub2RlTmFtZSA9PSAnVEVYVEFSRUEnKSB7XG5cbiAgICAgICAgICAgIC8vIHRhcmdldCBpcyBsYWJlbFxuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGlucHV0LnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG5cbiAgICAgICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKHZjLmZvY3VzKTtcbiAgICAgICAgICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZCh2Yy5mb2N1cyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NOYW1lID0gJyc7XG4gICAgICAgICAgICAgICAgdGFyZ2V0LmNsYXNzTmFtZSA9ICcnO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUgIT0gJycpIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGVja1ZhbGlkaXR5KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKHZjLnN1Y2Nlc3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJfdmFsaWRhdGlvbih0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKHZjLmVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnZhbGlkJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZCh2Yy5lcnJvcik7XG5cbiAgICAgICAgICAgICAgICBkb192YWxpZGF0aW9uKHRoaXMsIHRoaXMudmFsaWRhdGlvbk1lc3NhZ2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAoaW5wdXQudHlwZSA9PSAnY2hlY2tib3gnKSB7XG5cbiAgICAgICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5jaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyX3ZhbGlkYXRpb24oaW5wdXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnZhbGlkJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgICAgICBkb192YWxpZGF0aW9uKHRoaXMsIHRoaXMudmFsaWRhdGlvbk1lc3NhZ2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIGRvX3ZhbGlkYXRpb24oaW5wdXQsIG1lc3NhZ2UpIHtcblxuICAgICAgICB2YXIgbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcblxuICAgICAgICBtLmNsYXNzTGlzdC5hZGQoJ3ZhbGlkYXRpb24nKTtcbiAgICAgICAgbS5pbm5lckhUTUwgPSBtZXNzYWdlO1xuICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKG0pO1xuXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgbS5jbGFzc0xpc3QuYWRkKCdwb3AnKTtcbiAgICAgICAgfSwgNDAwKTtcblxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNsZWFyX3ZhbGlkYXRpb24oaW5wdXQpO1xuICAgICAgICB9LCA2MDAwKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbGVhcl92YWxpZGF0aW9uKGlucHV0KSB7XG5cbiAgICAgICAgdmFyIG5leHRFbCA9IGlucHV0Lm5leHRFbGVtZW50U2libGluZztcblxuICAgICAgICBpZiAobmV4dEVsKSB7XG5cbiAgICAgICAgICAgIGlmIChuZXh0RWwubm9kZU5hbWUgPT0gJ1NQQU4nKSB7XG5cbiAgICAgICAgICAgICAgICBuZXh0RWwuY2xhc3NMaXN0LnJlbW92ZSgncG9wJyk7XG5cbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChuZXh0RWwpO1xuICAgICAgICAgICAgICAgIH0sIDQwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiAgLS18ICAgIEhhbmRsZSB0aGUgc3VibWlzc2lvblxuICAgICAgICAgICogSUUgMTAtMTE6IGRvZXMgbm90IHN1cHBvcnQganNvbiBhcyByZXNwb25zZVR5cGVcbiAgICAgICAgKiBGaXJlZm94IDYtOTogZG9lcyBub3Qgc3VwcG9ydCBqc29uIGFzIHJlc3BvbnNlVHlwZVxuICAgICAgICAqIEZpcmVmb3ggNi0xMTogZG9lcyBub3Qgc3VwcG9ydCAudGltZW91dCBhbmQgLm9udGltZW91dFxuICAgICAgICAqIENocm9tZSA3LTI4OiBkb2VzIG5vdCBzdXBwb3J0IC50aW1lb3V0IGFuZCAub250aW1lb3V0XG4gICAgICAgICogQ2hyb21lIDctMzA6IGRvZXMgbm90IHN1cHBvcnQganNvbiBhcyByZXNwb25zZVR5cGVcbiAgICAgICAgKiBTYWZhcmkgNS03OiBkb2VzIG5vdCBzdXBwb3J0IC50aW1lb3V0IGFuZCAub250aW1lb3V0XG4gICAgICAgICogU2FmYXJpIDYuMS03OiBkb2VzIG5vdCBzdXBwb3J0IGpzb24gYXMgcmVzcG9uc2VUeXBlXG4gICAgICovXG5cbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm0nKSkge1xuICAgICAgICB2YXIgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtJyk7XG5cbiAgICAgICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICBmb3JtLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3R5cGU9XCJzdWJtaXRcIl0nKS5jbGFzc0xpc3QuYWRkKCdzdWJtaXR0aW5nJyk7XG5cbiAgICAgICAgICAgIHZhciBkYXRhID0gbmV3IEZvcm1EYXRhKGZvcm0pO1xuXG4gICAgICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICAgICAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPj0gMjAwICYmIHRoaXMuc3RhdHVzIDwgNDAwKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5yZXNwb25zZVRleHQpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBfZGF0YSA9IEpTT04ucGFyc2UodGhpcy5yZXNwb25zZVRleHQpO1xuXG4gICAgICAgICAgICAgICAgICAgIGZvcm0ucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1cInN1Ym1pdFwiXScpLmNsYXNzTGlzdC5yZW1vdmUoJ3N1Ym1pdHRpbmcnKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoX2RhdGEuc2VudCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBkb19zdWJtaXNzaW9uKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyb3InLCB4aHIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGFsZXJ0KHNldHRpbmdzLnhocl9lcnJvcik7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB4aHIub3BlbignUE9TVCcsIHNldHRpbmdzLmFqYXgpO1xuICAgICAgICAgICAgeGhyLnNlbmQoZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRvX3N1Ym1pc3Npb24odHlwZSkge1xuXG4gICAgICAgIHZhciBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybScpO1xuXG4gICAgICAgIHZhciBtZXNzYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksXG4gICAgICAgICAgICB3cmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksXG4gICAgICAgICAgICBoZWFkaW5nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpLFxuICAgICAgICAgICAgY29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKSxcbiAgICAgICAgICAgIGVycm9yX3JlZiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKSxcbiAgICAgICAgICAgIGNsb3NlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuXG4gICAgICAgIG1lc3NhZ2UuY2xhc3NMaXN0LmFkZCgnc3VibWlzc2lvbicpO1xuXG4gICAgICAgIC8vIFNlbGVjdCBjb3JyZXNwb25kaW5nIGNvbmZpcm1hdGlvbiBjb250ZW50XG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xuXG4gICAgICAgICAgICBjYXNlICdQT1NUJyB8fCAnTUFJTCc6XG4gICAgICAgICAgICAgICAgdmFyIGJvZHkgPSB7XG4gICAgICAgICAgICAgICAgICAgIGg6IHNldHRpbmdzLmVycm9yX2hlYWRpbmcsXG4gICAgICAgICAgICAgICAgICAgIGM6IHNldHRpbmdzLmVycm9yX2JvZHlcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGVycm9yX3JlZi5pbm5lckhUTUwgPSAnRVJST1IgUkVGOiAnICsgdHlwZTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB2YXIgYm9keSA9IHtcbiAgICAgICAgICAgICAgICAgICAgaDogc2V0dGluZ3Muc3VjY2Vzc19oZWFkaW5nLFxuICAgICAgICAgICAgICAgICAgICBjOiBzZXR0aW5ncy5zdWNjZXNzX2JvZHlcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgaGVhZGluZy5pbm5lckhUTUwgPSBib2R5Lmg7XG4gICAgICAgIGNvbnRlbnQuaW5uZXJIVE1MID0gYm9keS5jO1xuXG4gICAgICAgIGNsb3Nlci5pbm5lckhUTUwgPSAnQ2xvc2UnO1xuICAgICAgICBjbG9zZXIuc2V0QXR0cmlidXRlKCdpZCcsICdjbG9zZS1zdWJtaXNzaW9uJyk7XG4gICAgICAgIGNsb3Nlci5jbGFzc0xpc3QuYWRkKCdidXR0b24nKTtcblxuICAgICAgICB3cmFwLmFwcGVuZENoaWxkKGhlYWRpbmcpO1xuICAgICAgICB3cmFwLmFwcGVuZENoaWxkKGNvbnRlbnQpO1xuICAgICAgICB3cmFwLmFwcGVuZENoaWxkKGVycm9yX3JlZik7XG4gICAgICAgIG1lc3NhZ2UuYXBwZW5kQ2hpbGQod3JhcCk7XG4gICAgICAgIG1lc3NhZ2UuYXBwZW5kQ2hpbGQoY2xvc2VyKTtcblxuICAgICAgICBmb3JtLmFwcGVuZENoaWxkKG1lc3NhZ2UpO1xuXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgbWVzc2FnZS5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7XG4gICAgICAgIH0sIDEwMCk7XG5cbiAgICAgICAgY2xvc2VyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChhdXRvX2NsZWFyKTtcbiAgICAgICAgICAgIGNsZWFyX3N1Ym1pc3Npb24obWVzc2FnZSwgdHlwZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBlcnJvcl90eXBlcyA9IFsnUE9TVCcsICdNQUlMJ10sXG4gICAgICAgICAgICBhdXRvX2NsZWFyX2RlbGF5ID0gdm9pZCAwO1xuXG4gICAgICAgIGlmIChlcnJvcl90eXBlcy5pbmRleE9mKHR5cGUpID09IC0xKSB7XG4gICAgICAgICAgICBhdXRvX2NsZWFyX2RlbGF5ID0gODEwMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGF1dG9fY2xlYXJfZGVsYXkgPSAzMDAwMDtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBhdXRvX2NsZWFyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIGNsZWFyX3N1Ym1pc3Npb24obWVzc2FnZSwgdHlwZSk7XG4gICAgICAgIH0sIGF1dG9fY2xlYXJfZGVsYXkpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsZWFyX3N1Ym1pc3Npb24oZWwsIGFjdGlvbikge1xuXG4gICAgICAgIGlmIChhY3Rpb24gPT09IHRydWUpIHtcblxuICAgICAgICAgICAgdmFyIGk7XG5cbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBpbnB1dHMubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgICAgIGlmIChsaXN0ZWQuaW5kZXhPZihpbnB1dHNbaV0udHlwZSkgPiAwIHx8IGlucHV0c1tpXS5ub2RlTmFtZSA9PSAnVEVYVEFSRUEnKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaW5wdXRzW2ldLnZhbHVlID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0c1tpXS5jbGFzc05hbWUgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRzW2ldLnByZXZpb3VzRWxlbWVudFNpYmxpbmcuY2xhc3NOYW1lID0gJyc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpbnB1dHNbaV0udHlwZSA9PSAnY2hlY2tib3gnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0c1tpXS5jaGVja2VkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gICAgICAgIH0sIDEwMCk7XG4gICAgfVxufSkoKTsiLCIndXNlIHN0cmljdCc7XG5cbihmdW5jdGlvbiAoKSB7XG5cbiAgICAvKiAgLy8vLyAgLS18ICAgIEdhbGxlcnlcbiAgICAgICAgICogQnJhbmQgbmV3IGNvbXBvbmVudFxuICAgICovXG5cbiAgICAvLyBDaGVjayBHYWxsZXJ5IGNvbXBvbmVudCBleGlzdHMgb24gcGFnZVxuICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1zaGlmdHItZ2FsbGVyeV0nKSA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuXG4gICAgLy8gQ3JlYXRlIHRoZSB2aWV3ZXJcbiAgICB2YXIgdmlld2VyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksXG4gICAgICAgIHZpZXdlcl9pbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcblxuICAgIHZpZXdlci5jbGFzc0xpc3QuYWRkKCdnYWxsZXJ5LXZpZXdlcicpO1xuXG4gICAgdmlld2VyLmFwcGVuZENoaWxkKHZpZXdlcl9pbWcpO1xuXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh2aWV3ZXIpO1xuXG4gICAgdmFyIGdhbGxlcnlfbGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYWxsZXJ5LWxpc3QnKSxcbiAgICAgICAgZ2FsbGVyeV9pbWFnZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1zaGlmdHItZ2FsbGVyeS1pbWFnZV0nKTtcblxuICAgIHZhciBzb3VyY2VzID0gW107XG5cbiAgICAvLyBMaXN0ZW4gZm9yIGltYWdlIGNsaWNrc1xuICAgIGdhbGxlcnlfaW1hZ2VzLmZvckVhY2goZnVuY3Rpb24gKGltYWdlKSB7XG5cbiAgICAgICAgc291cmNlcy5wdXNoKGltYWdlLnNyYyk7XG5cbiAgICAgICAgaW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIHZpZXdlcl9pbWcuc3JjID0gaW1hZ2Uuc3JjO1xuXG4gICAgICAgICAgICBpZiAodmlld2VyLmNsYXNzTGlzdC5jb250YWlucygnZGlzcGxheScpKSByZXR1cm47XG5cbiAgICAgICAgICAgIHZpZXdlci5jbGFzc0xpc3QuYWRkKCdwcmUnKTtcblxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmlld2VyLmNsYXNzTGlzdC5hZGQoJ2Rpc3BsYXknKTtcbiAgICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgdmFyIGNvdW50ZXIgPSBzb3VyY2VzLmxlbmd0aDtcblxuICAgIC8vIENsb3NlIHRoZSB2aWV3ZXJcbiAgICB2aWV3ZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgdmlld2VyLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc3BsYXknKTtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2aWV3ZXIuY2xhc3NMaXN0LnJlbW92ZSgncHJlJyk7XG4gICAgICAgIH0sIDYwMCk7XG4gICAgfSk7XG5cbiAgICB2aWV3ZXJfaW1nLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcblxuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH0pO1xuXG4gICAgLy8gU3dpdGNoIGJldHdlZW4gaW1hZ2VzIGluIHRoZSB2aWV3ZXJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24gKGUpIHtcblxuICAgICAgICB2YXIga2V5ID0gZS5rZXlDb2RlIHx8IGUud2hpY2gsXG4gICAgICAgICAgICBjdXJyZW50X3Bvc2l0aW9uID0gc291cmNlcy5pbmRleE9mKHZpZXdlcl9pbWcuc3JjKTtcblxuICAgICAgICAvLyBMZWZ0IGFycm93XG4gICAgICAgIGlmIChrZXkgPT0gMzcpIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50X3Bvc2l0aW9uID09IDApIHtcbiAgICAgICAgICAgICAgICB2aWV3ZXJfaW1nLnNyYyA9IHNvdXJjZXNbY291bnRlciAtIDFdO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2aWV3ZXJfaW1nLnNyYyA9IHNvdXJjZXNbY3VycmVudF9wb3NpdGlvbiAtIDFdO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmlnaHQgYXJyb3dcbiAgICAgICAgaWYgKGtleSA9PSAzOSkge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRfcG9zaXRpb24gKyAxID09IGNvdW50ZXIpIHtcblxuICAgICAgICAgICAgICAgIHZpZXdlcl9pbWcuc3JjID0gc291cmNlc1swXTtcblxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmlld2VyX2ltZy5zcmMgPSBzb3VyY2VzW2N1cnJlbnRfcG9zaXRpb24gKyAxXTtcbiAgICAgICAgfVxuICAgIH0pO1xufSkoKTsiLCIndXNlIHN0cmljdCc7XG5cbihmdW5jdGlvbiAoKSB7XG5cbiAgICAvKiAgLy8vLyAgLS18ICAgIEdFTkVSSUNcbiAgICAgICAgICogSnVzdCBzb21lIG1hZ2ljXG4gICAgKi9cblxuICAgIC8vICAvLy8vICAtLXwgICAgVE9HR0xFIEhJRERFTiBNRU5VXG5cblxuICAgIHZhciB0b2dnbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG9nZ2xlJyksXG4gICAgICAgIG5hdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYWluLW5hdicpLFxuICAgICAgICBzdWJfbmF2cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2xpLnBhcmVudCcpLFxuICAgICAgICBoZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyJyksXG4gICAgICAgIGJvZHkgPSBkb2N1bWVudC5ib2R5O1xuXG4gICAgLy9sZXQgaGVhZGVyX3RyYW5zaXRpb25faGVpZ2h0ID0gKCBuYXYub2Zmc2V0SGVpZ2h0IC8gMTAgKSArIDcgKyAncmVtJztcbiAgICB2YXIgaGVhZGVyX3RyYW5zaXRpb25faGVpZ2h0ID0gJzEwMHZoJztcblxuICAgIHZhciBzdG9wID0gZnVuY3Rpb24gc3RvcChlKSB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfTtcblxuICAgIHZhciB0b2dnbGVfbWVudSA9IGZ1bmN0aW9uIHRvZ2dsZV9tZW51KGUpIHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICB0b2dnbGUuY2xhc3NMaXN0LnRvZ2dsZSgndHJhbnNpdGlvbicpO1xuICAgICAgICBib2R5LmNsYXNzTGlzdC50b2dnbGUoJ25vLXNjcm9sbCcpO1xuXG4gICAgICAgIGlmIChoZWFkZXIub2Zmc2V0SGVpZ2h0ID4gbmF2Lm9mZnNldEhlaWdodCkge1xuICAgICAgICAgICAgaGVhZGVyLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBoZWFkZXIuc3R5bGUuaGVpZ2h0ID0gaGVhZGVyX3RyYW5zaXRpb25faGVpZ2h0O1xuICAgICAgICB9XG5cbiAgICAgICAgbmF2LmNsYXNzTGlzdC50b2dnbGUoJ3Nob3cnKTtcbiAgICB9O1xuXG4gICAgdmFyIHRvZ2dsZV93aW5kb3cgPSBmdW5jdGlvbiB0b2dnbGVfd2luZG93KCkge1xuICAgICAgICB0b2dnbGUuY2xhc3NMaXN0LnJlbW92ZSgndHJhbnNpdGlvbicpO1xuICAgICAgICBoZWFkZXIuc2V0QXR0cmlidXRlKCdzdHlsZScsICcnKTtcbiAgICAgICAgYm9keS5jbGFzc0xpc3QucmVtb3ZlKCduby1zY3JvbGwnKTtcbiAgICAgICAgbmF2LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcbiAgICB9O1xuXG4gICAgeChtLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRvZ2dsZS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZV9tZW51KTtcbiAgICAgICAgbmF2LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc3RvcCk7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZV93aW5kb3cpO1xuICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlX21lbnUpO1xuICAgICAgICBuYXYuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzdG9wKTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlX3dpbmRvdyk7XG4gICAgfSwgdHJ1ZSk7XG5cbiAgICB4KG0sIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICBzdWJfbmF2cy5mb3JFYWNoKGZ1bmN0aW9uIChzdWIpIHtcblxuICAgICAgICAgICAgdmFyIGxpbmsgPSBzdWIuY2hpbGRyZW5bMF0sXG4gICAgICAgICAgICAgICAgbWVudSA9IHN1Yi5jaGlsZHJlblsxXSxcbiAgICAgICAgICAgICAgICByZW1vdmVfb3BlbiA9IHZvaWQgMDtcblxuICAgICAgICAgICAgbGluay5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChyZW1vdmVfb3Blbik7XG5cbiAgICAgICAgICAgICAgICBpZiAoc3ViLmNsYXNzTGlzdC5jb250YWlucygnc2hvdycpICE9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHN1Yi5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGxpbmsuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIGZ1bmN0aW9uIChlKSB7XG5cbiAgICAgICAgICAgICAgICByZW1vdmVfb3BlbiA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBzdWIuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuICAgICAgICAgICAgICAgIH0sIDIwMCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbWVudS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQocmVtb3ZlX29wZW4pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIG1lbnUuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIHJlbW92ZV9vcGVuID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHN1Yi5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gICAgICAgICAgICAgICAgfSwgMjAwKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vICAvLy8vICAtLXwgICAgU0laRSBVUCBTVkcgTE9HT1xuXG5cbiAgICB2YXIgdGhlX2xvZ28gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGhlX2xvZ28nKSxcbiAgICAgICAgdmlld2JveCA9IHRoZV9sb2dvLmdldEF0dHJpYnV0ZSgndmlld0JveCcpLFxuICAgICAgICB2YWx1ZXMgPSB2aWV3Ym94LnNwbGl0KCcgJyksXG4gICAgICAgIHJhdGlvID0gdmFsdWVzWzJdIC8gdmFsdWVzWzNdLFxuICAgICAgICB3aWR0aCA9IHRoZV9sb2dvLnBhcmVudEVsZW1lbnQub2Zmc2V0SGVpZ2h0IC8gMTAgKiByYXRpbztcblxuICAgIHRoZV9sb2dvLnN0eWxlLndpZHRoID0gd2lkdGggKyAncmVtJztcblxuICAgIC8vICAvLy8vICAtLXwgICAgQkxPRyBTVElDS1kgU0lERUJBUlxuXG5cbiAgICB4KGwsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICB2YXIgc2lkZWJhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ibG9nLXNpZGViYXInKSxcbiAgICAgICAgICAgIGJsb2dfbGF5b3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJsb2ctbGF5b3V0ID4gZGl2Jyk7XG5cbiAgICAgICAgaWYgKHNpZGViYXIgPT09IG51bGwpIHJldHVybjtcblxuICAgICAgICB2YXIgc2lkZWJhcl93aWR0aCA9IHNpZGViYXIub2Zmc2V0V2lkdGgsXG4gICAgICAgICAgICBzaWRlYmFyX3BvcyA9IHNpZGViYXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXG4gICAgICAgICAgICBibG9nX2xheW91dF9wb3MgPSBibG9nX2xheW91dC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICB2YXIgY3Vycl9wb3MgPSB3aW5kb3cuc2Nyb2xsWTtcblxuICAgICAgICAgICAgaWYgKGN1cnJfcG9zICsgc2lkZWJhci5vZmZzZXRIZWlnaHQgKyBoZWFkZXIub2Zmc2V0SGVpZ2h0ICsgMjAgPj0gYmxvZ19sYXlvdXRfcG9zLmJvdHRvbSkge1xuXG4gICAgICAgICAgICAgICAgc2lkZWJhci5jbGFzc0xpc3QuYWRkKCdwYXVzZScpO1xuICAgICAgICAgICAgICAgIHNpZGViYXIuY2xhc3NMaXN0LnJlbW92ZSgnc3RpY2t5Jyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJfcG9zICsgaGVhZGVyLm9mZnNldEhlaWdodCArIDIwID49IGJsb2dfbGF5b3V0X3Bvcy50b3ApIHtcblxuICAgICAgICAgICAgICAgIHNpZGViYXIuc3R5bGUud2lkdGggPSBzaWRlYmFyLm9mZnNldFdpZHRoICsgJ3B4JztcbiAgICAgICAgICAgICAgICBzaWRlYmFyLnN0eWxlLnRvcCA9IGhlYWRlci5vZmZzZXRIZWlnaHQgKyAyMCArICdweCc7XG4gICAgICAgICAgICAgICAgc2lkZWJhci5zdHlsZS5sZWZ0ID0gc2lkZWJhcl9wb3MubGVmdCArICdweCc7XG4gICAgICAgICAgICAgICAgc2lkZWJhci5jbGFzc0xpc3QuYWRkKCdzdGlja3knKTtcbiAgICAgICAgICAgICAgICBzaWRlYmFyLmNsYXNzTGlzdC5yZW1vdmUoJ3BhdXNlJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgc2lkZWJhci5jbGFzc0xpc3QucmVtb3ZlKCdzdGlja3knKTtcbiAgICAgICAgICAgICAgICBzaWRlYmFyLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gIC8vLy8gIC0tfCAgICBDQVJPVVNFTFxuXG4gICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXNoaWZ0ci1jYXJvdXNlbF0nKSkge1xuXG4gICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVyby1jYXJvdXNlbCcpKSB7XG5cbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlcm8tY2Fyb3VzZWwgLmNvbnRlbnQnKS5jbGFzc0xpc3QuYWRkKCdsb2FkJyk7XG4gICAgICAgICAgICAgICAgfSwgODAwKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVyby1jYXJvdXNlbCcpLnNoaWZ0ckNhcm91c2VsKHtcbiAgICAgICAgICAgICAgICBwYXVzZV9vbl9tYXJrZXJfaG92ZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHNwZWVkOiA2MDAwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn0pKCk7IiwiJ3VzZSBzdHJpY3QnO1xuXG4oZnVuY3Rpb24gKCkge1xuXG4gICAgLyogIC8vLy8gIC0tfCAgICBMQVpZIExPQURFUiAyLjBcbiAgICAgICAgICogVGhlIHNlY29uZCBpdGVyYXRpb24gb2YgdGhlIExhenkgTG9hZGVyXG4gICAgICAgICogTm93IGNvbnRhaW5lZCB3aXRoaW4gZnVuY3Rpb25cbiAgICAgICAgKiBIYW5kbGVzIGltZywgaWZyYW1lIGFuZCBiYWNrZ3JvdW5kLWltYWdlcyBhbGwgaW4gb25lXG4gICAgICAgICogVXBkYXRlZCB0byBFUzYgd2l0aCBhcnJvdyBmdW5jdGlvbnMgYW5kIGludGVycG9sYXRpb25cbiAgICAqL1xuXG4gICAgdmFyIGxhenlDb250ZW50ID0gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubGF6eScpKSxcbiAgICAgICAgbGlzdGVkID0gWydJTUcnLCAnSUZSQU1FJ107XG5cbiAgICBpZiAoJ0ludGVyc2VjdGlvbk9ic2VydmVyJyBpbiB3aW5kb3cpIHtcblxuICAgICAgICB2YXIgbGF6eU9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKGZ1bmN0aW9uIChlbnRyaWVzLCBvYnNlcnZlcikge1xuXG4gICAgICAgICAgICBlbnRyaWVzLmZvckVhY2goZnVuY3Rpb24gKGVudHJ5KSB7XG5cbiAgICAgICAgICAgICAgICBpZiAoZW50cnkuaXNJbnRlcnNlY3RpbmcpIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgbGF6eUl0ZW0gPSBlbnRyeS50YXJnZXQ7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpc3RlZC5pbmRleE9mKGxhenlJdGVtLm5vZGVOYW1lKSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXp5SXRlbS5zcmMgPSBsYXp5SXRlbS5kYXRhc2V0LnNyYztcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhenlJdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2xhenknKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhenlJdGVtLmNsYXNzTGlzdC5hZGQoJ3Zpc2libGUnKTtsYXp5SXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdsYXp5Jyk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBsYXp5T2JzZXJ2ZXIudW5vYnNlcnZlKGxhenlJdGVtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSwgeyByb290TWFyZ2luOiAnMHB4IDBweCAnICsgd2luZG93LmlubmVySGVpZ2h0ICsgJ3B4IDBweCcgfSk7XG5cbiAgICAgICAgbGF6eUNvbnRlbnQuZm9yRWFjaChmdW5jdGlvbiAobGF6eUl0ZW0pIHtcbiAgICAgICAgICAgIGxhenlPYnNlcnZlci5vYnNlcnZlKGxhenlJdGVtKTtcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcblxuICAgICAgICB2YXIgYWN0aXZlID0gZmFsc2UsXG4gICAgICAgICAgICBsYXp5TG9hZCA9IGZ1bmN0aW9uIGxhenlMb2FkKCkge1xuXG4gICAgICAgICAgICBpZiAoYWN0aXZlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGFjdGl2ZSA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgbGF6eUNvbnRlbnQuZm9yRWFjaChmdW5jdGlvbiAobGF6eUl0ZW0pIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxhenlJdGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCA8PSB3aW5kb3cuaW5uZXJIZWlnaHQgJiYgbGF6eUl0ZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuYm90dG9tID49IHdpbmRvdy5pbm5lckhlaWdodCAmJiBnZXRDb21wdXRlZFN0eWxlKGxhenlJdGVtKS5kaXNwbGF5ICE9ICdub25lJykge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxpc3RlZC5pbmRleE9mKGxhenlJdGVtLm5vZGVOYW1lKSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhenlJdGVtLnNyYyA9IGxhenlJdGVtLmRhdGFzZXQuc3JjO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXp5SXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdsYXp5Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF6eUl0ZW0uY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpO2xhenlJdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2xhenknKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXp5Q29udGVudCA9IGxhenlDb250ZW50LmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbSAhPT0gbGF6eUl0ZW07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobGF6eUNvbnRlbnQubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgbGF6eUxvYWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgbGF6eUxvYWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignb3JpZW50YXRpb25jaGFuZ2UnLCBsYXp5TG9hZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTthY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9LCAyMDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGxhenlMb2FkKTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGxhenlMb2FkKTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ29yaWVudGF0aW9uY2hhbmdlJywgbGF6eUxvYWQpO1xuICAgIH1cbn0pOyIsIid1c2Ugc3RyaWN0JztcblxuKGZ1bmN0aW9uICgpIHtcblxuICAgIC8qICAvLy8vICAtLXwgICAgR09PR0xFIE1BUFMgQVBJIExBWlkgTE9BREVSXG4gICAgICAgICAqIFRoZSBmdW5jdGlvbiBpcyBzcGxpdCwgbWVhbmluZyBsYXp5IGxvYWRpbmcgXG4gICAgICAgICAgY2FuIGJlIHRvZ2dsZWQgZm9yIGRpZmVyZW50IHBhZ2VzIGlmIG5lY2Vzc2FyeVxuICAgICovXG5cbiAgICBmdW5jdGlvbiBtYXBzX2FwaV9sYXp5X2xvYWRlcihrZXkpIHtcblxuICAgICAgICBpZiAoYXBpX2tleSkge1xuXG4gICAgICAgICAgICBpZiAoUEhQX1BBR0VfSUQgPT0gU1RBVElDX1BBR0VfSUQpIHtcblxuICAgICAgICAgICAgICAgIHZhciB3aW5kb3dfaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICBtYXAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImhhbGYtbWFwXCIpLFxuICAgICAgICAgICAgICAgICAgICBhcGlfdXJsID0gJ2h0dHBzOi8vbWFwcy5nb29nbGVhcGlzLmNvbS9tYXBzL2FwaS9qcz9jYWxsYmFjaz1pbml0aWFsaXplJmtleT0nICsga2V5O1xuXG4gICAgICAgICAgICAgICAgaWYgKCdJbnRlcnNlY3Rpb25PYnNlcnZlcicgaW4gd2luZG93KSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByb290TWFyZ2luOiB3aW5kb3dfaGVpZ2h0ICsgJ3B4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocmVzaG9sZDogMFxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBvYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihmdW5jdGlvbiAoZW50cmllcywgb2JzZXJ2ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpc0ludGVyc2VjdGluZyA9IHR5cGVvZiBlbnRyaWVzWzBdLmlzSW50ZXJzZWN0aW5nID09PSAnYm9vbGVhbicgPyBlbnRyaWVzWzBdLmlzSW50ZXJzZWN0aW5nIDogZW50cmllc1swXS5pbnRlcnNlY3Rpb25SYXRpbyA+IDA7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0ludGVyc2VjdGluZykge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcmlwdC5zcmMgPSBhcGlfdXJsO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLnVub2JzZXJ2ZShtYXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LCBvcHRpb25zKTtcblxuICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5vYnNlcnZlKG1hcCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgYWN0aXZlID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGxhenlNYXAgPSBmdW5jdGlvbiBsYXp5TWFwKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGl2ZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmUgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXAuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wIDw9IHdpbmRvdy5pbm5lckhlaWdodCAqIDIgJiYgbWFwLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbSA+PSAwICYmIGdldENvbXB1dGVkU3R5bGUobWFwKS5kaXNwbGF5ICE9PSAnbm9uZScpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlX3NjcmlwdCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBsYXp5TWFwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCBsYXp5TWFwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdvcmllbnRhdGlvbmNoYW5nZScsIGxhenlNYXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMjAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBsYXp5TWFwKTtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGxhenlNYXApO1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignb3JpZW50YXRpb25jaGFuZ2UnLCBsYXp5TWFwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIElmIGN1cnJlbnQgcGFnZSBkb2Vzbid0IG1hdGNoLCBsb2FkIGltbWVkaWF0ZWx5XG5cbiAgICAgICAgICAgICAgICBjcmVhdGVfc2NyaXB0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVfc2NyaXB0KCkge1xuICAgICAgICAgICAgdmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgICAgICAgICAgc2NyaXB0LnNyYyA9IGFwaV91cmw7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBtYXBzX2FwaV9sYXp5X2xvYWRlcignQUl6YVN5Qjlucl9vVEgxUnRUZ1lXR1h4Wmo2TVNOVy15YjZoRTdjJyk7XG59KTsiLCIndXNlIHN0cmljdCc7XG5cbihmdW5jdGlvbiAoKSB7XG5cbiAgICAvKiAgLy8vLyAgLS18ICAgIE9SUEhBTlxuICAgICAgICAgKiBTYXkgZ29vZGJ5ZSB0byBvcnBoYW4gY2hpbGRyZW4gaW4gdGV4dDtcbiAgICAgICAgICBiZSBpdCBoZWFkaW5ncywgcGFyYWdyYXBocywgbGlzdCBpdGVtcyBvciBzcGFucy5cbiAgICAgICAgICogRXhjbHVkZSBlbGVtZW50cyB3aXRoIGRhdGEtb3JwaGFuIGF0dHJpYnV0ZVxuICAgICAqL1xuXG4gICAgLy8gQ29sbGVjdCB0ZXh0IGVsZW1lbnRzXG4gICAgdmFyIGdyb3VwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtb3JwaGFuXScpO1xuXG4gICAgLy8gVGhlIExvb3BcbiAgICBncm91cC5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuXG4gICAgICAgIC8vIEFzc2lnbiB0ZXh0IGNvbnRlbnRcbiAgICAgICAgdmFyIGNvbnRlbnQgPSBlbC5pbm5lckhUTUwsXG4gICAgICAgICAgICBuZXdOb2RlID0gW107XG5cbiAgICAgICAgLy8gVGFyZ2V0IGVsZW1lbnRzIHdpdGggYnJlYWsgdGFnc1xuICAgICAgICBpZiAoY29udGVudC5pbmRleE9mKCc8YnI+JykgPj0gMCAmJiBjb250ZW50LmluZGV4T2YoJyAnKSA+PSAwKSB7XG4gICAgICAgICAgICB2YXIgdGV4dE5vZGVzID0gY29udGVudC5zcGxpdCgnPGJyPicpO1xuXG4gICAgICAgICAgICB0ZXh0Tm9kZXMuZm9yRWFjaChmdW5jdGlvbiAobm9kZSkge1xuXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIHRleHQgd2l0aCBubyBtb3JlIG9ycGhhbnMhXG4gICAgICAgICAgICAgICAgbmV3Tm9kZS5wdXNoKG5vX29ycGhhbihub2RlKSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gUmVqb2luIHdob2xlIGVsZW1lbnQgYW5kIHVwZGF0ZVxuICAgICAgICAgICAgZWwuaW5uZXJIVE1MID0gbmV3Tm9kZS5qb2luKCc8YnI+Jyk7XG4gICAgICAgIH0gZWxzZSBpZiAoY29udGVudC5pbmRleE9mKCcgJykgPj0gMCkge1xuXG4gICAgICAgICAgICAvLyBVcGRhdGUgdGV4dCB3aXRoIG5vIG1vcmUgb3JwaGFucyFcbiAgICAgICAgICAgIGVsLmlubmVySFRNTCA9IG5vX29ycGhhbihjb250ZW50KTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gUmVwbGFjZSBzcGFjZSB3aXRoICZuYnNwO1xuICAgIGZ1bmN0aW9uIG5vX29ycGhhbihlbCkge1xuXG4gICAgICAgIC8vIEdldCBsYXN0IHNwYWNlIHBvc2l0aW9uXG4gICAgICAgIHZhciBzcGFjZSA9IGVsLmxhc3RJbmRleE9mKCcgJyk7XG5cbiAgICAgICAgLy8gRG8gdGhlIG1hZ2ljXG4gICAgICAgIHJldHVybiBlbC5zbGljZSgwLCBzcGFjZSkgKyBlbC5zbGljZShzcGFjZSkucmVwbGFjZSgnICcsICcmbmJzcDsnKTtcbiAgICB9XG59KSgpOyIsIid1c2Ugc3RyaWN0JztcblxuKGZ1bmN0aW9uICgpIHtcblxuICAgIC8qICAvLy8vICAtLXwgICAgUE9QVVBTXG4gICAgICAgICAqIEJhc2ljIGZ1bmN0aW9uYWxpdHkgdG8gaGFuZGxlIG9wZW5pbmcgYW4gY2xvc2luZ1xuICAgICAgICAgIG9mIHBvcHVwIGVsZW1lbnRzLlxuICAgICAgICAqIENhbiBoYW5kbGUgbXVsdGlwbGUgcG9wdXBzIHBlciBwYWdlXG4gICAgKi9cblxuICAgIHZhciBvcGVuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm9wZW4nKSxcbiAgICAgICAgY2xvc2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcueCcpLFxuICAgICAgICBib2R5ID0gZG9jdW1lbnQuYm9keTtcblxuICAgIG9wZW4uZm9yRWFjaChmdW5jdGlvbiAob3BlbmVyKSB7XG4gICAgICAgIG9wZW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgdmFyIGluc3RhbmNlID0gb3BlbmVyLmdldEF0dHJpYnV0ZSgnZGF0YS1vcGVuJyksXG4gICAgICAgICAgICAgICAgcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1wb3B1cD1cIicgKyBpbnN0YW5jZSArICdcIl0nKTtcblxuICAgICAgICAgICAgcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXAtYXBwZWFyJyk7XG4gICAgICAgICAgICBib2R5LmNsYXNzTGlzdC5hZGQoJ25vLXNjcm9sbCcpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGNsb3NlLmZvckVhY2goZnVuY3Rpb24gKGNsb3Nlcikge1xuICAgICAgICBjbG9zZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIHZhciBwb3B1cCA9IGNsb3Nlci5wYXJlbnRFbGVtZW50O1xuXG4gICAgICAgICAgICBwb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cC1kaXNhcHBlYXInKTtcbiAgICAgICAgICAgIGJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnbm8tc2Nyb2xsJyk7XG5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwLWFwcGVhcicpO1xuICAgICAgICAgICAgICAgIHBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwLWRpc2FwcGVhcicpO1xuICAgICAgICAgICAgfSwgMTIwMCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSk7Il0sImZpbGUiOiJjb3JlLW1pbi5qcyJ9
