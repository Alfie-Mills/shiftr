"use strict";function on_load(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];document.addEventListener("DOMContentLoaded",function(e){})}function vw(){return window.innerWidth}function vh(){return window.innerHeight}"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),s=1;s<arguments.length;s++){var i=arguments[s];if(null!=i)for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n},writable:!0,configurable:!0}),Element.prototype.animateScroll=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t+=document.querySelector(".header").offsetHeight;var n=window.pageYOffset||document.documentElement.scrollTop,s=this.getBoundingClientRect().top+n,i=(i=s-n)-t,o=0;Math.easeInOutQuad=function(e,t,n,s){return(e/=s/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},function t(){o+=16.66;var s=Math.easeInOutQuad(o,n,i,e);document.documentElement.scrollTop=document.body.scrollTop=s,o<e&&setTimeout(t,16.66)}()},Element.prototype.shiftrCarousel=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={autoplay:!0,speed:4e3,transition:800,show_markers:!0,pause_on_marker_hover:!0},n=0;0==Object.keys(e).length&&(e=t);var s=Object.assign(t,e),i=this.children[0],o=this.children[0].children;i.style.height=o[0].offsetHeight+"px";var r=void 0;y()&&((r=document.createElement("div")).classList.add("stage-map"),this.appendChild(r));var a=!1,c=!1;for(n=0;n<o.length;n++)if(o[n].dataset.shiftrCarouselProp=n,o[n].dataset.shiftrCarouselActive="false",y()){var l=document.createElement("div"),d=document.createElement("span");l.dataset.shiftrCarouselMarker=n,l.appendChild(d),r.appendChild(l)}var u=void 0;y()&&(u=Object.keys(r.children).map(function(e){return r.children[e]})),o[0].classList.add("active"),o[0].dataset.shiftrCarouselActive="true",y()&&u[0].classList.add("active");var f=[];for(n=0;n<o.length;n++){f.push([]),o[n].querySelectorAll("*").forEach(function(e){"IMG"==e.nodeName&&f[n].push(e)})}f.length>0&&p(f[0]),f.length>1&&setTimeout(function(e){p(f[1])},s.speed/2);var v=function(){if(a)return!1;if(c)return!1;c=!0;var e=g(),t=L(e);if(y()&&u[t].classList.remove("active"),t==o.length-1)o[0].style.zIndex=150,o[0].classList.add("active"),o[0].dataset.shiftrCarouselActive="true",y()&&u[0].classList.add("active"),setTimeout(function(){o[0].style.zIndex=""},s.transition);else{var n=e.nextElementSibling,i=parseInt(n.dataset.shiftrCarouselProp,10);n.classList.add("active"),n.dataset.shiftrCarouselActive="true",y()&&u[i].classList.add("active"),t==o.length-2||f[i+1]&&p(f[i+1])}e.dataset.shiftrCarouselActive="false",setTimeout(function(){e.classList.remove("active"),c=!1},s.transition)},m=void 0,h=void 0;function p(e){for(n=0;n<e.length;n++)!1===e[n].hasAttribute("src")&&(e[n].src=e[n].dataset.src,e[n].dataset.src="")}function g(){var e=void 0;for(n=0;n<o.length;n++)"true"==o[n].dataset.shiftrCarouselActive&&(e=o[n]);return e}function L(e){return parseInt(e.dataset.shiftrCarouselProp,10)}function y(){return!!s.show_markers}s.autoplay&&(m=setInterval(v,s.speed)),y()&&u.forEach(function(e){e.addEventListener("click",function(){if(c)return a=!1,!1;var t=g(),n=L(t),i=(o[e.dataset.shiftrCarouselMarker],e.dataset.shiftrCarouselMarker);a=!1,s.autoplay&&(clearInterval(m),clearTimeout(h)),n!=i&&(c=!0,u[n].classList.remove("active"),o[i].style.zIndex=150,o[i].classList.add("active"),o[i].dataset.shiftrCarouselActive="true",u[i].classList.add("active"),t.dataset.shiftrCarouselActive="false",setTimeout(function(){t.classList.remove("active"),o[i].style.zIndex="",c=!1},s.transition)),s.autoplay&&(h=setTimeout(function(){m=setInterval(v,s.speed)},s.speed))}),e.addEventListener("mouseover",function(){o[e.dataset.shiftrCarouselMarker];var t=e.dataset.shiftrCarouselMarker;s.pause_on_marker_hover&&(a=!0),f[t]&&p(f[t])}),e.addEventListener("mouseleave",function(){a=!1})})},Element.prototype.floater=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={bounding:this.parentElement,float_buffer:0,header:document.querySelector(".header"),starting:null,ending:null,events:{resize:window,orientationchange:window}};0==Object.keys(e).length&&(e=t);var n,s,i,o,r,a=Object.assign(t,e),c=this,l=a.bounding,d=a.float_buffer;a.header&&(d+=a.header.offsetHeight);var u=function(e){var t=window.pageYOffset||document.documentElement.scrollTop;"scroll"!=e.type&&(n=c.getBoundingClientRect(),s=l.getBoundingClientRect(),n.left,o=null!==a.starting?a.starting.getBoundingClientRect().top+t:s.top+t,r=null!==a.ending?a.ending.getBoundingClientRect().bottom+t:s.bottom+t),i=t+d,t+d+c.offsetHeight>=r?(c.classList.add("pause"),c.classList.remove("sticky"),c.setAttribute("style","")):i>=o?(c.style.width=l.offsetWidth+"px",c.style.top=d+"px",c.style.left=s.left+"px",c.classList.add("sticky"),c.classList.remove("pause")):i<=o&&(c.classList.remove("sticky"),c.setAttribute("style",""))};Object.keys(a.events).forEach(function(e){a.events[e].addEventListener(e,u)}),document.addEventListener("DOMContentLoaded",u),window.addEventListener("scroll",u)},Element.prototype.follower=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={sections:document.querySelectorAll("section")};0==Object.keys(e).length&&(e=t);var n,s=Object.assign(t,e),i=this.querySelectorAll("span"),o=s.sections;i.forEach(function(e){e.addEventListener("click",function(t){document.querySelector(e.getAttribute("data-on-page-link")).animateScroll()})});var r=function(e){var t=window.pageYOffset||document.documentElement.scrollTop,s=t+vh()/2;o.forEach(function(o){"scroll"!=e.type&&(a=(n=o.getBoundingClientRect()).top+t,c=n.bottom+t);var r=o.getAttribute("id").substring(8),a=o.getBoundingClientRect().top+t,c=o.getBoundingClientRect().bottom+t;s>a&&s<c?i[r-1].classList.add("active"):i[r-1].classList.remove("active")})};document.addEventListener("DOMContentLoaded",r),window.addEventListener("scroll",r)};var s="s",m="m",l="l",xl="xl",max="max";function x(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];switch(e){case s:n=450;break;case m:n=768;break;case l:n=1024;break;case xl:n=1600;break;case max:n=1920;break;default:n=e}var r=function(){var e=!1;if(vw()>n){if(!0===o&&!1===e)return;t(),e=!1}else{if(!0===o&&!0===e)return;i(),e=!0}};document.addEventListener("DOMContentLoaded",r),window.addEventListener("resize",r),window.addEventListener("orientationchange",r)}!function(){if(null===document.querySelector("[data-shiftr-accordion]"))return!1;document.querySelector(".accordion").querySelectorAll(".single").forEach(function(e){e.addEventListener("click",function(t){t.preventDefault(),e.classList.toggle("open")})})}(),function(){if(null!==document.querySelector(".shiftr-cookie-notice")){var e=document.getElementById("shiftr-cookie-accept"),t=document.querySelector(".shiftr-cookie-notice");e.addEventListener("click",function(e){e.preventDefault(),t.classList.add("accepted");var n="shiftr_"+shiftr.name+"_consent";n=(n=n.replace(" ","_")).toLowerCase();document.cookie=n+"="+!0+"; expires=Thu, 18 Dec 2019 12:00:00 UTC; path=/",setTimeout(function(){t.classList.remove("posted")},750),setTimeout(function(){document.body.removeChild(t)},2e3)})}}(),function(){var e=shiftr.form,t="focus",n="success",s="error",i=document.querySelectorAll("input, textarea"),o=["name","text","email"];function r(e,t){var n=document.createElement("span");n.classList.add("validation"),n.innerHTML=t,e.parentElement.appendChild(n),setTimeout(function(){n.classList.add("pop")},400),setTimeout(function(){a(e)},6e3)}function a(e){var t=e.nextElementSibling;t&&"SPAN"==t.nodeName&&(t.classList.remove("pop"),setTimeout(function(){e.parentElement.removeChild(t)},400))}if(i.forEach(function(e){if(o.indexOf(e.type)>=0||"TEXTAREA"==e.nodeName){var i=e.previousElementSibling;e.addEventListener("focus",function(){this.classList.add(t),i.classList.add(t)}),e.addEventListener("blur",function(){this.className="",i.className="",""!=this.value&&(this.checkValidity()?(i.classList.add(n),a(this)):i.classList.add(s))}),e.addEventListener("invalid",function(e){e.preventDefault(),i.classList.add(s),r(this,this.validationMessage)})}else"checkbox"==e.type&&(e.addEventListener("change",function(){e.checked&&a(e)}),e.addEventListener("invalid",function(e){e.preventDefault(),r(this,this.validationMessage)}))}),document.querySelector(".form")){var c=document.querySelector(".form");c.addEventListener("submit",function(t){t.preventDefault(),c.querySelector('input[type="submit"]').classList.add("submitting");var n=new FormData(c),s=new XMLHttpRequest;s.onload=function(){if(this.status>=200&&this.status<400){console.log(this.responseText);var t=JSON.parse(this.responseText);c.querySelector('input[type="submit"]').classList.remove("submitting"),t.sent&&function(t){var n=document.querySelector("form"),s=document.createElement("div"),i=document.createElement("div"),o=document.createElement("span"),r=document.createElement("p"),a=document.createElement("span"),c=document.createElement("button");switch(s.classList.add("submission"),t){case"POST":var d={h:e.error_heading,c:e.error_body};a.innerHTML="ERROR REF: "+t;break;default:var d={h:e.success_heading,c:e.success_body}}o.innerHTML=d.h,r.innerHTML=d.c,c.innerHTML="Close",c.setAttribute("id","close-submission"),c.classList.add("button"),i.appendChild(o),i.appendChild(r),i.appendChild(a),s.appendChild(i),s.appendChild(c),n.appendChild(s),setTimeout(function(){s.classList.add("show")},100),c.addEventListener("click",function(e){e.preventDefault(),clearTimeout(f),l(s,t)});var u=void 0;u=-1==["POST","MAIL"].indexOf(t)?8100:3e4;var f=setTimeout(function(){l(s,t)},u)}(!0)}else console.log("error",s)},s.onerror=function(){alert(e.xhr_error)},s.open("POST",e.ajax),s.send(n)})}function l(e,t){var n;if(!0===t)for(n=0;n<i.length;n++)o.indexOf(i[n].type)>0||"TEXTAREA"==i[n].nodeName?(i[n].value="",i[n].className="",i[n].previousElementSibling.className=""):"checkbox"==i[n].type&&(i[n].checked=!1);setTimeout(function(){e.classList.remove("show")},100)}}(),function(){if(null===document.querySelector("[data-shiftr-gallery]"))return!1;var e=document.createElement("div"),t=document.createElement("img");e.classList.add("gallery-viewer"),e.appendChild(t),document.body.appendChild(e);document.querySelector(".gallery-list");var n=document.querySelectorAll("[data-shiftr-gallery-image]"),s=[];n.forEach(function(n){s.push(n.src),n.addEventListener("click",function(){t.src=n.src,e.classList.contains("display")||(e.classList.add("pre"),setTimeout(function(){e.classList.add("display")},100))})});var i=s.length;e.addEventListener("click",function(){e.classList.remove("display"),setTimeout(function(){e.classList.remove("pre")},600)}),t.addEventListener("click",function(e){e.stopPropagation()}),document.addEventListener("keydown",function(e){var n=e.keyCode||e.which,o=s.indexOf(t.src);if(37==n){if(0==o)return void(t.src=s[i-1]);t.src=s[o-1]}if(39==n){if(o+1==i)return void(t.src=s[0]);t.src=s[o+1]}})}(),function(){var e=document.querySelector(".toggle"),t=document.querySelector(".main-nav"),n=document.querySelectorAll("li.parent"),s=document.querySelector(".header"),i=document.body,o=function(e){e.stopPropagation()},r=function(n){n.stopPropagation(),e.classList.toggle("transition"),i.classList.toggle("no-scroll"),s.offsetHeight>t.offsetHeight?s.setAttribute("style",""):s.style.height="100vh",t.classList.toggle("show")},a=function(){e.classList.remove("transition"),s.setAttribute("style",""),i.classList.remove("no-scroll"),t.classList.remove("show")};x(m,function(){e.removeEventListener("click",r),t.removeEventListener("click",o),window.removeEventListener("click",a)},function(){e.addEventListener("click",r),t.addEventListener("click",o),window.addEventListener("click",a)},!0),x(m,function(){n.forEach(function(e){var t=e.children[0],n=e.children[1],s=void 0;t.addEventListener("mouseover",function(t){t.preventDefault(),clearTimeout(s),!0!==e.classList.contains("show")&&e.classList.add("show")}),t.addEventListener("mouseleave",function(t){s=setTimeout(function(){e.classList.remove("show")},200)}),n.addEventListener("mouseover",function(){clearTimeout(s)}),n.addEventListener("mouseleave",function(){s=setTimeout(function(){e.classList.remove("show")},200)})})}),x(l,function(){var e=document.querySelector(".blog-sidebar"),t=document.querySelector(".blog-layout > div");if(null!==e){e.offsetWidth;var n=e.getBoundingClientRect(),i=t.getBoundingClientRect();window.addEventListener("scroll",function(){var t=window.scrollY;t+e.offsetHeight+s.offsetHeight+20>=i.bottom?(e.classList.add("pause"),e.classList.remove("sticky")):t+s.offsetHeight+20>=i.top?(e.style.width=e.offsetWidth+"px",e.style.top=s.offsetHeight+20+"px",e.style.left=n.left+"px",e.classList.add("sticky"),e.classList.remove("pause")):(e.classList.remove("sticky"),e.setAttribute("style",""))})}}),document.querySelector("[data-shiftr-carousel]")&&document.querySelector(".hero-carousel")&&(document.addEventListener("DOMContentLoaded",function(){setTimeout(function(){document.querySelector(".hero-carousel .content").classList.add("load")},800)}),document.querySelector(".hero-carousel").shiftrCarousel({pause_on_marker_hover:!1,speed:6e3}))}(),function(){function e(e){var t=e.lastIndexOf(" ");return e.slice(0,t)+e.slice(t).replace(" ","&nbsp;")}document.querySelectorAll("[data-orphan]").forEach(function(t){var n=t.innerHTML,s=[];n.indexOf("<br>")>=0&&n.indexOf(" ")>=0?(n.split("<br>").forEach(function(t){s.push(e(t))}),t.innerHTML=s.join("<br>")):n.indexOf(" ")>=0&&(t.innerHTML=e(n))})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9wb2x5ZmlsbC5qcyIsImFuaW1hdGUuanMiLCJjYXJvdXNlbC5qcyIsImZsb2F0ZXIuanMiLCJmb2xsb3dlci5qcyIsImluaXQuanMiLCJhY2NvcmRpb24uanMiLCJjb29raWUuanMiLCJmb3JtX2hhbmRsZXIuanMiLCJnYWxsZXJ5LmpzIiwiZ2VuZXJpYy5qcyIsImxhenlfbG9hZGVyLmpzIiwibWFwc19hcGlfbGF6eV9sb2FkZXIuanMiLCJvcnBoYW4uanMiLCJwb3B1cHMuanMiXSwibmFtZXMiOlsib25fbG9hZCIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJ2dyIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJ2aCIsImlubmVySGVpZ2h0IiwiT2JqZWN0IiwiYXNzaWduIiwiZGVmaW5lUHJvcGVydHkiLCJ2YWx1ZSIsInRhcmdldCIsInZhckFyZ3MiLCJUeXBlRXJyb3IiLCJ0byIsImluZGV4IiwibmV4dFNvdXJjZSIsIm5leHRLZXkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJ3cml0YWJsZSIsImNvbmZpZ3VyYWJsZSIsIkVsZW1lbnQiLCJhbmltYXRlU2Nyb2xsIiwiZHVyYXRpb24iLCJidWZmZXIiLCJxdWVyeVNlbGVjdG9yIiwib2Zmc2V0SGVpZ2h0Iiwic3RhcnRfcG9zIiwicGFnZVlPZmZzZXQiLCJkb2N1bWVudEVsZW1lbnQiLCJzY3JvbGxUb3AiLCJ0YXJnZXRfcG9zIiwidGhpcyIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInRvcCIsImRpc3RhbmNlIiwiY3VycmVudFRpbWUiLCJNYXRoIiwiZWFzZUluT3V0UXVhZCIsInQiLCJiIiwiYyIsImQiLCJhbmltYXRlX3Njcm9sbCIsInZhbCIsImJvZHkiLCJzZXRUaW1lb3V0Iiwic2hpZnRyQ2Fyb3VzZWwiLCJzZXR0aW5ncyIsImRlZmF1bHRzIiwiYXV0b3BsYXkiLCJzcGVlZCIsInRyYW5zaXRpb24iLCJzaG93X21hcmtlcnMiLCJwYXVzZV9vbl9tYXJrZXJfaG92ZXIiLCJpIiwia2V5cyIsIl8iLCJzdGFnZSIsImNoaWxkcmVuIiwicHJvcHMiLCJzdHlsZSIsImhlaWdodCIsInN0YWdlX21hcCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJhcHBlbmRDaGlsZCIsInBhdXNlX2xvb3AiLCJ0cmFuc2l0aW9uX2luX3Byb2dyZXNzIiwiZGF0YXNldCIsInNoaWZ0ckNhcm91c2VsUHJvcCIsInNoaWZ0ckNhcm91c2VsQWN0aXZlIiwibWFya2VyIiwiaW5uZXIiLCJzaGlmdHJDYXJvdXNlbE1hcmtlciIsIm1hcmtlcnMiLCJtYXAiLCJrZXkiLCJpbWFnZXMiLCJwdXNoIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJlbCIsIm5vZGVOYW1lIiwiZ2V0X2ltYWdlcyIsInRoZV9sb29wIiwiYWN0aXZlX3Byb3AiLCJnZXRfYWN0aXZlX3Byb3AiLCJhY3RpdmVfcHJvcF9pZCIsImdldF9hY3RpdmVfcHJvcF9pZCIsInJlbW92ZSIsInpJbmRleCIsIm5leHRfcHJvcCIsIm5leHRFbGVtZW50U2libGluZyIsIm5leHRfcHJvcF9pZCIsInBhcnNlSW50IiwibG9vcGluZyIsInJlc3RhcnQiLCJzdWJfaW1hZ2VzIiwiaGFzQXR0cmlidXRlIiwic3JjIiwidGhlX3Byb3AiLCJzZXRJbnRlcnZhbCIsInNlbGVjdGVkX3Byb3BfaWQiLCJjbGVhckludGVydmFsIiwiY2xlYXJUaW1lb3V0IiwiZmxvYXRlciIsImJvdW5kaW5nIiwicGFyZW50RWxlbWVudCIsImZsb2F0X2J1ZmZlciIsImhlYWRlciIsInN0YXJ0aW5nIiwiZW5kaW5nIiwiZXZlbnRzIiwicmVzaXplIiwib3JpZW50YXRpb25jaGFuZ2UiLCJmbG9hdGVyX3Bvc2l0aW9uIiwiYm91bmRpbmdfcG9zaXRpb24iLCJwb3NpdGlvbl90b3AiLCJzdGFydGluZ19wb2ludCIsImVuZGluZ19wb2ludCIsImZsb2F0X3Bvc2l0aW9uIiwiYWN0aW9uIiwic2Nyb2xsX3Bvc2l0aW9uIiwidHlwZSIsImxlZnQiLCJib3R0b20iLCJzZXRBdHRyaWJ1dGUiLCJ3aWR0aCIsIm9mZnNldFdpZHRoIiwiZm9sbG93ZXIiLCJzZWN0aW9ucyIsInNlY3Rpb25fcG9zaXRpb24iLCJsaW5rcyIsImxpbmsiLCJnZXRBdHRyaWJ1dGUiLCJ0YXJnZXRfcG9pbnQiLCJzZWN0aW9uIiwic2VjdGlvbl90b3AiLCJzZWN0aW9uX2JvdHRvbSIsImlkIiwic3Vic3RyaW5nIiwicyIsIm0iLCJsIiwieGwiLCJtYXgiLCJ4IiwiZm4iLCJjYWxsYmFjayIsInJ1bl9vbmNlIiwicnVuIiwiYWxsb3ciLCJzaW5nbGUiLCJwcmV2ZW50RGVmYXVsdCIsInRvZ2dsZSIsImNvb2tpZV9hY2NlcHRlciIsImdldEVsZW1lbnRCeUlkIiwic2hpZnRyX2Nvb2tpZV9ub3RpY2UiLCJjb29raWVfbmFtZSIsInNoaWZ0ciIsIm5hbWUiLCJyZXBsYWNlIiwidG9Mb3dlckNhc2UiLCJjb29raWUiLCJyZW1vdmVDaGlsZCIsImZvcm0iLCJ2YyIsImlucHV0cyIsImxpc3RlZCIsImRvX3ZhbGlkYXRpb24iLCJpbnB1dCIsIm1lc3NhZ2UiLCJpbm5lckhUTUwiLCJjbGVhcl92YWxpZGF0aW9uIiwibmV4dEVsIiwiaW5kZXhPZiIsInByZXZpb3VzRWxlbWVudFNpYmxpbmciLCJjbGFzc05hbWUiLCJjaGVja1ZhbGlkaXR5IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJjaGVja2VkIiwiZGF0YSIsIkZvcm1EYXRhIiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJvbmxvYWQiLCJzdGF0dXMiLCJjb25zb2xlIiwibG9nIiwicmVzcG9uc2VUZXh0IiwiX2RhdGEiLCJKU09OIiwicGFyc2UiLCJzZW50Iiwid3JhcCIsImhlYWRpbmciLCJjb250ZW50IiwiZXJyb3JfcmVmIiwiY2xvc2VyIiwiaCIsImVycm9yX2hlYWRpbmciLCJlcnJvcl9ib2R5Iiwic3VjY2Vzc19oZWFkaW5nIiwic3VjY2Vzc19ib2R5IiwiYXV0b19jbGVhciIsImNsZWFyX3N1Ym1pc3Npb24iLCJhdXRvX2NsZWFyX2RlbGF5IiwiZG9fc3VibWlzc2lvbiIsIm9uZXJyb3IiLCJhbGVydCIsInhocl9lcnJvciIsIm9wZW4iLCJhamF4Iiwic2VuZCIsInZpZXdlciIsInZpZXdlcl9pbWciLCJnYWxsZXJ5X2ltYWdlcyIsInNvdXJjZXMiLCJpbWFnZSIsImNvbnRhaW5zIiwiY291bnRlciIsInN0b3BQcm9wYWdhdGlvbiIsImtleUNvZGUiLCJ3aGljaCIsImN1cnJlbnRfcG9zaXRpb24iLCJuYXYiLCJzdWJfbmF2cyIsInN0b3AiLCJ0b2dnbGVfbWVudSIsInRvZ2dsZV93aW5kb3ciLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic3ViIiwibWVudSIsInJlbW92ZV9vcGVuIiwic2lkZWJhciIsImJsb2dfbGF5b3V0Iiwic2lkZWJhcl9wb3MiLCJibG9nX2xheW91dF9wb3MiLCJjdXJyX3BvcyIsInNjcm9sbFkiLCJub19vcnBoYW4iLCJzcGFjZSIsImxhc3RJbmRleE9mIiwic2xpY2UiLCJuZXdOb2RlIiwic3BsaXQiLCJub2RlIiwiam9pbiJdLCJtYXBwaW5ncyI6IkFBQUEsYUFrbUJBLFNBQVNBLFVBQ0lDLFVBQVVDLE9BQVMsUUFBc0JDLElBQWpCRixVQUFVLElBQW1CQSxVQUFVLEdBR3hFRyxTQUFTQyxpQkFBaUIsbUJBQW9CLFNBQVVDLE1BVTVELFNBQVNDLEtBQ0wsT0FBT0MsT0FBT0MsV0FHbEIsU0FBU0MsS0FDTCxPQUFPRixPQUFPRyxZQTFtQlUsbUJBQWpCQyxPQUFPQyxRQUdoQkQsT0FBT0UsZUFBZUYsT0FBUSxTQUFVLENBQ3RDRyxNQUFPLFNBQWdCQyxFQUFRQyxHQUk3QixHQUFjLE1BQVZELEVBRUYsTUFBTSxJQUFJRSxVQUFVLDhDQUt0QixJQUZBLElBQUlDLEVBQUtQLE9BQU9JLEdBRVBJLEVBQVEsRUFBR0EsRUFBUW5CLFVBQVVDLE9BQVFrQixJQUFTLENBQ3JELElBQUlDLEVBQWFwQixVQUFVbUIsR0FFM0IsR0FBa0Is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QVU1QyxNQWpDckMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbi8qICAvLy8vICAtLXwgICAgUG9seWZpbGxzXG5cbiAgICAqIFxuKi9cblxuLy8gT2JqZWN0LmFzc2lnblxuXG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9PYmplY3QvYXNzaWduXG5cbmlmICh0eXBlb2YgT2JqZWN0LmFzc2lnbiAhPSAnZnVuY3Rpb24nKSB7XG5cbiAgLy8gTXVzdCBiZSB3cml0YWJsZTogdHJ1ZSwgZW51bWVyYWJsZTogZmFsc2UsIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoT2JqZWN0LCBcImFzc2lnblwiLCB7XG4gICAgdmFsdWU6IGZ1bmN0aW9uIGFzc2lnbih0YXJnZXQsIHZhckFyZ3MpIHtcbiAgICAgIC8vIC5sZW5ndGggb2YgZnVuY3Rpb24gaXMgMlxuICAgICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgICBpZiAodGFyZ2V0ID09IG51bGwpIHtcbiAgICAgICAgLy8gVHlwZUVycm9yIGlmIHVuZGVmaW5lZCBvciBudWxsXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjb252ZXJ0IHVuZGVmaW5lZCBvciBudWxsIHRvIG9iamVjdCcpO1xuICAgICAgfVxuXG4gICAgICB2YXIgdG8gPSBPYmplY3QodGFyZ2V0KTtcblxuICAgICAgZm9yICh2YXIgaW5kZXggPSAxOyBpbmRleCA8IGFyZ3VtZW50cy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgdmFyIG5leHRTb3VyY2UgPSBhcmd1bWVudHNbaW5kZXhdO1xuXG4gICAgICAgIGlmIChuZXh0U291cmNlICE9IG51bGwpIHtcbiAgICAgICAgICAvLyBTa2lwIG92ZXIgaWYgdW5kZWZpbmVkIG9yIG51bGxcbiAgICAgICAgICBmb3IgKHZhciBuZXh0S2V5IGluIG5leHRTb3VyY2UpIHtcbiAgICAgICAgICAgIC8vIEF2b2lkIGJ1Z3Mgd2hlbiBoYXNPd25Qcm9wZXJ0eSBpcyBzaGFkb3dlZFxuICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChuZXh0U291cmNlLCBuZXh0S2V5KSkge1xuICAgICAgICAgICAgICB0b1tuZXh0S2V5XSA9IG5leHRTb3VyY2VbbmV4dEtleV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdG87XG4gICAgfSxcbiAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICBjb25maWd1cmFibGU6IHRydWVcbiAgfSk7XG59IiwiJ3VzZSBzdHJpY3QnO1xuXG4vKiAgLy8vLyAgLS18ICAgIEVsZW1lbnQucHJvdG90eXBlLmFuaW1hdGVTY3JvbGwoIGR1cmF0aW9uLCBidWZmZXIgKVxuXG4gICAgKiBTY3JvbGwgZG9jdW1lbnQgdG8gZWxlbWVudFxuKi9cblxuRWxlbWVudC5wcm90b3R5cGUuYW5pbWF0ZVNjcm9sbCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZHVyYXRpb24gPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IDEwMDA7XG4gICAgdmFyIGJ1ZmZlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogMDtcblxuXG4gICAgLy8gVXBkYXRlIGJ1ZmZlciB0byBpbmNsdWRlIGhlaWdodCBvZiBoZWFkZXJcbiAgICBidWZmZXIgKz0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcicpLm9mZnNldEhlaWdodDtcblxuICAgIHZhciBydW4gPSB0cnVlO1xuXG4gICAgLy8gU2V0dGluZ3NcbiAgICB2YXIgc3RhcnRfcG9zID0gd2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AsXG4gICAgICAgIHRhcmdldF9wb3MgPSB0aGlzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCArIHN0YXJ0X3BvcyxcbiAgICAgICAgZGlzdGFuY2UgPSB0YXJnZXRfcG9zIC0gc3RhcnRfcG9zLFxuICAgICAgICBkaXN0YW5jZSA9IGRpc3RhbmNlIC0gYnVmZmVyLFxuICAgICAgICBjdXJyZW50VGltZSA9IDAsXG4gICAgICAgIGluY3JlbWVudCA9IDE2LjY2O1xuXG4gICAgLy8gRG8gdGhlIGFuaW1hdGlvblxuICAgIHZhciBhbmltYXRlX3Njcm9sbCA9IGZ1bmN0aW9uIGFuaW1hdGVfc2Nyb2xsKCkge1xuXG4gICAgICAgIGlmIChydW4gPT09IGZhbHNlKSByZXR1cm47XG5cbiAgICAgICAgY3VycmVudFRpbWUgKz0gaW5jcmVtZW50O1xuXG4gICAgICAgIHZhciB2YWwgPSBNYXRoLmVhc2VJbk91dFF1YWQoY3VycmVudFRpbWUsIHN0YXJ0X3BvcywgZGlzdGFuY2UsIGR1cmF0aW9uKTtcblxuICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wID0gZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgPSB2YWw7XG5cbiAgICAgICAgaWYgKGN1cnJlbnRUaW1lIDwgZHVyYXRpb24pIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoYW5pbWF0ZV9zY3JvbGwsIGluY3JlbWVudCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gRWFzaW5nLi4uXG4gICAgTWF0aC5lYXNlSW5PdXRRdWFkID0gZnVuY3Rpb24gKHQsIGIsIGMsIGQpIHtcblxuICAgICAgICB0IC89IGQgLyAyO1xuXG4gICAgICAgIGlmICh0IDwgMSkgcmV0dXJuIGMgLyAyICogdCAqIHQgKyBiO1xuXG4gICAgICAgIHQtLTtcblxuICAgICAgICByZXR1cm4gLWMgLyAyICogKHQgKiAodCAtIDIpIC0gMSkgKyBiO1xuICAgIH07XG5cbiAgICAvLyBEbyBpbml0aWFsIGl0ZXJhdGlvblxuICAgIGFuaW1hdGVfc2Nyb2xsKCk7XG59OyIsIid1c2Ugc3RyaWN0JztcblxuLyogIC8vLy8gIC0tfCAgICBFbGVtZW50LnByb3RvdHlwZS5jYXJvdXNlbCggc2V0dGluZ3MgPSBPYmplY3QgKVxuXG4gICAgQHNpbmNlIDEuMFxuXG4gICAgQHBvbHlmaWxsczogT2JqZWN0LmFzc2lnblxuKi9cblxuRWxlbWVudC5wcm90b3R5cGUuc2hpZnRyQ2Fyb3VzZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNldHRpbmdzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcblxuXG4gICAgLy8gVGhlIGRlZmF1bHQgc2V0dGluZ3NcbiAgICB2YXIgZGVmYXVsdHMgPSB7XG4gICAgICAgIGF1dG9wbGF5OiB0cnVlLFxuICAgICAgICBzcGVlZDogNDAwMCxcbiAgICAgICAgdHJhbnNpdGlvbjogODAwLFxuICAgICAgICBzaG93X21hcmtlcnM6IHRydWUsXG4gICAgICAgIHBhdXNlX29uX21hcmtlcl9ob3ZlcjogdHJ1ZVxuICAgIH07XG5cbiAgICB2YXIgaSA9IDA7XG5cbiAgICAvLyBBc3NpZ24gc2V0dGluZ3MgYXMgZGVmYXVsdHMgaWYgc2V0dGluZ3MgYXJlIG5vdCBzZXRcbiAgICBpZiAoT2JqZWN0LmtleXMoc2V0dGluZ3MpLmxlbmd0aCA9PSAwKSBzZXR0aW5ncyA9IGRlZmF1bHRzO1xuXG4gICAgLy8gT3ZlcnJpZGUgdGhlIGRlZmF1bHRzIHdpdGggYW55IGRlZmluZWQgc2V0dGluZ3NcbiAgICB2YXIgXyA9IE9iamVjdC5hc3NpZ24oZGVmYXVsdHMsIHNldHRpbmdzKTtcblxuICAgIC8vIFRoZSBtYWluIGNhcm91c2VsIGVsZW1lbnRzXG4gICAgdmFyIGNhcm91c2VsID0gdGhpcyxcbiAgICAgICAgc3RhZ2UgPSB0aGlzLmNoaWxkcmVuWzBdLFxuICAgICAgICBwcm9wcyA9IHRoaXMuY2hpbGRyZW5bMF0uY2hpbGRyZW47XG5cbiAgICAvLyBTZXQgdGhlIHN0YWdlIGhpZWdodCBiYXNlZCBvZmYgb2Zmc2V0SGVpZ2h0IG9mIGZpcnN0IHByb3BcbiAgICBzdGFnZS5zdHlsZS5oZWlnaHQgPSBwcm9wc1swXS5vZmZzZXRIZWlnaHQgKyAncHgnO1xuXG4gICAgLy8gQ3JlYXRlIHRoZSBuYXZpZ2F0aW9uXG4gICAgdmFyIHN0YWdlX21hcCA9IHZvaWQgMDtcbiAgICBpZiAoc2hvd19tYXJrZXJzKCkpIHtcbiAgICAgICAgc3RhZ2VfbWFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHN0YWdlX21hcC5jbGFzc0xpc3QuYWRkKCdzdGFnZS1tYXAnKTtcblxuICAgICAgICBjYXJvdXNlbC5hcHBlbmRDaGlsZChzdGFnZV9tYXApO1xuICAgIH1cblxuICAgIC8vIFRoZSBwYXVzZSB2YXJpYWJsZVxuICAgIHZhciBwYXVzZV9sb29wID0gZmFsc2UsXG4gICAgICAgIHRyYW5zaXRpb25faW5fcHJvZ3Jlc3MgPSBmYWxzZTtcblxuICAgIC8vIEluaXQgdGhlIENhcm91c2VsXG4gICAgZm9yIChpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgLy8gTWFpbiBDYXJvdXNlbCBkYXRhXG4gICAgICAgIHByb3BzW2ldLmRhdGFzZXQuc2hpZnRyQ2Fyb3VzZWxQcm9wID0gaTtcbiAgICAgICAgcHJvcHNbaV0uZGF0YXNldC5zaGlmdHJDYXJvdXNlbEFjdGl2ZSA9ICdmYWxzZSc7XG5cbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBtYXJrZXJzXG4gICAgICAgIGlmIChzaG93X21hcmtlcnMoKSkge1xuICAgICAgICAgICAgdmFyIG1hcmtlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLFxuICAgICAgICAgICAgICAgIGlubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuXG4gICAgICAgICAgICBtYXJrZXIuZGF0YXNldC5zaGlmdHJDYXJvdXNlbE1hcmtlciA9IGk7XG5cbiAgICAgICAgICAgIC8vIEFkZCBtYXJrZXIgdG8gbmF2aWdhdGlvbiBlbGVtZW50XG4gICAgICAgICAgICBtYXJrZXIuYXBwZW5kQ2hpbGQoaW5uZXIpO1xuICAgICAgICAgICAgc3RhZ2VfbWFwLmFwcGVuZENoaWxkKG1hcmtlcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBBc3NpZ24gbWFya2VycyBhZnRlciBjcmVhdGlvblxuICAgIHZhciBtYXJrZXJzID0gdm9pZCAwO1xuICAgIGlmIChzaG93X21hcmtlcnMoKSkge1xuICAgICAgICBtYXJrZXJzID0gT2JqZWN0LmtleXMoc3RhZ2VfbWFwLmNoaWxkcmVuKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgcmV0dXJuIHN0YWdlX21hcC5jaGlsZHJlbltrZXldO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBTZXQtdXAgZmlyc3QgcHJvcCBhbmQgbWFya2VyXG4gICAgcHJvcHNbMF0uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgcHJvcHNbMF0uZGF0YXNldC5zaGlmdHJDYXJvdXNlbEFjdGl2ZSA9ICd0cnVlJztcblxuICAgIGlmIChzaG93X21hcmtlcnMoKSkge1xuICAgICAgICBtYXJrZXJzWzBdLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgIH1cblxuICAgIC8vIEdldCBhbGwgZWxlbWVudHMgaW4gdGhlIHByb3BcbiAgICB2YXIgaW1hZ2VzID0gW107XG4gICAgZm9yIChpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgaW1hZ2VzLnB1c2goW10pO1xuXG4gICAgICAgIHZhciBwcm9wX2VsZW1lbnRzID0gcHJvcHNbaV0ucXVlcnlTZWxlY3RvckFsbCgnKicpO1xuXG4gICAgICAgIHByb3BfZWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcblxuICAgICAgICAgICAgaWYgKGVsLm5vZGVOYW1lID09ICdJTUcnKSB7XG4gICAgICAgICAgICAgICAgaW1hZ2VzW2ldLnB1c2goZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBHZXQgdGhlIGZpcnN0IGFuZCBzZWNvbmQgcHJvcCBpbWFnZXNcbiAgICBpZiAoaW1hZ2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZ2V0X2ltYWdlcyhpbWFnZXNbMF0pO1xuICAgIH1cblxuICAgIGlmIChpbWFnZXMubGVuZ3RoID4gMSkge1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBnZXRfaW1hZ2VzKGltYWdlc1sxXSk7XG4gICAgICAgIH0sIF8uc3BlZWQgLyAyKTtcbiAgICB9XG5cbiAgICAvLyBUaGUgbWFpbiBsb29wXG4gICAgdmFyIHRoZV9sb29wID0gZnVuY3Rpb24gdGhlX2xvb3AoKSB7XG5cbiAgICAgICAgLy8gUGF1c2Ugb24gaG92ZXJcbiAgICAgICAgaWYgKHBhdXNlX2xvb3ApIHJldHVybiBmYWxzZTtcblxuICAgICAgICAvLyBFYXJseSBleGl0IGlmIHRyYW5zaXRpb24gaXMgaW4gcHJvZ3Jlc3NcbiAgICAgICAgaWYgKHRyYW5zaXRpb25faW5fcHJvZ3Jlc3MpIHJldHVybiBmYWxzZTtcblxuICAgICAgICAvLyBEZWZpbmUgdHJhbnNpdGlvbiBzdGFydFxuICAgICAgICB0cmFuc2l0aW9uX2luX3Byb2dyZXNzID0gdHJ1ZTtcblxuICAgICAgICAvLyBHZXQgaW5mbyBvZiBhY3RpdmUgcHJvcFxuICAgICAgICB2YXIgYWN0aXZlX3Byb3AgPSBnZXRfYWN0aXZlX3Byb3AoKSxcbiAgICAgICAgICAgIGFjdGl2ZV9wcm9wX2lkID0gZ2V0X2FjdGl2ZV9wcm9wX2lkKGFjdGl2ZV9wcm9wKTtcblxuICAgICAgICAvLyBSZW1vdmUgYWN0aXZlIG1hcmtlclxuICAgICAgICBpZiAoc2hvd19tYXJrZXJzKCkpIHtcbiAgICAgICAgICAgIG1hcmtlcnNbYWN0aXZlX3Byb3BfaWRdLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgb24gdGhlIGxhc3QgcHJvcFxuICAgICAgICBpZiAoYWN0aXZlX3Byb3BfaWQgPT0gcHJvcHMubGVuZ3RoIC0gMSkge1xuXG4gICAgICAgICAgICAvLyBTZXQgbmV3IHByb3BcbiAgICAgICAgICAgIHByb3BzWzBdLnN0eWxlLnpJbmRleCA9IDE1MDtcbiAgICAgICAgICAgIHByb3BzWzBdLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgcHJvcHNbMF0uZGF0YXNldC5zaGlmdHJDYXJvdXNlbEFjdGl2ZSA9ICd0cnVlJztcblxuICAgICAgICAgICAgaWYgKHNob3dfbWFya2VycygpKSB7XG4gICAgICAgICAgICAgICAgbWFya2Vyc1swXS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcHJvcHNbMF0uc3R5bGUuekluZGV4ID0gJyc7XG4gICAgICAgICAgICB9LCBfLnRyYW5zaXRpb24pO1xuXG4gICAgICAgICAgICAvLyBTdGFuZGFyZCBzd2l0Y2hcbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgdmFyIG5leHRfcHJvcCA9IGFjdGl2ZV9wcm9wLm5leHRFbGVtZW50U2libGluZyxcbiAgICAgICAgICAgICAgICBuZXh0X3Byb3BfaWQgPSBwYXJzZUludChuZXh0X3Byb3AuZGF0YXNldC5zaGlmdHJDYXJvdXNlbFByb3AsIDEwKTtcblxuICAgICAgICAgICAgbmV4dF9wcm9wLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgbmV4dF9wcm9wLmRhdGFzZXQuc2hpZnRyQ2Fyb3VzZWxBY3RpdmUgPSAndHJ1ZSc7XG5cbiAgICAgICAgICAgIGlmIChzaG93X21hcmtlcnMoKSkge1xuICAgICAgICAgICAgICAgIG1hcmtlcnNbbmV4dF9wcm9wX2lkXS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGFjdGl2ZV9wcm9wX2lkID09IHByb3BzLmxlbmd0aCAtIDIpIHtcbiAgICAgICAgICAgICAgICAvLyBBbGwgcHJvcCBpbWFnZXMgc2hvdWxkIGhhdmUgbG9hZGVkLi4uXG4gICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgaWYgKGltYWdlc1tuZXh0X3Byb3BfaWQgKyAxXSkge1xuICAgICAgICAgICAgICAgICAgICBnZXRfaW1hZ2VzKGltYWdlc1tuZXh0X3Byb3BfaWQgKyAxXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmVtb3ZlIGFjdGl2ZSBwcm9wXG4gICAgICAgIGFjdGl2ZV9wcm9wLmRhdGFzZXQuc2hpZnRyQ2Fyb3VzZWxBY3RpdmUgPSAnZmFsc2UnO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGFjdGl2ZV9wcm9wLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuXG4gICAgICAgICAgICAvLyBEZWZpbmUgdHJhbnNpdGlvbiBlbmRcbiAgICAgICAgICAgIHRyYW5zaXRpb25faW5fcHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICAgICAgfSwgXy50cmFuc2l0aW9uKTtcbiAgICB9O1xuXG4gICAgdmFyIGxvb3BpbmcgPSB2b2lkIDAsXG4gICAgICAgIHJlc3RhcnQgPSB2b2lkIDA7XG5cbiAgICBpZiAoXy5hdXRvcGxheSkge1xuICAgICAgICBsb29waW5nID0gc2V0SW50ZXJ2YWwodGhlX2xvb3AsIF8uc3BlZWQpO1xuICAgIH1cblxuICAgIGlmIChzaG93X21hcmtlcnMoKSkge1xuXG4gICAgICAgIG1hcmtlcnMuZm9yRWFjaChmdW5jdGlvbiAobWFya2VyKSB7XG5cbiAgICAgICAgICAgIG1hcmtlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIC8vIEVhcmx5IGV4aXQgaWYgdHJhbnNpdGlvbiBpcyBpbiBwcm9ncmVzc1xuICAgICAgICAgICAgICAgIGlmICh0cmFuc2l0aW9uX2luX3Byb2dyZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhdXNlX2xvb3AgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIGFjdGl2ZV9wcm9wIGFuZCBhY3RpdmVfcHJvcF9pZCBhcmUgY29yZWN0XG4gICAgICAgICAgICAgICAgdmFyIGFjdGl2ZV9wcm9wID0gZ2V0X2FjdGl2ZV9wcm9wKCksXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZV9wcm9wX2lkID0gZ2V0X2FjdGl2ZV9wcm9wX2lkKGFjdGl2ZV9wcm9wKTtcblxuICAgICAgICAgICAgICAgIC8vIElzc3VlcyB3aXRoIHNlbGVjdGVkX3Byb3BcbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRfcHJvcCA9IHByb3BzW21hcmtlci5kYXRhc2V0LnNoaWZ0ckNhcm91c2VsTWFya2VyXSxcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRfcHJvcF9pZCA9IG1hcmtlci5kYXRhc2V0LnNoaWZ0ckNhcm91c2VsTWFya2VyO1xuXG4gICAgICAgICAgICAgICAgLy8gVHVybiBvZmYgcGF1c2UgdG8gYWxsb3cgY2hhbmdlXG4gICAgICAgICAgICAgICAgcGF1c2VfbG9vcCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgLy8gU3RvcCBjdXJyZW50IGFjdGlvbnNcbiAgICAgICAgICAgICAgICBpZiAoXy5hdXRvcGxheSkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGxvb3BpbmcpO1xuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQocmVzdGFydCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGFjdGl2ZV9wcm9wX2lkICE9IHNlbGVjdGVkX3Byb3BfaWQpIHtcblxuICAgICAgICAgICAgICAgICAgICAvLyBEZWZpbmUgdHJhbnNpdGlvbiBzdGFydFxuICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uX2luX3Byb2dyZXNzID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgYWN0aXZlIHByb3BzXG4gICAgICAgICAgICAgICAgICAgIG1hcmtlcnNbYWN0aXZlX3Byb3BfaWRdLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFNldCBwcm9wXG4gICAgICAgICAgICAgICAgICAgIHByb3BzW3NlbGVjdGVkX3Byb3BfaWRdLnN0eWxlLnpJbmRleCA9IDE1MDtcbiAgICAgICAgICAgICAgICAgICAgcHJvcHNbc2VsZWN0ZWRfcHJvcF9pZF0uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgIHByb3BzW3NlbGVjdGVkX3Byb3BfaWRdLmRhdGFzZXQuc2hpZnRyQ2Fyb3VzZWxBY3RpdmUgPSAndHJ1ZSc7XG5cbiAgICAgICAgICAgICAgICAgICAgbWFya2Vyc1tzZWxlY3RlZF9wcm9wX2lkXS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBDb250aW51ZSByZW1vdmVcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlX3Byb3AuZGF0YXNldC5zaGlmdHJDYXJvdXNlbEFjdGl2ZSA9ICdmYWxzZSc7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlX3Byb3AuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wc1tzZWxlY3RlZF9wcm9wX2lkXS5zdHlsZS56SW5kZXggPSAnJztcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGVmaW5lIHRyYW5zaXRpb24gZW5kXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uX2luX3Byb2dyZXNzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH0sIF8udHJhbnNpdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gUmVzdGFydCBsb29wLCBpZiBwYXVzZWRcbiAgICAgICAgICAgICAgICBpZiAoXy5hdXRvcGxheSkge1xuICAgICAgICAgICAgICAgICAgICByZXN0YXJ0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb29waW5nID0gc2V0SW50ZXJ2YWwodGhlX2xvb3AsIF8uc3BlZWQpO1xuICAgICAgICAgICAgICAgICAgICB9LCBfLnNwZWVkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbWFya2VyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIC8vIHdhcyB1c2luZyBhY3RpdmVfcHJvcCBpbnN0ZWFkIG9mIHNlbGVjdGVkX3Byb3BcbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRfcHJvcCA9IHByb3BzW21hcmtlci5kYXRhc2V0LnNoaWZ0ckNhcm91c2VsTWFya2VyXSxcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRfcHJvcF9pZCA9IG1hcmtlci5kYXRhc2V0LnNoaWZ0ckNhcm91c2VsTWFya2VyO1xuXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyggc2VsZWN0ZWRfcHJvcCApO1xuXG4gICAgICAgICAgICAgICAgaWYgKF8ucGF1c2Vfb25fbWFya2VyX2hvdmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhdXNlX2xvb3AgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSBhbGwgcHJvcCBpbWFnZXMgaGF2ZSBsb2FkZWRcbiAgICAgICAgICAgICAgICBpZiAoaW1hZ2VzW3NlbGVjdGVkX3Byb3BfaWRdKSB7XG4gICAgICAgICAgICAgICAgICAgIGdldF9pbWFnZXMoaW1hZ2VzW3NlbGVjdGVkX3Byb3BfaWRdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbWFya2VyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICBwYXVzZV9sb29wID0gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gR2V0IGltYWdlc1xuICAgIGZ1bmN0aW9uIGdldF9pbWFnZXMoc3ViX2ltYWdlcykge1xuXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBzdWJfaW1hZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoc3ViX2ltYWdlc1tpXS5oYXNBdHRyaWJ1dGUoJ3NyYycpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHN1Yl9pbWFnZXNbaV0uc3JjID0gc3ViX2ltYWdlc1tpXS5kYXRhc2V0LnNyYztcbiAgICAgICAgICAgICAgICBzdWJfaW1hZ2VzW2ldLmRhdGFzZXQuc3JjID0gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBHZXQgZGF0YSBvbiB0aGUgYWN0aXZlIHByb3BcbiAgICBmdW5jdGlvbiBnZXRfYWN0aXZlX3Byb3AoKSB7XG5cbiAgICAgICAgdmFyIHRoZV9wcm9wID0gdm9pZCAwO1xuXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHByb3BzW2ldLmRhdGFzZXQuc2hpZnRyQ2Fyb3VzZWxBY3RpdmUgPT0gJ3RydWUnKSB7XG4gICAgICAgICAgICAgICAgdGhlX3Byb3AgPSBwcm9wc1tpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGVfcHJvcDtcbiAgICB9XG5cbiAgICAvLyBHZXQgYWN0aXZlIHByb3AgaWRcbiAgICBmdW5jdGlvbiBnZXRfYWN0aXZlX3Byb3BfaWQodGhlX3Byb3ApIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlSW50KHRoZV9wcm9wLmRhdGFzZXQuc2hpZnRyQ2Fyb3VzZWxQcm9wLCAxMCk7XG4gICAgfVxuXG4gICAgLy8gVG9nZ2xlIGZvciBtYXJrZXJzXG4gICAgZnVuY3Rpb24gc2hvd19tYXJrZXJzKCkge1xuICAgICAgICBpZiAoXy5zaG93X21hcmtlcnMpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxufTsiLCIndXNlIHN0cmljdCc7XG5cbi8qICBFbGVtZW50LnByb3RvdHlwZS5mbG9hdGVyXG4gKlxuICogIEBzaW5jZSAxLjBcbiAqXG4gKiAgQHBhcmFtIHNldHRpbmdzIE9iamVjdCBUaGUgc2V0dGluZ3MgZm9yIHRoZSBmbG9hdGVyIHRhcmdldCBlbGVtZW50XG4gKiAgQHBvbHlmaWxsIE9iamVjdC5hc3NpZ25cbiAqXG4gKi9cblxuRWxlbWVudC5wcm90b3R5cGUuZmxvYXRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2V0dGluZ3MgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuXG5cbiAgICAvLyBUaGUgZGVmYXVsdCBzZXR0aW5nc1xuICAgIHZhciBkZWZhdWx0cyA9IHtcbiAgICAgICAgYm91bmRpbmc6IHRoaXMucGFyZW50RWxlbWVudCwgLy8gRWxlbWVudFxuICAgICAgICBmbG9hdF9idWZmZXI6IDAsIC8vIEludGVnYXJcbiAgICAgICAgaGVhZGVyOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyJyksIC8vIEVsZW1lbnR8bnVsbFxuICAgICAgICBzdGFydGluZzogbnVsbCwgLy8gbnVsbHxFbGVtZW50XG4gICAgICAgIGVuZGluZzogbnVsbCxcbiAgICAgICAgZXZlbnRzOiB7XG4gICAgICAgICAgICByZXNpemU6IHdpbmRvdyxcbiAgICAgICAgICAgIG9yaWVudGF0aW9uY2hhbmdlOiB3aW5kb3dcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBBc3NpZ24gc2V0dGluZ3MgYXMgZGVmYXVsdHMgaWYgc2V0dGluZ3MgYXJlIG5vdCBzZXRcbiAgICBpZiAoT2JqZWN0LmtleXMoc2V0dGluZ3MpLmxlbmd0aCA9PSAwKSBzZXR0aW5ncyA9IGRlZmF1bHRzO1xuXG4gICAgLy8gT3ZlcnJpZGUgdGhlIGRlZmF1bHRzIHdpdGggYW55IGRlZmluZWQgc2V0dGluZ3NcbiAgICB2YXIgXyA9IE9iamVjdC5hc3NpZ24oZGVmYXVsdHMsIHNldHRpbmdzKTtcblxuICAgIC8vIEdsb2JhbCB2YXJpYWJsZXNcbiAgICB2YXIgZmxvYXRlciA9IHRoaXMsXG4gICAgICAgIGJvdW5kaW5nID0gXy5ib3VuZGluZyxcbiAgICAgICAgZmxvYXRlcl9wb3NpdGlvbixcbiAgICAgICAgZmxvYXRlcl9sZWZ0LFxuICAgICAgICBib3VuZGluZ19wb3NpdGlvbixcbiAgICAgICAgYm91bmRpbmdfdG9wLFxuICAgICAgICBib3VuZGluZ19ib3R0b20sXG4gICAgICAgIGZsb2F0X3Bvc2l0aW9uID0gXy5mbG9hdF9idWZmZXIsXG4gICAgICAgIHBvc2l0aW9uX3RvcCxcbiAgICAgICAgcG9zaXRpb25fYm90dG9tLFxuICAgICAgICBzdGFydGluZ19wb2ludCxcbiAgICAgICAgZW5kaW5nX3BvaW50O1xuXG4gICAgLy8gQ2hlY2sgaWYgaGVhZGVyIGhlaWdodCBzaG91bGQgYmUgaW5jbHVkZWQgaW4gZmxvYXRfcG9zaXRpb25cbiAgICBpZiAoXy5oZWFkZXIpIGZsb2F0X3Bvc2l0aW9uICs9IF8uaGVhZGVyLm9mZnNldEhlaWdodDtcblxuICAgIC8vIFRoZSBjb3JlIGZ1bmN0aW9uIHRoYXQgZXZlbnQgbGlzdGVuZXJzIGFyZSBhcHBlbmRlZCB0b1xuICAgIHZhciBhY3Rpb24gPSBmdW5jdGlvbiBhY3Rpb24oZSkge1xuXG4gICAgICAgIC8vIEdldCB0aGUgY3VycmVudCBzY3JvbGwgcG9zaXRpb25cbiAgICAgICAgdmFyIHNjcm9sbF9wb3NpdGlvbiA9IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wO1xuXG4gICAgICAgIC8vIFdlIGRvIG5vdCB3YW50IHRvIHJlZGVmaW5lIHRoZSBmb2xsb3dpbmcgb24gYSBzY3JvbGxcbiAgICAgICAgaWYgKGUudHlwZSAhPSAnc2Nyb2xsJykge1xuXG4gICAgICAgICAgICBmbG9hdGVyX3Bvc2l0aW9uID0gZmxvYXRlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIGJvdW5kaW5nX3Bvc2l0aW9uID0gYm91bmRpbmcuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICAgICAgICAgIGZsb2F0ZXJfbGVmdCA9IGZsb2F0ZXJfcG9zaXRpb24ubGVmdDtcblxuICAgICAgICAgICAgaWYgKF8uc3RhcnRpbmcgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBzdGFydGluZ19wb2ludCA9IF8uc3RhcnRpbmcuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wICsgc2Nyb2xsX3Bvc2l0aW9uO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzdGFydGluZ19wb2ludCA9IGJvdW5kaW5nX3Bvc2l0aW9uLnRvcCArIHNjcm9sbF9wb3NpdGlvbjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKF8uZW5kaW5nICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgZW5kaW5nX3BvaW50ID0gXy5lbmRpbmcuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuYm90dG9tICsgc2Nyb2xsX3Bvc2l0aW9uO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbmRpbmdfcG9pbnQgPSBib3VuZGluZ19wb3NpdGlvbi5ib3R0b20gKyBzY3JvbGxfcG9zaXRpb247XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZXR1cCB0aGUgc3RhcnRpbmcgYW5kIGVuZGluZyBwb2ludHMgaW5jbHVkaW5nIGJ1ZmZlciBhcmVhc1xuICAgICAgICBwb3NpdGlvbl90b3AgPSBzY3JvbGxfcG9zaXRpb24gKyBmbG9hdF9wb3NpdGlvbjtcbiAgICAgICAgcG9zaXRpb25fYm90dG9tID0gc2Nyb2xsX3Bvc2l0aW9uICsgZmxvYXRfcG9zaXRpb24gKyBmbG9hdGVyLm9mZnNldEhlaWdodDtcblxuICAgICAgICAvLyBEZWNpZGUgd2hhdCBzdGF0ZSB0aGUgZmxvYXRlciBzaG91bGQgYmUgaW4gYmFzZWQgb24gc2Nyb2xsIHBvc2l0aW9uLi4uXG4gICAgICAgIGlmIChwb3NpdGlvbl9ib3R0b20gPj0gZW5kaW5nX3BvaW50KSB7XG4gICAgICAgICAgICBmbG9hdGVyLmNsYXNzTGlzdC5hZGQoJ3BhdXNlJyk7XG4gICAgICAgICAgICBmbG9hdGVyLmNsYXNzTGlzdC5yZW1vdmUoJ3N0aWNreScpO1xuICAgICAgICAgICAgZmxvYXRlci5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJycpO1xuICAgICAgICB9IGVsc2UgaWYgKHBvc2l0aW9uX3RvcCA+PSBzdGFydGluZ19wb2ludCkge1xuICAgICAgICAgICAgZmxvYXRlci5zdHlsZS53aWR0aCA9IGJvdW5kaW5nLm9mZnNldFdpZHRoICsgJ3B4JztcbiAgICAgICAgICAgIGZsb2F0ZXIuc3R5bGUudG9wID0gZmxvYXRfcG9zaXRpb24gKyAncHgnO1xuICAgICAgICAgICAgZmxvYXRlci5zdHlsZS5sZWZ0ID0gYm91bmRpbmdfcG9zaXRpb24ubGVmdCArICdweCc7XG4gICAgICAgICAgICBmbG9hdGVyLmNsYXNzTGlzdC5hZGQoJ3N0aWNreScpO1xuICAgICAgICAgICAgZmxvYXRlci5jbGFzc0xpc3QucmVtb3ZlKCdwYXVzZScpO1xuICAgICAgICB9IGVsc2UgaWYgKHBvc2l0aW9uX3RvcCA8PSBzdGFydGluZ19wb2ludCkge1xuICAgICAgICAgICAgZmxvYXRlci5jbGFzc0xpc3QucmVtb3ZlKCdzdGlja3knKTtcbiAgICAgICAgICAgIGZsb2F0ZXIuc2V0QXR0cmlidXRlKCdzdHlsZScsICcnKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBUaGUgZXZlbnQgbGlzdGVuZXJzLi4uXG4gICAgT2JqZWN0LmtleXMoXy5ldmVudHMpLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgXy5ldmVudHNbZV0uYWRkRXZlbnRMaXN0ZW5lcihlLCBhY3Rpb24pO1xuICAgIH0pO1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGFjdGlvbik7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGFjdGlvbik7XG59OyIsIid1c2Ugc3RyaWN0JztcblxuLyogIEVsZW1lbnQucHJvdG90eXBlLmZvbGxvd2VyXG4gKlxuICogIEBzaW5jZSAxLjBcbiAqXG4gKiAgQHBhcmFtIHNldHRpbmdzIE9iamVjdCBUaGUgc2V0dGluZ3MgZm9yIHRoZSBmbG9hdGVyIHRhcmdldCBlbGVtZW50XG4gKiAgQHBvbHlmaWxsIE9iamVjdC5hc3NpZ25cbiAqXG4gKi9cblxuRWxlbWVudC5wcm90b3R5cGUuZm9sbG93ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNldHRpbmdzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcblxuXG4gICAgLy8gVGhlIGRlZmF1bHQgc2V0dGluZ3NcbiAgICB2YXIgZGVmYXVsdHMgPSB7XG4gICAgICAgIHNlY3Rpb25zOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdzZWN0aW9uJylcbiAgICB9O1xuXG4gICAgLy8gQXNzaWduIHNldHRpbmdzIGFzIGRlZmF1bHRzIGlmIHNldHRpbmdzIGFyZSBub3Qgc2V0XG4gICAgaWYgKE9iamVjdC5rZXlzKHNldHRpbmdzKS5sZW5ndGggPT0gMCkgc2V0dGluZ3MgPSBkZWZhdWx0cztcblxuICAgIC8vIE92ZXJyaWRlIHRoZSBkZWZhdWx0cyB3aXRoIGFueSBkZWZpbmVkIHNldHRpbmdzXG4gICAgdmFyIF8gPSBPYmplY3QuYXNzaWduKGRlZmF1bHRzLCBzZXR0aW5ncyk7XG5cbiAgICAvLyBHbG9iYWwgdmFyaWFibGVzXG4gICAgdmFyIG5hdiA9IHRoaXMsXG4gICAgICAgIGxpbmtzID0gdGhpcy5xdWVyeVNlbGVjdG9yQWxsKCdzcGFuJyksXG4gICAgICAgIHNlY3Rpb25zID0gXy5zZWN0aW9ucyxcbiAgICAgICAgc2VjdGlvbl9wb3NpdGlvbixcbiAgICAgICAgc2VjdGlvbl9pZCxcbiAgICAgICAgc2VjdGlvbl90b3AsXG4gICAgICAgIHNlY3Rpb25fYm90dG9tO1xuXG4gICAgbGlua3MuZm9yRWFjaChmdW5jdGlvbiAobGluaykge1xuXG4gICAgICAgIGxpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGxpbmsuZ2V0QXR0cmlidXRlKCdkYXRhLW9uLXBhZ2UtbGluaycpKS5hbmltYXRlU2Nyb2xsKCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgdmFyIGFjdGlvbiA9IGZ1bmN0aW9uIGFjdGlvbihlKSB7XG5cbiAgICAgICAgLy8gR2V0IHRoZSBjdXJyZW50IHNjcm9sbCBwb3NpdGlvblxuICAgICAgICB2YXIgc2Nyb2xsX3Bvc2l0aW9uID0gd2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AsXG4gICAgICAgICAgICB0YXJnZXRfcG9pbnQgPSBzY3JvbGxfcG9zaXRpb24gKyB2aCgpIC8gMjtcblxuICAgICAgICBzZWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChzZWN0aW9uKSB7XG5cbiAgICAgICAgICAgIGlmIChlLnR5cGUgIT0gJ3Njcm9sbCcpIHtcblxuICAgICAgICAgICAgICAgIHNlY3Rpb25fcG9zaXRpb24gPSBzZWN0aW9uLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgICAgICAgICAgICAgc2VjdGlvbl90b3AgPSBzZWN0aW9uX3Bvc2l0aW9uLnRvcCArIHNjcm9sbF9wb3NpdGlvbjtcbiAgICAgICAgICAgICAgICBzZWN0aW9uX2JvdHRvbSA9IHNlY3Rpb25fcG9zaXRpb24uYm90dG9tICsgc2Nyb2xsX3Bvc2l0aW9uO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgaWQgPSBzZWN0aW9uLmdldEF0dHJpYnV0ZSgnaWQnKS5zdWJzdHJpbmcoOCksXG4gICAgICAgICAgICAgICAgc2VjdGlvbl90b3AgPSBzZWN0aW9uLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCArIHNjcm9sbF9wb3NpdGlvbixcbiAgICAgICAgICAgICAgICBzZWN0aW9uX2JvdHRvbSA9IHNlY3Rpb24uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuYm90dG9tICsgc2Nyb2xsX3Bvc2l0aW9uO1xuXG4gICAgICAgICAgICBpZiAodGFyZ2V0X3BvaW50ID4gc2VjdGlvbl90b3AgJiYgdGFyZ2V0X3BvaW50IDwgc2VjdGlvbl9ib3R0b20pIHtcblxuICAgICAgICAgICAgICAgIGxpbmtzW2lkIC0gMV0uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgbGlua3NbaWQgLSAxXS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBhY3Rpb24pO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBhY3Rpb24pO1xufTsiLCIndXNlIHN0cmljdCc7XG5cbi8qICBcbiAgICAvLy8vICAtLXwgICAgSU5JVCBKU1xuXG4gICAgKiBTZXQtdXAgSmF2YVNjcmlwdFxuKi9cblxuZnVuY3Rpb24gb25fbG9hZCgpIHtcblx0XHRcdFx0dmFyIGZuID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBmdW5jdGlvbiAoZSkge307XG5cblxuXHRcdFx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKGUpIHtcblx0XHRcdFx0XHRcdFx0XHRmbjtcblx0XHRcdFx0fSk7XG59XG5cbi8qICAvLy8vICAtLXwgICAgUmV0dXJuIHdpbmRvdyBzaXplXG5cbiAgICAqIFR3aW4gZnVuY3Rpb25zLCBvbmUgZm9yIHdpZHRoIGFuZCBhbm90aGVyIGZvciBoZWlnaHRcbiovXG5cbmZ1bmN0aW9uIHZ3KCkge1xuXHRcdFx0XHRyZXR1cm4gd2luZG93LmlubmVyV2lkdGg7XG59XG5cbmZ1bmN0aW9uIHZoKCkge1xuXHRcdFx0XHRyZXR1cm4gd2luZG93LmlubmVySGVpZ2h0O1xufVxuXG4vKiAgLy8vLyAgLS18ICAgIFdpZHRoIEJyZWFrcG9pbnQgLSB0aGUgSlMgZXF1aXZpbGFudCB0byBDU1MgbWVkaWEgcXVlcmllc1xuXG4gICAgKiBFbnN1cmUgYnJlYWtwb2ludCBzZXR0aW5ncyBtYXRjaCB0aG9zZSBzZXQgaW4gdGhlIHN0eWxlc1xuKi9cblxudmFyIHMgPSAncyc7XG52YXIgbSA9ICdtJztcbnZhciBsID0gJ2wnO1xudmFyIHhsID0gJ3hsJztcbnZhciBtYXggPSAnbWF4JztcblxuZnVuY3Rpb24geCh3aWR0aCwgZm4pIHtcblx0XHRcdFx0dmFyIGNhbGxiYWNrID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBmdW5jdGlvbiAoKSB7fTtcblx0XHRcdFx0dmFyIHJ1bl9vbmNlID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiBmYWxzZTtcblxuXG5cdFx0XHRcdHZhciB2YWx1ZTtcblxuXHRcdFx0XHRzd2l0Y2ggKHdpZHRoKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y2FzZSBzOlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFsdWUgPSA0NTA7YnJlYWs7XG5cdFx0XHRcdFx0XHRcdFx0Y2FzZSBtOlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFsdWUgPSA3Njg7YnJlYWs7XG5cdFx0XHRcdFx0XHRcdFx0Y2FzZSBsOlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFsdWUgPSAxMDI0O2JyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdGNhc2UgeGw6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2YWx1ZSA9IDE2MDA7YnJlYWs7XG5cdFx0XHRcdFx0XHRcdFx0Y2FzZSBtYXg6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2YWx1ZSA9IDE5MjA7YnJlYWs7XG5cdFx0XHRcdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhbHVlID0gd2lkdGg7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR2YXIgcnVuID0gZnVuY3Rpb24gcnVuKCkge1xuXG5cdFx0XHRcdFx0XHRcdFx0dmFyIGFsbG93ID0gZmFsc2U7XG5cblx0XHRcdFx0XHRcdFx0XHRpZiAodncoKSA+IHZhbHVlKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChydW5fb25jZSA9PT0gdHJ1ZSAmJiBhbGxvdyA9PT0gZmFsc2UpIHJldHVybjtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Zm4oKTtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0YWxsb3cgPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAocnVuX29uY2UgPT09IHRydWUgJiYgYWxsb3cgPT09IHRydWUpIHJldHVybjtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y2FsbGJhY2soKTtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0YWxsb3cgPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblxuXHRcdFx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgcnVuKTtcblx0XHRcdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHJ1bik7XG5cdFx0XHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdvcmllbnRhdGlvbmNoYW5nZScsIHJ1bik7XG59IiwiJ3VzZSBzdHJpY3QnO1xuXG4oZnVuY3Rpb24gKCkge1xuXG4gICAgLyogIC8vLy8gIC0tfCAgICBBY2NvcmRpb25cbiAgICAgICAgIEBzaW5jZSAxLjBcbiAgICAqL1xuXG4gICAgLy8gQ2hlY2sgR2FsbGVyeSBjb21wb25lbnQgZXhpc3RzIG9uIHBhZ2VcbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtc2hpZnRyLWFjY29yZGlvbl0nKSA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuXG4gICAgdmFyIGFjY29yZGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hY2NvcmRpb24nKSxcbiAgICAgICAgYWNjb3JkaW9uX3NpbmdsZXMgPSBhY2NvcmRpb24ucXVlcnlTZWxlY3RvckFsbCgnLnNpbmdsZScpO1xuXG4gICAgYWNjb3JkaW9uX3NpbmdsZXMuZm9yRWFjaChmdW5jdGlvbiAoc2luZ2xlKSB7XG5cbiAgICAgICAgc2luZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgc2luZ2xlLmNsYXNzTGlzdC50b2dnbGUoJ29wZW4nKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59KSgpOyIsIid1c2Ugc3RyaWN0JztcblxuKGZ1bmN0aW9uICgpIHtcblxuICAgIC8qICAvLy8vICAtLXwgICAgQ29va2llXG4gICAgICAgICAqIEhhbmRsZSB0aGUgU2hpZnRyIENvb2tpZSBDb25zZW50XG4gICAgKi9cblxuICAgIC8vICAvLy8vICAtLXwgICAgVGhpcyBpcyB3aGVyZSB3ZSBzZXQgdGhlIGNvb2tpZVxuXG4gICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaGlmdHItY29va2llLW5vdGljZScpID09PSBudWxsKSByZXR1cm47XG5cbiAgICB2YXIgY29va2llX2FjY2VwdGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NoaWZ0ci1jb29raWUtYWNjZXB0Jyk7XG4gICAgdmFyIHNoaWZ0cl9jb29raWVfbm90aWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNoaWZ0ci1jb29raWUtbm90aWNlJyk7XG5cbiAgICBjb29raWVfYWNjZXB0ZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgc2hpZnRyX2Nvb2tpZV9ub3RpY2UuY2xhc3NMaXN0LmFkZCgnYWNjZXB0ZWQnKTtcblxuICAgICAgICAvLyBQcmVwYXJlIHRoZSBjb29raWVcbiAgICAgICAgdmFyIGNvb2tpZV9uYW1lID0gJ3NoaWZ0cl8nICsgc2hpZnRyLm5hbWUgKyAnX2NvbnNlbnQnO1xuXG4gICAgICAgIGNvb2tpZV9uYW1lID0gY29va2llX25hbWUucmVwbGFjZSgnICcsICdfJyk7XG4gICAgICAgIGNvb2tpZV9uYW1lID0gY29va2llX25hbWUudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICB2YXIgY29va2llX2V4cGlyeSA9ICdUaHUsIDE4IERlYyAyMDE5IDEyOjAwOjAwIFVUQyc7XG5cbiAgICAgICAgLy8gU2V0IHRoZSBjb29raWVcbiAgICAgICAgZG9jdW1lbnQuY29va2llID0gY29va2llX25hbWUgKyAnPScgKyB0cnVlICsgJzsgZXhwaXJlcz0nICsgY29va2llX2V4cGlyeSArICc7IHBhdGg9Lyc7XG5cbiAgICAgICAgLy8gTm93LCByZW1vdmUgdGhlIG5vdGljZVxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNoaWZ0cl9jb29raWVfbm90aWNlLmNsYXNzTGlzdC5yZW1vdmUoJ3Bvc3RlZCcpO1xuICAgICAgICB9LCA3NTApO1xuXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChzaGlmdHJfY29va2llX25vdGljZSk7XG4gICAgICAgIH0sIDIwMDApO1xuICAgIH0pO1xufSkoKTsiLCIndXNlIHN0cmljdCc7XG5cbihmdW5jdGlvbiAoKSB7XG5cbiAgICAvKiAgLy8vLyAgLS18ICAgIEZPUk0gSEFORExFUiAwLjUgW0JFVEFdXG4gICAgICAgICAqIFNoaXBzIDEwMCUgZHluYW1pYywgbm90IHRpZWQgdG8gYSBzcGVjaWZpYyBmb3JtLFxuICAgICAgICAgIGFsbG93aW5nIG11bHRpcGxlIGZvcm1zIHRvIHVzZSB0aGUgd2hvbGUgbW9kdWxlXG4gICAgKi9cblxuICAgIC8vICAtLXwgICAgU0VUVElOR1NcbiAgICB2YXIgc2V0dGluZ3MgPSBzaGlmdHIuZm9ybTtcblxuICAgIC8vIFZhbGlkYXRpb24gY2xhc3Nlc1xuICAgIHZhciB2YyA9IHtcbiAgICAgICAgZm9jdXM6ICdmb2N1cycsXG4gICAgICAgIHN1Y2Nlc3M6ICdzdWNjZXNzJyxcbiAgICAgICAgZXJyb3I6ICdlcnJvcidcbiAgICB9O1xuXG4gICAgLy8gIC0tfCAgICBGSUVMRFNcblxuICAgIHZhciBpbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCwgdGV4dGFyZWEnKSxcbiAgICAgICAgbGlzdGVkID0gWyduYW1lJywgJ3RleHQnLCAnZW1haWwnXTtcblxuICAgIGlucHV0cy5mb3JFYWNoKGZ1bmN0aW9uIChpbnB1dCkge1xuXG4gICAgICAgIGlmIChsaXN0ZWQuaW5kZXhPZihpbnB1dC50eXBlKSA+PSAwIHx8IGlucHV0Lm5vZGVOYW1lID09ICdURVhUQVJFQScpIHtcblxuICAgICAgICAgICAgLy8gdGFyZ2V0IGlzIGxhYmVsXG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gaW5wdXQucHJldmlvdXNFbGVtZW50U2libGluZztcblxuICAgICAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQodmMuZm9jdXMpO1xuICAgICAgICAgICAgICAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKHZjLmZvY3VzKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgdGhpcy5jbGFzc05hbWUgPSAnJztcbiAgICAgICAgICAgICAgICB0YXJnZXQuY2xhc3NOYW1lID0gJyc7XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy52YWx1ZSAhPSAnJykge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrVmFsaWRpdHkoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQodmMuc3VjY2Vzcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhcl92YWxpZGF0aW9uKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQodmMuZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2ludmFsaWQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgICAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKHZjLmVycm9yKTtcblxuICAgICAgICAgICAgICAgIGRvX3ZhbGlkYXRpb24odGhpcywgdGhpcy52YWxpZGF0aW9uTWVzc2FnZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmIChpbnB1dC50eXBlID09ICdjaGVja2JveCcpIHtcblxuICAgICAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgaWYgKGlucHV0LmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJfdmFsaWRhdGlvbihpbnB1dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2ludmFsaWQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgICAgIGRvX3ZhbGlkYXRpb24odGhpcywgdGhpcy52YWxpZGF0aW9uTWVzc2FnZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gZG9fdmFsaWRhdGlvbihpbnB1dCwgbWVzc2FnZSkge1xuXG4gICAgICAgIHZhciBtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuXG4gICAgICAgIG0uY2xhc3NMaXN0LmFkZCgndmFsaWRhdGlvbicpO1xuICAgICAgICBtLmlubmVySFRNTCA9IG1lc3NhZ2U7XG4gICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQobSk7XG5cbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBtLmNsYXNzTGlzdC5hZGQoJ3BvcCcpO1xuICAgICAgICB9LCA0MDApO1xuXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY2xlYXJfdmFsaWRhdGlvbihpbnB1dCk7XG4gICAgICAgIH0sIDYwMDApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsZWFyX3ZhbGlkYXRpb24oaW5wdXQpIHtcblxuICAgICAgICB2YXIgbmV4dEVsID0gaW5wdXQubmV4dEVsZW1lbnRTaWJsaW5nO1xuXG4gICAgICAgIGlmIChuZXh0RWwpIHtcblxuICAgICAgICAgICAgaWYgKG5leHRFbC5ub2RlTmFtZSA9PSAnU1BBTicpIHtcblxuICAgICAgICAgICAgICAgIG5leHRFbC5jbGFzc0xpc3QucmVtb3ZlKCdwb3AnKTtcblxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKG5leHRFbCk7XG4gICAgICAgICAgICAgICAgfSwgNDAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qICAtLXwgICAgSGFuZGxlIHRoZSBzdWJtaXNzaW9uXG4gICAgICAgICAgKiBJRSAxMC0xMTogZG9lcyBub3Qgc3VwcG9ydCBqc29uIGFzIHJlc3BvbnNlVHlwZVxuICAgICAgICAqIEZpcmVmb3ggNi05OiBkb2VzIG5vdCBzdXBwb3J0IGpzb24gYXMgcmVzcG9uc2VUeXBlXG4gICAgICAgICogRmlyZWZveCA2LTExOiBkb2VzIG5vdCBzdXBwb3J0IC50aW1lb3V0IGFuZCAub250aW1lb3V0XG4gICAgICAgICogQ2hyb21lIDctMjg6IGRvZXMgbm90IHN1cHBvcnQgLnRpbWVvdXQgYW5kIC5vbnRpbWVvdXRcbiAgICAgICAgKiBDaHJvbWUgNy0zMDogZG9lcyBub3Qgc3VwcG9ydCBqc29uIGFzIHJlc3BvbnNlVHlwZVxuICAgICAgICAqIFNhZmFyaSA1LTc6IGRvZXMgbm90IHN1cHBvcnQgLnRpbWVvdXQgYW5kIC5vbnRpbWVvdXRcbiAgICAgICAgKiBTYWZhcmkgNi4xLTc6IGRvZXMgbm90IHN1cHBvcnQganNvbiBhcyByZXNwb25zZVR5cGVcbiAgICAgKi9cblxuICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybScpKSB7XG4gICAgICAgIHZhciBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm0nKTtcblxuICAgICAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIGZvcm0ucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1cInN1Ym1pdFwiXScpLmNsYXNzTGlzdC5hZGQoJ3N1Ym1pdHRpbmcnKTtcblxuICAgICAgICAgICAgdmFyIGRhdGEgPSBuZXcgRm9ybURhdGEoZm9ybSk7XG5cbiAgICAgICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgICAgICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXR1cyA+PSAyMDAgJiYgdGhpcy5zdGF0dXMgPCA0MDApIHtcblxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnJlc3BvbnNlVGV4dCk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIF9kYXRhID0gSlNPTi5wYXJzZSh0aGlzLnJlc3BvbnNlVGV4dCk7XG5cbiAgICAgICAgICAgICAgICAgICAgZm9ybS5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPVwic3VibWl0XCJdJykuY2xhc3NMaXN0LnJlbW92ZSgnc3VibWl0dGluZycpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChfZGF0YS5zZW50KSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGRvX3N1Ym1pc3Npb24odHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvcicsIHhocik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgYWxlcnQoc2V0dGluZ3MueGhyX2Vycm9yKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHhoci5vcGVuKCdQT1NUJywgc2V0dGluZ3MuYWpheCk7XG4gICAgICAgICAgICB4aHIuc2VuZChkYXRhKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZG9fc3VibWlzc2lvbih0eXBlKSB7XG5cbiAgICAgICAgdmFyIGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtJyk7XG5cbiAgICAgICAgdmFyIG1lc3NhZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSxcbiAgICAgICAgICAgIHdyYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSxcbiAgICAgICAgICAgIGhlYWRpbmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyksXG4gICAgICAgICAgICBjb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpLFxuICAgICAgICAgICAgZXJyb3JfcmVmID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpLFxuICAgICAgICAgICAgY2xvc2VyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG5cbiAgICAgICAgbWVzc2FnZS5jbGFzc0xpc3QuYWRkKCdzdWJtaXNzaW9uJyk7XG5cbiAgICAgICAgLy8gU2VsZWN0IGNvcnJlc3BvbmRpbmcgY29uZmlybWF0aW9uIGNvbnRlbnRcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG5cbiAgICAgICAgICAgIGNhc2UgJ1BPU1QnIHx8ICdNQUlMJzpcbiAgICAgICAgICAgICAgICB2YXIgYm9keSA9IHtcbiAgICAgICAgICAgICAgICAgICAgaDogc2V0dGluZ3MuZXJyb3JfaGVhZGluZyxcbiAgICAgICAgICAgICAgICAgICAgYzogc2V0dGluZ3MuZXJyb3JfYm9keVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgZXJyb3JfcmVmLmlubmVySFRNTCA9ICdFUlJPUiBSRUY6ICcgKyB0eXBlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHZhciBib2R5ID0ge1xuICAgICAgICAgICAgICAgICAgICBoOiBzZXR0aW5ncy5zdWNjZXNzX2hlYWRpbmcsXG4gICAgICAgICAgICAgICAgICAgIGM6IHNldHRpbmdzLnN1Y2Nlc3NfYm9keVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBoZWFkaW5nLmlubmVySFRNTCA9IGJvZHkuaDtcbiAgICAgICAgY29udGVudC5pbm5lckhUTUwgPSBib2R5LmM7XG5cbiAgICAgICAgY2xvc2VyLmlubmVySFRNTCA9ICdDbG9zZSc7XG4gICAgICAgIGNsb3Nlci5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2Nsb3NlLXN1Ym1pc3Npb24nKTtcbiAgICAgICAgY2xvc2VyLmNsYXNzTGlzdC5hZGQoJ2J1dHRvbicpO1xuXG4gICAgICAgIHdyYXAuYXBwZW5kQ2hpbGQoaGVhZGluZyk7XG4gICAgICAgIHdyYXAuYXBwZW5kQ2hpbGQoY29udGVudCk7XG4gICAgICAgIHdyYXAuYXBwZW5kQ2hpbGQoZXJyb3JfcmVmKTtcbiAgICAgICAgbWVzc2FnZS5hcHBlbmRDaGlsZCh3cmFwKTtcbiAgICAgICAgbWVzc2FnZS5hcHBlbmRDaGlsZChjbG9zZXIpO1xuXG4gICAgICAgIGZvcm0uYXBwZW5kQ2hpbGQobWVzc2FnZSk7XG5cbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBtZXNzYWdlLmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTtcbiAgICAgICAgfSwgMTAwKTtcblxuICAgICAgICBjbG9zZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGF1dG9fY2xlYXIpO1xuICAgICAgICAgICAgY2xlYXJfc3VibWlzc2lvbihtZXNzYWdlLCB0eXBlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIGVycm9yX3R5cGVzID0gWydQT1NUJywgJ01BSUwnXSxcbiAgICAgICAgICAgIGF1dG9fY2xlYXJfZGVsYXkgPSB2b2lkIDA7XG5cbiAgICAgICAgaWYgKGVycm9yX3R5cGVzLmluZGV4T2YodHlwZSkgPT0gLTEpIHtcbiAgICAgICAgICAgIGF1dG9fY2xlYXJfZGVsYXkgPSA4MTAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXV0b19jbGVhcl9kZWxheSA9IDMwMDAwO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGF1dG9fY2xlYXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgY2xlYXJfc3VibWlzc2lvbihtZXNzYWdlLCB0eXBlKTtcbiAgICAgICAgfSwgYXV0b19jbGVhcl9kZWxheSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xlYXJfc3VibWlzc2lvbihlbCwgYWN0aW9uKSB7XG5cbiAgICAgICAgaWYgKGFjdGlvbiA9PT0gdHJ1ZSkge1xuXG4gICAgICAgICAgICB2YXIgaTtcblxuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGlucHV0cy5sZW5ndGg7IGkrKykge1xuXG4gICAgICAgICAgICAgICAgaWYgKGxpc3RlZC5pbmRleE9mKGlucHV0c1tpXS50eXBlKSA+IDAgfHwgaW5wdXRzW2ldLm5vZGVOYW1lID09ICdURVhUQVJFQScpIHtcblxuICAgICAgICAgICAgICAgICAgICBpbnB1dHNbaV0udmFsdWUgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRzW2ldLmNsYXNzTmFtZSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICBpbnB1dHNbaV0ucHJldmlvdXNFbGVtZW50U2libGluZy5jbGFzc05hbWUgPSAnJztcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0c1tpXS50eXBlID09ICdjaGVja2JveCcpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRzW2ldLmNoZWNrZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcbiAgICAgICAgfSwgMTAwKTtcbiAgICB9XG59KSgpOyIsIid1c2Ugc3RyaWN0JztcblxuKGZ1bmN0aW9uICgpIHtcblxuICAgIC8qICAvLy8vICAtLXwgICAgR2FsbGVyeVxuICAgICAgICAgKiBCcmFuZCBuZXcgY29tcG9uZW50XG4gICAgKi9cblxuICAgIC8vIENoZWNrIEdhbGxlcnkgY29tcG9uZW50IGV4aXN0cyBvbiBwYWdlXG4gICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXNoaWZ0ci1nYWxsZXJ5XScpID09PSBudWxsKSByZXR1cm4gZmFsc2U7XG5cbiAgICAvLyBDcmVhdGUgdGhlIHZpZXdlclxuICAgIHZhciB2aWV3ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSxcbiAgICAgICAgdmlld2VyX2ltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuXG4gICAgdmlld2VyLmNsYXNzTGlzdC5hZGQoJ2dhbGxlcnktdmlld2VyJyk7XG5cbiAgICB2aWV3ZXIuYXBwZW5kQ2hpbGQodmlld2VyX2ltZyk7XG5cbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHZpZXdlcik7XG5cbiAgICB2YXIgZ2FsbGVyeV9saXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdhbGxlcnktbGlzdCcpLFxuICAgICAgICBnYWxsZXJ5X2ltYWdlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLXNoaWZ0ci1nYWxsZXJ5LWltYWdlXScpO1xuXG4gICAgdmFyIHNvdXJjZXMgPSBbXTtcblxuICAgIC8vIExpc3RlbiBmb3IgaW1hZ2UgY2xpY2tzXG4gICAgZ2FsbGVyeV9pbWFnZXMuZm9yRWFjaChmdW5jdGlvbiAoaW1hZ2UpIHtcblxuICAgICAgICBzb3VyY2VzLnB1c2goaW1hZ2Uuc3JjKTtcblxuICAgICAgICBpbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgdmlld2VyX2ltZy5zcmMgPSBpbWFnZS5zcmM7XG5cbiAgICAgICAgICAgIGlmICh2aWV3ZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdkaXNwbGF5JykpIHJldHVybjtcblxuICAgICAgICAgICAgdmlld2VyLmNsYXNzTGlzdC5hZGQoJ3ByZScpO1xuXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2aWV3ZXIuY2xhc3NMaXN0LmFkZCgnZGlzcGxheScpO1xuICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB2YXIgY291bnRlciA9IHNvdXJjZXMubGVuZ3RoO1xuXG4gICAgLy8gQ2xvc2UgdGhlIHZpZXdlclxuICAgIHZpZXdlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICB2aWV3ZXIuY2xhc3NMaXN0LnJlbW92ZSgnZGlzcGxheScpO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZpZXdlci5jbGFzc0xpc3QucmVtb3ZlKCdwcmUnKTtcbiAgICAgICAgfSwgNjAwKTtcbiAgICB9KTtcblxuICAgIHZpZXdlcl9pbWcuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfSk7XG5cbiAgICAvLyBTd2l0Y2ggYmV0d2VlbiBpbWFnZXMgaW4gdGhlIHZpZXdlclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbiAoZSkge1xuXG4gICAgICAgIHZhciBrZXkgPSBlLmtleUNvZGUgfHwgZS53aGljaCxcbiAgICAgICAgICAgIGN1cnJlbnRfcG9zaXRpb24gPSBzb3VyY2VzLmluZGV4T2Yodmlld2VyX2ltZy5zcmMpO1xuXG4gICAgICAgIC8vIExlZnQgYXJyb3dcbiAgICAgICAgaWYgKGtleSA9PSAzNykge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRfcG9zaXRpb24gPT0gMCkge1xuICAgICAgICAgICAgICAgIHZpZXdlcl9pbWcuc3JjID0gc291cmNlc1tjb3VudGVyIC0gMV07XG5cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZpZXdlcl9pbWcuc3JjID0gc291cmNlc1tjdXJyZW50X3Bvc2l0aW9uIC0gMV07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSaWdodCBhcnJvd1xuICAgICAgICBpZiAoa2V5ID09IDM5KSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudF9wb3NpdGlvbiArIDEgPT0gY291bnRlcikge1xuXG4gICAgICAgICAgICAgICAgdmlld2VyX2ltZy5zcmMgPSBzb3VyY2VzWzBdO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2aWV3ZXJfaW1nLnNyYyA9IHNvdXJjZXNbY3VycmVudF9wb3NpdGlvbiArIDFdO1xuICAgICAgICB9XG4gICAgfSk7XG59KSgpOyIsIid1c2Ugc3RyaWN0JztcblxuKGZ1bmN0aW9uICgpIHtcblxuICAgIC8qICAvLy8vICAtLXwgICAgR0VORVJJQ1xuICAgICAgICAgKiBKdXN0IHNvbWUgbWFnaWNcbiAgICAqL1xuXG4gICAgLy8gIC8vLy8gIC0tfCAgICBUT0dHTEUgSElEREVOIE1FTlVcblxuXG4gICAgdmFyIHRvZ2dsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b2dnbGUnKSxcbiAgICAgICAgbmF2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1haW4tbmF2JyksXG4gICAgICAgIHN1Yl9uYXZzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnbGkucGFyZW50JyksXG4gICAgICAgIGhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXInKSxcbiAgICAgICAgYm9keSA9IGRvY3VtZW50LmJvZHk7XG5cbiAgICAvL2xldCBoZWFkZXJfdHJhbnNpdGlvbl9oZWlnaHQgPSAoIG5hdi5vZmZzZXRIZWlnaHQgLyAxMCApICsgNyArICdyZW0nO1xuICAgIHZhciBoZWFkZXJfdHJhbnNpdGlvbl9oZWlnaHQgPSAnMTAwdmgnO1xuXG4gICAgdmFyIHN0b3AgPSBmdW5jdGlvbiBzdG9wKGUpIHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9O1xuXG4gICAgdmFyIHRvZ2dsZV9tZW51ID0gZnVuY3Rpb24gdG9nZ2xlX21lbnUoZSkge1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgIHRvZ2dsZS5jbGFzc0xpc3QudG9nZ2xlKCd0cmFuc2l0aW9uJyk7XG4gICAgICAgIGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnbm8tc2Nyb2xsJyk7XG5cbiAgICAgICAgaWYgKGhlYWRlci5vZmZzZXRIZWlnaHQgPiBuYXYub2Zmc2V0SGVpZ2h0KSB7XG4gICAgICAgICAgICBoZWFkZXIuc2V0QXR0cmlidXRlKCdzdHlsZScsICcnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGhlYWRlci5zdHlsZS5oZWlnaHQgPSBoZWFkZXJfdHJhbnNpdGlvbl9oZWlnaHQ7XG4gICAgICAgIH1cblxuICAgICAgICBuYXYuY2xhc3NMaXN0LnRvZ2dsZSgnc2hvdycpO1xuICAgIH07XG5cbiAgICB2YXIgdG9nZ2xlX3dpbmRvdyA9IGZ1bmN0aW9uIHRvZ2dsZV93aW5kb3coKSB7XG4gICAgICAgIHRvZ2dsZS5jbGFzc0xpc3QucmVtb3ZlKCd0cmFuc2l0aW9uJyk7XG4gICAgICAgIGhlYWRlci5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJycpO1xuICAgICAgICBib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ25vLXNjcm9sbCcpO1xuICAgICAgICBuYXYuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuICAgIH07XG5cbiAgICB4KG0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdG9nZ2xlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlX21lbnUpO1xuICAgICAgICBuYXYucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzdG9wKTtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlX3dpbmRvdyk7XG4gICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICB0b2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGVfbWVudSk7XG4gICAgICAgIG5hdi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHN0b3ApO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGVfd2luZG93KTtcbiAgICB9LCB0cnVlKTtcblxuICAgIHgobSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIHN1Yl9uYXZzLmZvckVhY2goZnVuY3Rpb24gKHN1Yikge1xuXG4gICAgICAgICAgICB2YXIgbGluayA9IHN1Yi5jaGlsZHJlblswXSxcbiAgICAgICAgICAgICAgICBtZW51ID0gc3ViLmNoaWxkcmVuWzFdLFxuICAgICAgICAgICAgICAgIHJlbW92ZV9vcGVuID0gdm9pZCAwO1xuXG4gICAgICAgICAgICBsaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHJlbW92ZV9vcGVuKTtcblxuICAgICAgICAgICAgICAgIGlmIChzdWIuY2xhc3NMaXN0LmNvbnRhaW5zKCdzaG93JykgIT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgc3ViLmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbGluay5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgZnVuY3Rpb24gKGUpIHtcblxuICAgICAgICAgICAgICAgIHJlbW92ZV9vcGVuID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHN1Yi5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gICAgICAgICAgICAgICAgfSwgMjAwKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBtZW51LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChyZW1vdmVfb3Blbik7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbWVudS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgcmVtb3ZlX29wZW4gPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgc3ViLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcbiAgICAgICAgICAgICAgICB9LCAyMDApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gIC8vLy8gIC0tfCAgICBTSVpFIFVQIFNWRyBMT0dPXG5cblxuICAgIC8vY29uc3QgdGhlX2xvZ28gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggJ3RoZV9sb2dvJyApLFxuICAgIC8vICAgICB2aWV3Ym94ID0gdGhlX2xvZ28uZ2V0QXR0cmlidXRlKCAndmlld0JveCcgKSxcbiAgICAvLyAgICAgdmFsdWVzID0gdmlld2JveC5zcGxpdCggJyAnICksXG4gICAgLy8gICAgIHJhdGlvID0gdmFsdWVzWzJdIC8gdmFsdWVzWzNdLFxuICAgIC8vICAgICB3aWR0aCA9ICggdGhlX2xvZ28ucGFyZW50RWxlbWVudC5vZmZzZXRIZWlnaHQgLyAxMCApICogcmF0aW87XG5cbiAgICAvLyB0aGVfbG9nby5zdHlsZS53aWR0aCA9IGAkeyB3aWR0aCB9cmVtYDtcblxuXG4gICAgLy8gIC8vLy8gIC0tfCAgICBCTE9HIFNUSUNLWSBTSURFQkFSXG5cblxuICAgIHgobCwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIHZhciBzaWRlYmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJsb2ctc2lkZWJhcicpLFxuICAgICAgICAgICAgYmxvZ19sYXlvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYmxvZy1sYXlvdXQgPiBkaXYnKTtcblxuICAgICAgICBpZiAoc2lkZWJhciA9PT0gbnVsbCkgcmV0dXJuO1xuXG4gICAgICAgIHZhciBzaWRlYmFyX3dpZHRoID0gc2lkZWJhci5vZmZzZXRXaWR0aCxcbiAgICAgICAgICAgIHNpZGViYXJfcG9zID0gc2lkZWJhci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcbiAgICAgICAgICAgIGJsb2dfbGF5b3V0X3BvcyA9IGJsb2dfbGF5b3V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIHZhciBjdXJyX3BvcyA9IHdpbmRvdy5zY3JvbGxZO1xuXG4gICAgICAgICAgICBpZiAoY3Vycl9wb3MgKyBzaWRlYmFyLm9mZnNldEhlaWdodCArIGhlYWRlci5vZmZzZXRIZWlnaHQgKyAyMCA+PSBibG9nX2xheW91dF9wb3MuYm90dG9tKSB7XG5cbiAgICAgICAgICAgICAgICBzaWRlYmFyLmNsYXNzTGlzdC5hZGQoJ3BhdXNlJyk7XG4gICAgICAgICAgICAgICAgc2lkZWJhci5jbGFzc0xpc3QucmVtb3ZlKCdzdGlja3knKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3Vycl9wb3MgKyBoZWFkZXIub2Zmc2V0SGVpZ2h0ICsgMjAgPj0gYmxvZ19sYXlvdXRfcG9zLnRvcCkge1xuXG4gICAgICAgICAgICAgICAgc2lkZWJhci5zdHlsZS53aWR0aCA9IHNpZGViYXIub2Zmc2V0V2lkdGggKyAncHgnO1xuICAgICAgICAgICAgICAgIHNpZGViYXIuc3R5bGUudG9wID0gaGVhZGVyLm9mZnNldEhlaWdodCArIDIwICsgJ3B4JztcbiAgICAgICAgICAgICAgICBzaWRlYmFyLnN0eWxlLmxlZnQgPSBzaWRlYmFyX3Bvcy5sZWZ0ICsgJ3B4JztcbiAgICAgICAgICAgICAgICBzaWRlYmFyLmNsYXNzTGlzdC5hZGQoJ3N0aWNreScpO1xuICAgICAgICAgICAgICAgIHNpZGViYXIuY2xhc3NMaXN0LnJlbW92ZSgncGF1c2UnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICBzaWRlYmFyLmNsYXNzTGlzdC5yZW1vdmUoJ3N0aWNreScpO1xuICAgICAgICAgICAgICAgIHNpZGViYXIuc2V0QXR0cmlidXRlKCdzdHlsZScsICcnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyAgLy8vLyAgLS18ICAgIENBUk9VU0VMXG5cbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtc2hpZnRyLWNhcm91c2VsXScpKSB7XG5cbiAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZXJvLWNhcm91c2VsJykpIHtcblxuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVyby1jYXJvdXNlbCAuY29udGVudCcpLmNsYXNzTGlzdC5hZGQoJ2xvYWQnKTtcbiAgICAgICAgICAgICAgICB9LCA4MDApO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZXJvLWNhcm91c2VsJykuc2hpZnRyQ2Fyb3VzZWwoe1xuICAgICAgICAgICAgICAgIHBhdXNlX29uX21hcmtlcl9ob3ZlcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgc3BlZWQ6IDYwMDBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxufSkoKTsiLCIndXNlIHN0cmljdCc7XG5cbihmdW5jdGlvbiAoKSB7XG5cbiAgICAvKiAgLy8vLyAgLS18ICAgIExBWlkgTE9BREVSIDIuMFxuICAgICAgICAgKiBUaGUgc2Vjb25kIGl0ZXJhdGlvbiBvZiB0aGUgTGF6eSBMb2FkZXJcbiAgICAgICAgKiBOb3cgY29udGFpbmVkIHdpdGhpbiBmdW5jdGlvblxuICAgICAgICAqIEhhbmRsZXMgaW1nLCBpZnJhbWUgYW5kIGJhY2tncm91bmQtaW1hZ2VzIGFsbCBpbiBvbmVcbiAgICAgICAgKiBVcGRhdGVkIHRvIEVTNiB3aXRoIGFycm93IGZ1bmN0aW9ucyBhbmQgaW50ZXJwb2xhdGlvblxuICAgICovXG5cbiAgICB2YXIgbGF6eUNvbnRlbnQgPSBbXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5sYXp5JykpLFxuICAgICAgICBsaXN0ZWQgPSBbJ0lNRycsICdJRlJBTUUnXTtcblxuICAgIGlmICgnSW50ZXJzZWN0aW9uT2JzZXJ2ZXInIGluIHdpbmRvdykge1xuXG4gICAgICAgIHZhciBsYXp5T2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24gKGVudHJpZXMsIG9ic2VydmVyKSB7XG5cbiAgICAgICAgICAgIGVudHJpZXMuZm9yRWFjaChmdW5jdGlvbiAoZW50cnkpIHtcblxuICAgICAgICAgICAgICAgIGlmIChlbnRyeS5pc0ludGVyc2VjdGluZykge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBsYXp5SXRlbSA9IGVudHJ5LnRhcmdldDtcblxuICAgICAgICAgICAgICAgICAgICBpZiAobGlzdGVkLmluZGV4T2YobGF6eUl0ZW0ubm9kZU5hbWUpID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhenlJdGVtLnNyYyA9IGxhenlJdGVtLmRhdGFzZXQuc3JjO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGF6eUl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnbGF6eScpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGF6eUl0ZW0uY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpO2xhenlJdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2xhenknKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGxhenlPYnNlcnZlci51bm9ic2VydmUobGF6eUl0ZW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LCB7IHJvb3RNYXJnaW46ICcwcHggMHB4ICcgKyB3aW5kb3cuaW5uZXJIZWlnaHQgKyAncHggMHB4JyB9KTtcblxuICAgICAgICBsYXp5Q29udGVudC5mb3JFYWNoKGZ1bmN0aW9uIChsYXp5SXRlbSkge1xuICAgICAgICAgICAgbGF6eU9ic2VydmVyLm9ic2VydmUobGF6eUl0ZW0pO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuXG4gICAgICAgIHZhciBhY3RpdmUgPSBmYWxzZSxcbiAgICAgICAgICAgIGxhenlMb2FkID0gZnVuY3Rpb24gbGF6eUxvYWQoKSB7XG5cbiAgICAgICAgICAgIGlmIChhY3RpdmUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgYWN0aXZlID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBsYXp5Q29udGVudC5mb3JFYWNoKGZ1bmN0aW9uIChsYXp5SXRlbSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGF6eUl0ZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wIDw9IHdpbmRvdy5pbm5lckhlaWdodCAmJiBsYXp5SXRlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b20gPj0gd2luZG93LmlubmVySGVpZ2h0ICYmIGdldENvbXB1dGVkU3R5bGUobGF6eUl0ZW0pLmRpc3BsYXkgIT0gJ25vbmUnKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobGlzdGVkLmluZGV4T2YobGF6eUl0ZW0ubm9kZU5hbWUpID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF6eUl0ZW0uc3JjID0gbGF6eUl0ZW0uZGF0YXNldC5zcmM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhenlJdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2xhenknKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXp5SXRlbS5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJyk7bGF6eUl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnbGF6eScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhenlDb250ZW50ID0gbGF6eUNvbnRlbnQuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtICE9PSBsYXp5SXRlbTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsYXp5Q29udGVudC5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBsYXp5TG9hZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCBsYXp5TG9hZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdvcmllbnRhdGlvbmNoYW5nZScsIGxhenlMb2FkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO2FjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH0sIDIwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgbGF6eUxvYWQpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgbGF6eUxvYWQpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignb3JpZW50YXRpb25jaGFuZ2UnLCBsYXp5TG9hZCk7XG4gICAgfVxufSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG4oZnVuY3Rpb24gKCkge1xuXG4gICAgLyogIC8vLy8gIC0tfCAgICBHT09HTEUgTUFQUyBBUEkgTEFaWSBMT0FERVJcbiAgICAgICAgICogVGhlIGZ1bmN0aW9uIGlzIHNwbGl0LCBtZWFuaW5nIGxhenkgbG9hZGluZyBcbiAgICAgICAgICBjYW4gYmUgdG9nZ2xlZCBmb3IgZGlmZXJlbnQgcGFnZXMgaWYgbmVjZXNzYXJ5XG4gICAgKi9cblxuICAgIGZ1bmN0aW9uIG1hcHNfYXBpX2xhenlfbG9hZGVyKGtleSkge1xuXG4gICAgICAgIGlmIChhcGlfa2V5KSB7XG5cbiAgICAgICAgICAgIGlmIChQSFBfUEFHRV9JRCA9PSBTVEFUSUNfUEFHRV9JRCkge1xuXG4gICAgICAgICAgICAgICAgdmFyIHdpbmRvd19oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgIG1hcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaGFsZi1tYXBcIiksXG4gICAgICAgICAgICAgICAgICAgIGFwaV91cmwgPSAnaHR0cHM6Ly9tYXBzLmdvb2dsZWFwaXMuY29tL21hcHMvYXBpL2pzP2NhbGxiYWNrPWluaXRpYWxpemUma2V5PScgKyBrZXk7XG5cbiAgICAgICAgICAgICAgICBpZiAoJ0ludGVyc2VjdGlvbk9ic2VydmVyJyBpbiB3aW5kb3cpIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvb3RNYXJnaW46IHdpbmRvd19oZWlnaHQgKyAncHgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyZXNob2xkOiAwXG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKGZ1bmN0aW9uIChlbnRyaWVzLCBvYnNlcnZlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlzSW50ZXJzZWN0aW5nID0gdHlwZW9mIGVudHJpZXNbMF0uaXNJbnRlcnNlY3RpbmcgPT09ICdib29sZWFuJyA/IGVudHJpZXNbMF0uaXNJbnRlcnNlY3RpbmcgOiBlbnRyaWVzWzBdLmludGVyc2VjdGlvblJhdGlvID4gMDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzSW50ZXJzZWN0aW5nKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NyaXB0LnNyYyA9IGFwaV91cmw7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIudW5vYnNlcnZlKG1hcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sIG9wdGlvbnMpO1xuXG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLm9ic2VydmUobWFwKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBhY3RpdmUgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgbGF6eU1hcCA9IGZ1bmN0aW9uIGxhenlNYXAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aXZlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZSA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hcC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgPD0gd2luZG93LmlubmVySGVpZ2h0ICogMiAmJiBtYXAuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuYm90dG9tID49IDAgJiYgZ2V0Q29tcHV0ZWRTdHlsZShtYXApLmRpc3BsYXkgIT09ICdub25lJykge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVfc2NyaXB0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGxhenlNYXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGxhenlNYXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ29yaWVudGF0aW9uY2hhbmdlJywgbGF6eU1hcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAyMDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGxhenlNYXApO1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgbGF6eU1hcCk7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdvcmllbnRhdGlvbmNoYW5nZScsIGxhenlNYXApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgY3VycmVudCBwYWdlIGRvZXNuJ3QgbWF0Y2gsIGxvYWQgaW1tZWRpYXRlbHlcblxuICAgICAgICAgICAgICAgIGNyZWF0ZV9zY3JpcHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZV9zY3JpcHQoKSB7XG4gICAgICAgICAgICB2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gICAgICAgICAgICBzY3JpcHQuc3JjID0gYXBpX3VybDtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG1hcHNfYXBpX2xhenlfbG9hZGVyKCdBSXphU3lCOW5yX29USDFSdFRnWVdHWHhaajZNU05XLXliNmhFN2MnKTtcbn0pOyIsIid1c2Ugc3RyaWN0JztcblxuKGZ1bmN0aW9uICgpIHtcblxuICAgIC8qICAvLy8vICAtLXwgICAgT1JQSEFOXG4gICAgICAgICAqIFNheSBnb29kYnllIHRvIG9ycGhhbiBjaGlsZHJlbiBpbiB0ZXh0O1xuICAgICAgICAgIGJlIGl0IGhlYWRpbmdzLCBwYXJhZ3JhcGhzLCBsaXN0IGl0ZW1zIG9yIHNwYW5zLlxuICAgICAgICAgKiBFeGNsdWRlIGVsZW1lbnRzIHdpdGggZGF0YS1vcnBoYW4gYXR0cmlidXRlXG4gICAgICovXG5cbiAgICAvLyBDb2xsZWN0IHRleHQgZWxlbWVudHNcbiAgICB2YXIgZ3JvdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1vcnBoYW5dJyk7XG5cbiAgICAvLyBUaGUgTG9vcFxuICAgIGdyb3VwLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7XG5cbiAgICAgICAgLy8gQXNzaWduIHRleHQgY29udGVudFxuICAgICAgICB2YXIgY29udGVudCA9IGVsLmlubmVySFRNTCxcbiAgICAgICAgICAgIG5ld05vZGUgPSBbXTtcblxuICAgICAgICAvLyBUYXJnZXQgZWxlbWVudHMgd2l0aCBicmVhayB0YWdzXG4gICAgICAgIGlmIChjb250ZW50LmluZGV4T2YoJzxicj4nKSA+PSAwICYmIGNvbnRlbnQuaW5kZXhPZignICcpID49IDApIHtcbiAgICAgICAgICAgIHZhciB0ZXh0Tm9kZXMgPSBjb250ZW50LnNwbGl0KCc8YnI+Jyk7XG5cbiAgICAgICAgICAgIHRleHROb2Rlcy5mb3JFYWNoKGZ1bmN0aW9uIChub2RlKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGV4dCB3aXRoIG5vIG1vcmUgb3JwaGFucyFcbiAgICAgICAgICAgICAgICBuZXdOb2RlLnB1c2gobm9fb3JwaGFuKG5vZGUpKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBSZWpvaW4gd2hvbGUgZWxlbWVudCBhbmQgdXBkYXRlXG4gICAgICAgICAgICBlbC5pbm5lckhUTUwgPSBuZXdOb2RlLmpvaW4oJzxicj4nKTtcbiAgICAgICAgfSBlbHNlIGlmIChjb250ZW50LmluZGV4T2YoJyAnKSA+PSAwKSB7XG5cbiAgICAgICAgICAgIC8vIFVwZGF0ZSB0ZXh0IHdpdGggbm8gbW9yZSBvcnBoYW5zIVxuICAgICAgICAgICAgZWwuaW5uZXJIVE1MID0gbm9fb3JwaGFuKGNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBSZXBsYWNlIHNwYWNlIHdpdGggJm5ic3A7XG4gICAgZnVuY3Rpb24gbm9fb3JwaGFuKGVsKSB7XG5cbiAgICAgICAgLy8gR2V0IGxhc3Qgc3BhY2UgcG9zaXRpb25cbiAgICAgICAgdmFyIHNwYWNlID0gZWwubGFzdEluZGV4T2YoJyAnKTtcblxuICAgICAgICAvLyBEbyB0aGUgbWFnaWNcbiAgICAgICAgcmV0dXJuIGVsLnNsaWNlKDAsIHNwYWNlKSArIGVsLnNsaWNlKHNwYWNlKS5yZXBsYWNlKCcgJywgJyZuYnNwOycpO1xuICAgIH1cbn0pKCk7IiwiJ3VzZSBzdHJpY3QnO1xuXG4oZnVuY3Rpb24gKCkge1xuXG4gICAgLyogIC8vLy8gIC0tfCAgICBQT1BVUFNcbiAgICAgICAgICogQmFzaWMgZnVuY3Rpb25hbGl0eSB0byBoYW5kbGUgb3BlbmluZyBhbiBjbG9zaW5nXG4gICAgICAgICAgb2YgcG9wdXAgZWxlbWVudHMuXG4gICAgICAgICogQ2FuIGhhbmRsZSBtdWx0aXBsZSBwb3B1cHMgcGVyIHBhZ2VcbiAgICAqL1xuXG4gICAgdmFyIG9wZW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcub3BlbicpLFxuICAgICAgICBjbG9zZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy54JyksXG4gICAgICAgIGJvZHkgPSBkb2N1bWVudC5ib2R5O1xuXG4gICAgb3Blbi5mb3JFYWNoKGZ1bmN0aW9uIChvcGVuZXIpIHtcbiAgICAgICAgb3BlbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICB2YXIgaW5zdGFuY2UgPSBvcGVuZXIuZ2V0QXR0cmlidXRlKCdkYXRhLW9wZW4nKSxcbiAgICAgICAgICAgICAgICBwb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXBvcHVwPVwiJyArIGluc3RhbmNlICsgJ1wiXScpO1xuXG4gICAgICAgICAgICBwb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cC1hcHBlYXInKTtcbiAgICAgICAgICAgIGJvZHkuY2xhc3NMaXN0LmFkZCgnbm8tc2Nyb2xsJyk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgY2xvc2UuZm9yRWFjaChmdW5jdGlvbiAoY2xvc2VyKSB7XG4gICAgICAgIGNsb3Nlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgdmFyIHBvcHVwID0gY2xvc2VyLnBhcmVudEVsZW1lbnQ7XG5cbiAgICAgICAgICAgIHBvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwLWRpc2FwcGVhcicpO1xuICAgICAgICAgICAgYm9keS5jbGFzc0xpc3QucmVtb3ZlKCduby1zY3JvbGwnKTtcblxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXAtYXBwZWFyJyk7XG4gICAgICAgICAgICAgICAgcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXAtZGlzYXBwZWFyJyk7XG4gICAgICAgICAgICB9LCAxMjAwKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59KTsiXSwiZmlsZSI6ImNvcmUtbWluLmpzIn0=
